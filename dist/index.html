
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      :root {
        --bg-color: #121212;
        --container-bg: #1e1e1e;
        --text-color: #e0e0e0;
        --heading-color: #ffffff;
        --subheading-color: #58a6ff;
        --link-color: #58a6ff;
        --border-color: #333333;
        --item-hover: #2a2a2a;
        --shadow: 0 4px 12px rgba(0,0,0,0.2);
        --accent-color: #58a6ff;
        --tooltip-bg: #2a2a2a;
        --tooltip-text: #e0e0e0;
        --table-header-bg: #2a2a2a;
        --table-header-text: #ffffff;
        --table-row-odd: #1e1e1e;
        --table-row-even: #252525;
      }
      
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.5;
        color: var(--text-color);
        background-color: var(--bg-color);
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 15px;
      }
      
      .card {
        background-color: var(--container-bg);
        border-radius: 8px;
        box-shadow: var(--shadow);
        padding: 16px;
        margin-bottom: 16px;
        transition: all 0.2s ease;
      }
      
      .card:hover {
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      }

      .header-p {
        margin: 0.2em 0;
        font-weight: 500;
        letter-spacing: -0.02em;
        font-size: 14px;
      }

      .subreddit {
        text-align: right;
      }
      
      h2 {
        font-size: 18px;
        font-weight: 600;
        color: var(--heading-color);
        margin-top: 0;
        margin-bottom: 12px;
        padding-bottom: 6px;
        border-bottom: 2px solid var(--accent-color);
      }
      
      h3 {
        font-size: 16px;
        font-weight: 500;
        color: var(--subheading-color);
        margin-bottom: 8px;
      }
      
      a {
        color: var(--link-color);
        text-decoration: none;
        transition: color 0.2s ease;
      }
      
      a:hover {
        color: var(--accent-color);
        text-decoration: underline;
      }
      
      /* Weather Table Styles */
      .weather-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        border-radius: 6px;
        overflow: hidden;
      }
      
      .weather-table th {
        background-color: var(--table-header-bg);
        color: var(--table-header-text);
        font-weight: 500;
        text-align: left;
        padding: 8px 12px;
        font-size: 14px;
      }
      
      .weather-table td {
        padding: 8px 12px;
        border-bottom: 1px solid var(--border-color);
        font-size: 14px;
      }
      
      .weather-table tr:nth-child(odd) {
        background-color: var(--table-row-odd);
      }
      
      .weather-table tr:nth-child(even) {
        background-color: var(--table-row-even);
      }
      
      .weather-table tr:last-child td {
        border-bottom: none;
      }
      
      .comic {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 12px 0;
      }
      
      .comic-title {
        font-weight: 600;
        margin-bottom: 8px;
        text-align: center;
        font-size: 15px;
      }
      
      .comic img {
        max-width: 600px;
        max-height: auto;
        object-fit: contain;
        border-radius: 6px;
        margin-bottom: 6px;
        cursor: pointer;
      }
      
      .comic-number {
        font-size: 12px;
        color: var(--text-color);
        opacity: 0.7;
        margin-top: 3px;
      }
      
      .item-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      
      .item-list li {
        padding: 8px 10px;
        border-bottom: 1px solid var(--border-color);
        position: relative;
        font-size: 14px;
      }
      
      .item-list li:last-child {
        border-bottom: none;
      }
      
      .item-list li:hover {
        background-color: var(--item-hover);
        border-radius: 4px;
      }
      
      .item-content {
        display: none;
        position: absolute;
        z-index: 10;
        background-color: var(--tooltip-bg);
        color: var(--tooltip-text);
        border-radius: 6px;
        padding: 15px;
        width: 90%;
        max-width: 100%;
        box-shadow: 0 4px 16px rgba(0,0,0,0.3);
        left: 50%;
        transform: translateX(-50%);
        bottom: 100%;
        font-size: 13px;
        line-height: 1.4;
        overflow: auto;
        max-height: 250px;
        border: 4px solid var(--border-color);
      }

      .item-content::-webkit-scrollbar {
        display: none;
      }

      .item-list li:hover .item-content {
        display: block;
      }
      
      .item-list li::before {
        content: "‚Ä¢";
        color: var(--accent-color);
        font-weight: bold;
        display: inline-block;
        width: 1em;
        margin-left: -0.5em;
      }
      
      @media (max-width: 600px) {
        .container {
          padding: 10px;
        }
        
        .card {
          padding: 12px;
          margin-bottom: 12px;
        }
        
        .item-content {
          width: 95%;
          left: 2.5%;
          transform: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
  
      <div class="card">
        <h2>Huginn Daily</h2>
        <p class="header-p">Thursday, April 10, 2025</p>
        <p class="header-p">a8a12bd5-5bee-4f9d-850c-7ac37939e88a</p>
      </div>
  
      <div class="card">
        <h2>Weather</h2>
        <table class="weather-table">
          <tr>
            <th>Summary</th>
            <td>‚õÖÔ∏è Breezy</td>
          </tr>
          <tr>
            <th>Temperature Range</th>
            <td>8¬∞C to 16¬∞C (47¬∞F to 61¬∞F)</td>
          </tr>
          <tr>
            <th>Feels Like</th>
            <td>Low: 34¬∞F | High: 47¬∞F</td>
          </tr>
          <tr>
            <th>Humidity</th>
            <td>54%</td>
          </tr>
          <tr>
            <th>Wind</th>
            <td>30 km/h (19 mph), Direction: 275.1¬∞</td>
          </tr>
          <tr>
            <th>Precipitation</th>
            <td>Probability: 0%, Type: rain</td>
          </tr>
          <tr>
            <th>Sunrise / Sunset</th>
            <td>üåÖ 06:22 AM / üåá 07:15 PM</td>
          </tr>
          <tr>
            <th>Moon Phase</th>
            <td>Waxing Gibbous (43%)</td>
          </tr>
          <tr>
            <th>Cloud Cover</th>
            <td>3%</td>
          </tr>
          <tr>
            <th>Pressure</th>
            <td>1012.7 hPa</td>
          </tr>
          <tr>
            <th>Dew Point</th>
            <td>36.58¬∞F</td>
          </tr>
          <tr>
            <th>Visibility</th>
            <td>10.0 miles</td>
          </tr>
        </table>
      </div>
  
      <div class="card">
        <h2>XKCD</h2>
  
        <div class="comic">
          <a href="//imgs.xkcd.com/comics/push_notifications.png" target="_blank">
            <img src="//imgs.xkcd.com/comics/push_notifications.png" alt="Push Notifications">
          </a>
        </div>
  
      </div>
  
      <div class="card">
        <h2>Golang</h2>
        <ul class="item-list">
  
          <li>
            <a href="https://go.dev/blog/testing-b-loop" target="_blank">More predictable benchmarking with testing.B.Loop</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/testing-b-loop">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>More predictable benchmarking with testing.B.Loop</h1>
      
      <p class="author">
      Junyang Shao<br>
      2 April 2025
      </p>
      
      <p>Go developers who have written benchmarks using the
<a href="https://pkg.go.dev/testing" rel="noreferrer" target="_blank"><code>testing</code></a> package might have encountered some of
its various pitfalls. Go 1.24 introduces a new way to write benchmarks that&rsquo;s just
as easy to use, but at the same time far more robust:
<a href="https://pkg.go.dev/testing#B.Loop" rel="noreferrer" target="_blank"><code>testing.B.Loop</code></a>.</p>
<p>Traditionally, Go benchmarks are written using a loop from 0 to <code>b.N</code>:</p>
<pre><code>func Benchmark(b *testing.B) {
  for range b.N {
    ... code to measure ...
  }
}
</code></pre>
<p>Using <code>b.Loop</code> instead is a trivial change:</p>
<pre><code>func Benchmark(b *testing.B) {
  for b.Loop() {
    ... code to measure ...
  }
}
</code></pre>
<p><code>testing.B.Loop</code> has many benefits:</p>
<ul>
<li>It prevents unwanted compiler optimizations within the benchmark loop.</li>
<li>It automatically excludes setup and cleanup code from benchmark timing.</li>
<li>Code can&rsquo;t accidentally depend on the total number of iterations or the current
iteration.</li>
</ul>
<p>These were all easy mistakes to make with <code>b.N</code>-style benchmarks that would
silently result in bogus benchmark results. As an added bonus, <code>b.Loop</code>-style
benchmarks even complete in less time!</p>
<p>Let&rsquo;s explore the advantages of <code>testing.B.Loop</code> and how to effectively utilize it.</p>
<h2 id="old-benchmark-loop-problems">Old benchmark loop problems</h2>
<p>Before Go 1.24, while the basic structure of a benchmark was simple, more sophisticated
benchmarks required more care:</p>
<pre><code>func Benchmark(b *testing.B) {
  ... setup ...
  b.ResetTimer() // if setup may be expensive
  for range b.N {
    ... code to measure ...
    ... use sinks or accumulation to prevent dead-code elimination ...
  }
  b.StopTimer() // if cleanup or reporting may be expensive
  ... cleanup ...
  ... report ...
}
</code></pre>
<p>If setup or cleanup are non-trivial, the developer needs to surround the benchmark loop
with <code>ResetTimer</code> and/or <code>StopTimer</code> calls. These are easy to forget, and even if the
developer remembers they may be necessary, it can be difficult to judge whether setup or
cleanup are &ldquo;expensive enough&rdquo; to require them.</p>
<p>Without these, the <code>testing</code> package can only time the entire benchmark function. If a
benchmark function omits them, the setup and cleanup code will be included in the overall
time measurement, silently skewing the final benchmark result.</p>
<p>There is another, more subtle pitfall that requires deeper understanding:
(<a href="https://eli.thegreenplace.net/2023/common-pitfalls-in-go-benchmarking/" rel="noreferrer" target="_blank">Example source</a>)</p>
<pre><code>func isCond(b byte) bool {
  if b%3 == 1 &amp;&amp; b%7 == 2 &amp;&amp; b%17 == 11 &amp;&amp; b%31 == 9 {
    return true
  }
  return false
}

func BenchmarkIsCondWrong(b *testing.B) {
  for range b.N {
    isCond(201)
  }
}
</code></pre>
<p>In this example, the user might observe <code>isCond</code> executing in sub-nanosecond
time. CPUs are fast, but not that fast! This seemingly anomalous result stems
from the fact that <code>isCond</code> is inlined, and since its result is never used, the
compiler eliminates it as dead code. As a result, this benchmark doesn&rsquo;t measure <code>isCond</code>
at all; it measures how long it takes to do nothing. In this case, the sub-nanosecond
result is a clear red flag, but in more complex benchmarks, partial dead-code elimination
can lead to results that look reasonable but still aren&rsquo;t measuring what was intended.</p>
<h2 id="how-testingbloop-helps">How <code>testing.B.Loop</code> helps</h2>
<p>Unlike a <code>b.N</code>-style benchmark, <code>testing.B.Loop</code> is able to track when it is first called
in a benchmark when the final iteration ends. The <code>b.ResetTimer</code> at the loop&rsquo;s start
and <code>b.StopTimer</code> at its end are integrated into <code>testing.B.Loop</code>, eliminating the need
to manually manage the benchmark timer for setup and cleanup code.</p>
<p>Furthermore, the Go compiler now detects loops where the condition is just a call to
<code>testing.B.Loop</code> and prevents dead code elimination within the loop. In Go 1.24, this is
implemented by disallowing inlining into the body of such a loop, but we plan to
<a href="/issue/73137">improve</a> this in the future.</p>
<p>Another nice feature of <code>testing.B.Loop</code> is its one-shot ramp-up approach. With a <code>b.N</code>-style
benchmark, the testing package must call the benchmark function several times with different
values of <code>b.N</code>, ramping up until the measured time reached a threshold. In contrast, <code>b.Loop</code>
can simply run the benchmark loop until it reaches the time threshold, and only needs to call
the benchmark function once. Internally, <code>b.Loop</code> still uses a ramp-up process to amortize
measurement overhead, but this is hidden from the caller and can be more efficient.</p>
<p>Certain constraints of the <code>b.N</code>-style loop still apply to the <code>b.Loop</code>-style
loop. It remains the user&rsquo;s responsibility to manage the timer within the benchmark loop,
when necessary:
(<a href="https://eli.thegreenplace.net/2023/common-pitfalls-in-go-benchmarking/" rel="noreferrer" target="_blank">Example source</a>)</p>
<pre><code>func BenchmarkSortInts(b *testing.B) {
  ints := make([]int, N)
  for b.Loop() {
    b.StopTimer()
    fillRandomInts(ints)
    b.StartTimer()
    slices.Sort(ints)
  }
}
</code></pre>
<p>In this example, to benchmark the in-place sorting performance of <code>slices.Sort</code>,a
randomly initialized array is required for each iteration. The user must still
manually manage the timer in such cases.</p>
<p>Furthermore, there still needs to be exactly one such loop in the benchmark function body
(a <code>b.N</code>-style loop cannot coexist with a <code>b.Loop</code>-style loop), and every iteration of the
loop should do the same thing.</p>
<h2 id="when-to-use">When to use</h2>
<p>The <code>testing.B.Loop</code> method is now the preferred way to write benchmarks:</p>
<pre><code>func Benchmark(b *testing.B) {
  ... setup ...
  for b.Loop() {
    // optional timer control for in-loop setup/cleanup
    ... code to measure ...
  }
  ... cleanup ...
}
</code></pre>
<p><code>testing.B.Loop</code> offers faster, more accurate, and
more intuitive benchmarking.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>A huge thank you to everyone in the community who provided feedback on the proposal
issue and reported bugs as this feature was released! I&rsquo;m also grateful to Eli
Bendersky for his helpful blog summaries. And finally a big thank you to Austin Clements,
Cherry Mui and Michael Pratt for their review, thoughtful work on the design options and
documentation improvements. Thank you all for your contributions!</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
        <p>
        
        
          
            <b>Previous article: </b><a href="/blog/coretypes">Goodbye core types - Hello Go as we know and love it!</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/coretypes" target="_blank">Goodbye core types - Hello Go as we know and love it!</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/coretypes">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Goodbye core types - Hello Go as we know and love it!</h1>
      
      <p class="author">
      Robert Griesemer<br>
      26 March 2025
      </p>
      
      <p>The Go 1.18 release introduced generics and with that a number of new features, including type parameters, type constraints, and new concepts such as type sets.
It also introduced the notion of a <em>core type</em>.
While the former provide concrete new functionality, a core type is an abstract construct that was introduced
for expediency and to simplify dealing with generic operands (operands whose types are type parameters).
In the Go compiler, code that in the past relied on the <a href="/ref/spec/#Underlying_types">underlying type</a> of an operand,
now instead had to call a function computing the operand&rsquo;s core type.
In the language spec, in many places we just needed to replace &ldquo;underlying type&rdquo; with &ldquo;core type&rdquo;.
What&rsquo;s not to like?</p>
<p>Quite a few things, as it turns out!
To understand how we got here, it&rsquo;s useful to briefly revisit how type parameters and type constraints work.</p>
<h2 id="type-parameters-and-type-constraints">Type parameters and type constraints</h2>
<p>A type parameter is a placeholder for a future type argument;
it acts like a <em>type variable</em> whose value is known at compile time,
similar to how a named constant stands for a number, string, or bool whose value is known at compile time.
Like ordinary variables, type parameters have a type.
That type is described by their <em>type constraint</em> which determines
what operations are permitted on operands whose type is the respective type parameter.</p>
<p>Any concrete type that instantiates a type parameter must satisfy the type parameter&rsquo;s constraint.
This ensures that an operand whose type is a type parameter possesses all of the respective type constraint&rsquo;s properties,
no matter what concrete type is used to instantiate the type parameter.</p>
<p>In Go, type constraints are described through a mixture of method and type requirements which together
define a <em>type set</em>: this is the set of all the types that satisfy all the requirements. Go uses a
generalized form of interfaces for this purpose. An interface enumerates a set of methods and types,
and the type set described by such an interface consists of all the types that implement those methods
and that are included in the enumerated types.</p>
<p>For instance, the type set described by the interface</p>
<pre><code class="language-Go">type Constraint interface {
    ~[]byte | ~string
    Hash() uint64
}
</code></pre>
<p>consists of all the types whose representation is <code>[]byte</code> or <code>string</code> and whose method set includes the <code>Hash</code> method.</p>
<p>With this we can now write down the rules that govern operations on generic operands.
For instance, the <a href="/ref/spec#Index_expressions">rules for index expressions</a> state that (among other things)
for an operand <code>a</code> of type parameter type <code>P</code>:</p>
<blockquote>
<p>The index expression <code>a[x]</code> must be valid for values of all types in <code>P</code>&rsquo;s type set.
The element types of all types in <code>P</code>&rsquo;s type set must be identical.
(In this context, the element type of a string type is <code>byte</code>.)</p>
</blockquote>
<p>These rules make it possible to index the generic variable <code>s</code> below (<a href="/play/p/M1LYKm3x3IB">playground</a>):</p>
<pre><code class="language-Go">func at[bytestring Constraint](s bytestring, i int) byte {
    return s[i]
}
</code></pre>
<p>The indexing operation <code>s[i]</code> is permitted because the type of <code>s</code> is <code>bytestring</code>, and the type constraint (type set) of
<code>bytestring</code> contains <code>[]byte</code> and <code>string</code> types for which indexing with <code>i</code> is valid.</p>
<h2 id="core-types">Core types</h2>
<p>This type set-based approach is very flexible and in line with the intentions of the
<a href="https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md" rel="noreferrer" target="_blank">original generics proposal</a>:
an operation involving operands of generic type should be valid if it is valid for any type permitted by the respective
type constraint.
To simplify matters with respect to the implementation, knowing that we would be able to relax rules later,
this approach was <em>not</em> chosen universally.
Instead, for instance, for <a href="/ref/spec#Send_statements">Send statements</a>, the spec states that</p>
<blockquote>
<p>The channel expression&rsquo;s <em>core type</em> must be a channel, the channel direction must permit send operations,
and the type of the value to be sent must be assignable to the channel&rsquo;s element type.</p>
</blockquote>
<p>These rules are based on the notion of a core type which is defined roughly as follows:</p>
<ul>
<li>If a type is not a type parameter, its core type is just its <a href="/ref/spec#Underlying_types">underlying type</a>.</li>
<li>If the type is a type parameter, the core type is the single underlying type of all the types in the type parameter&rsquo;s type set.
If the type set has <em>different</em> underlying types, the core type doesn&rsquo;t exist.</li>
</ul>
<p>For instance, <code>interface{ ~[]int }</code> has a core type (<code>[]int</code>), but the <code>Constraint</code> interface above does not have a core type.
To make things more complicated, when it comes to channel operations and certain built-in calls (<code>append</code>, <code>copy</code>) the above definition
of core types is too restrictive.
The actual rules have adjustments that allow for differing channel directions and type sets containing both <code>[]byte</code> and <code>string</code> types.</p>
<p>There are various problems with this approach:</p>
<ul>
<li>
<p>Because the definition of core type must lead to sound type rules for different language features,
it is overly restrictive for specific operations.
For instance, the Go 1.24 rules for <a href="/ref/spec#Slice_expressions">slice expressions</a> do rely on core types,
and as a consequence slicing an operand of type <code>S</code> constrained by <code>Constraint</code> is not permitted, even though
it could be valid.</p>
</li>
<li>
<p>When trying to understand a specific language feature, one may have to learn the intricacies of
core types even when considering non-generic code.
Again, for slice expressions, the language spec talks about the core type of the sliced operand,
rather than just stating that the operand must be an array, slice, or string.
The latter is more direct, simpler, and clearer, and doesn&rsquo;t require knowing another concept that may be
irrelevant in the concrete case.</p>
</li>
<li>
<p>Because the notion of core types exists, the rules for index expressions, and <code>len</code> and <code>cap</code> (and others),
which all eschew core types, appear as exceptions in the language rather than the norm.
In turn, core types cause proposals such as <a href="/issue/48522">issue #48522</a> which would permit a selector
<code>x.f</code> to access a field <code>f</code> shared by all elements of <code>x</code>&rsquo;s type set, to appear to add more exceptions to the
language.
Without core types, that feature becomes a natural and useful consequence of the ordinary rules for non-generic
field access.</p>
</li>
</ul>
<h2 id="go-125">Go 1.25</h2>
<p>For the upcoming Go 1.25 release (August 2025) we decided to remove the notion of core types from the
language spec in favor of explicit (and equivalent!) prose where needed.
This has multiple benefits:</p>
<ul>
<li>The Go spec presents fewer concepts, making it easier to learn the language.</li>
<li>The behavior of non-generic code can be understood without reference to generics concepts.</li>
<li>The individualized approach (specific rules for specific operations) opens the door for more flexible rules.
We already mentioned <a href="/issue/48522">issue #48522</a>, but there are also ideas for more powerful
slice operations, and <a href="/issue/69153">improved type inference</a>.</li>
</ul>
<p>The respective <a href="/issue/70128">proposal issue #70128</a> was recently approved and the relevant changes
are already implemented.
Concretely this means that a lot of prose in the language spec was reverted to its original,
pre-generics form, and new paragraphs were added where needed to explain the rules as they
pertain to generic operands. Importantly, no behavior was changed.
The entire section on core types was removed.
The compiler&rsquo;s error messages were updated to not mention &ldquo;core type&rdquo; anymore, and in many
cases error messages are now more specific by pointing out exactly which type in a type set
is causing a problem.</p>
<p>Here is a sample of the changes made. For the built-in function <code>close</code>,
starting with Go 1.18 the spec began as follows:</p>
<blockquote>
<p>For an argument <code>ch</code> with core type that is a channel,
the built-in function <code>close</code> records that no more values will be sent on the channel.</p>
</blockquote>
<p>A reader who simply wanted to know how <code>close</code> works, had to first learn about core types.
Starting with Go 1.25, this section will again begin the same way it began before Go 1.18:</p>
<blockquote>
<p>For a channel <code>ch</code>, the built-in function <code>close(ch)</code>
records that no more values will be sent on the channel.</p>
</blockquote>
<p>This is shorter and easier to understand.
Only when the reader is dealing with a generic operand will they have to contemplate
the newly added paragraph:</p>
<blockquote>
<p>If the type of the argument to <code>close</code> is a type parameter
all types in its type set must be channels with the same element type.
It is an error if any of those channels is a receive-only channel.</p>
</blockquote>
<p>We made similar changes to each place that mentioned core types.
In summary, although this spec update does not affect any current Go program, it opens the
door to future language improvements while making the language as it is today easier to
learn and its spec simpler.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/testing-b-loop">More predictable benchmarking with testing.B.Loop</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/osroot">Traversal-resistant file APIs</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/osroot" target="_blank">Traversal-resistant file APIs</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/osroot">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Traversal-resistant file APIs</h1>
      
      <p class="author">
      Damien Neil<br>
      12 March 2025
      </p>
      
      <p>A <em>path traversal vulnerability</em> arises when an attacker can trick a program
into opening a file other than the one it intended.
This post explains this class of vulnerability,
some existing defenses against it, and describes how the new
<a href="/pkg/os#Root"><code>os.Root</code></a> API added in Go 1.24 provides
a simple and robust defense against unintentional path traversal.</p>
<h2 id="path-traversal-attacks">Path traversal attacks</h2>
<p>&ldquo;Path traversal&rdquo; covers a number of related attacks following a common pattern:
A program attempts to open a file in some known location, but an attacker causes
it to open a file in a different location.</p>
<p>If the attacker controls part of the filename, they may be able to use relative
directory components (&quot;..&quot;) to escape the intended location:</p>
<pre><code>f, err := os.Open(filepath.Join(trustedLocation, &quot;../../../../etc/passwd&quot;))
</code></pre>
<p>On Windows systems, some names have special meaning:</p>
<pre><code>// f will print to the console.
f, err := os.Create(filepath.Join(trustedLocation, &quot;CONOUT$&quot;))
</code></pre>
<p>If the attacker controls part of the local filesystem, they may be able to use
symbolic links to cause a program to access the wrong file:</p>
<pre><code>// Attacker links /home/user/.config to /home/otheruser/.config:
err := os.WriteFile(&quot;/home/user/.config/foo&quot;, config, 0o666)
</code></pre>
<p>If the program defends against symlink traversal by first verifying that the intended file
does not contain any symlinks, it may still be vulnerable to
<a href="https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use" rel="noreferrer" target="_blank">time-of-check/time-of-use (TOCTOU) races</a>,
where the attacker creates a symlink after the program&rsquo;s check:</p>
<pre><code>// Validate the path before use.
cleaned, err := filepath.EvalSymlinks(unsafePath)
if err != nil {
  return err
}
if !filepath.IsLocal(cleaned) {
  return errors.New(&quot;unsafe path&quot;)
}

// Attacker replaces part of the path with a symlink.
// The Open call follows the symlink:
f, err := os.Open(cleaned)
</code></pre>
<p>Another variety of TOCTOU race involves moving a directory that forms part of a path
mid-traversal. For example, the attacker provides a path such as &ldquo;a/b/c/../../etc/passwd&rdquo;,
and renames &ldquo;a/b/c&rdquo; to &ldquo;a/b&rdquo; while the open operation is in progress.</p>
<h2 id="path-sanitization">Path sanitization</h2>
<p>Before we tackle path traversal attacks in general, let&rsquo;s start with path sanitization.
When a program&rsquo;s threat model does not include attackers with access to the local file system,
it can be sufficient to validate untrusted input paths before use.</p>
<p>Unfortunately, sanitizing paths can be surprisingly tricky,
especially for portable programs that must handle both Unix and Windows paths.
For example, on Windows <code>filepath.IsAbs(`\foo`)</code> reports <code>false</code>,
because the path &ldquo;\foo&rdquo; is relative to the current drive.</p>
<p>In Go 1.20, we added the <a href="/pkg/path/filepath#IsLocal"><code>path/filepath.IsLocal</code></a>
function, which reports whether a path is &ldquo;local&rdquo;. A &ldquo;local&rdquo; path is one which:</p>
<ul>
<li>does not escape the directory in which it is evaluated (&quot;../etc/passwd&quot; is not allowed);</li>
<li>is not an absolute path (&quot;/etc/passwd&quot; is not allowed);</li>
<li>is not empty (&quot;&quot; is not allowed);</li>
<li>on Windows, is not a reserved name (&ldquo;COM1&rdquo; is not allowed).</li>
</ul>
<p>In Go 1.23, we added the <a href="/pkg/path/filepath#Localize"><code>path/filepath.Localize</code></a>
function, which converts a /-separated path into a local operating system path.</p>
<p>Programs that accept and operate on potentially attacker-controlled paths should almost
always use <code>filepath.IsLocal</code> or <code>filepath.Localize</code> to validate or sanitize those paths.</p>
<h2 id="beyond-sanitization">Beyond sanitization</h2>
<p>Path sanitization is not sufficient when attackers may have access to part of
the local filesystem.</p>
<p>Multi-user systems are uncommon these days, but attacker access to the filesystem
can still occur in a variety of ways.
An unarchiving utility that extracts a tar or zip file may be induced
to extract a symbolic link and then extract a file name that traverses that link.
A container runtime may give untrusted code access to a portion of the local filesystem.</p>
<p>Programs may defend against unintended symlink traversal by using the
<a href="/pkg/path/filepath#EvalSymlinks"><code>path/filepath.EvalSymlinks</code></a>
function to resolve links in untrusted names before validation, but as described
above this two-step process is vulnerable to TOCTOU races.</p>
<p>Before Go 1.24, the safer option was to use a package such as
<a href="/pkg/github.com/google/safeopen">github.com/google/safeopen</a>,
that provides path traversal-resistant functions for opening a potentially-untrusted
filename within a specific directory.</p>
<h2 id="introducing-osroot">Introducing <code>os.Root</code></h2>
<p>In Go 1.24, we are introducing new APIs in the <code>os</code> package to safely open
a file in a location in a traversal-resistant fashion.</p>
<p>The new <a href="/pkg/os#Root"><code>os.Root</code></a> type represents a directory somewhere
in the local filesystem. Open a root with the <a href="/pkg/os#OpenRoot"><code>os.OpenRoot</code></a>
function:</p>
<pre><code>root, err := os.OpenRoot(&quot;/some/root/directory&quot;)
if err != nil {
  return err
}
defer root.Close()
</code></pre>
<p><code>Root</code> provides methods to operate on files within the root.
These methods all accept filenames relative to the root,
and disallow any operations that would escape from the root either
using relative path components (&quot;..&quot;) or symlinks.</p>
<pre><code>f, err := root.Open(&quot;path/to/file&quot;)
</code></pre>
<p><code>Root</code> permits relative path components and symlinks that do not escape the root.
For example, <code>root.Open(&quot;a/../b&quot;)</code> is permitted. Filenames are resolved using the
semantics of the local platform: On Unix systems, this will follow
any symlink in &ldquo;a&rdquo; (so long as that link does not escape the root);
while on Windows systems this will open &ldquo;b&rdquo; (even if &ldquo;a&rdquo; does not exist).</p>
<p><code>Root</code> currently provides the following set of operations:</p>
<pre><code>func (*Root) Create(string) (*File, error)
func (*Root) Lstat(string) (fs.FileInfo, error)
func (*Root) Mkdir(string, fs.FileMode) error
func (*Root) Open(string) (*File, error)
func (*Root) OpenFile(string, int, fs.FileMode) (*File, error)
func (*Root) OpenRoot(string) (*Root, error)
func (*Root) Remove(string) error
func (*Root) Stat(string) (fs.FileInfo, error)
</code></pre>
<p>In addition to the <code>Root</code> type, the new
<a href="/pkg/os#OpenInRoot"><code>os.OpenInRoot</code></a> function
provides a simple way to open a potentially-untrusted filename within a
specific directory:</p>
<pre><code>f, err := os.OpenInRoot(&quot;/some/root/directory&quot;, untrustedFilename)
</code></pre>
<p>The <code>Root</code> type provides a simple, safe, portable API for operating with untrusted filenames.</p>
<h2 id="caveats-and-considerations">Caveats and considerations</h2>
<h3 id="unix">Unix</h3>
<p>On Unix systems, <code>Root</code> is implemented using the <code>openat</code> family of system calls.
A <code>Root</code> contains a file descriptor referencing its root directory and will track that
directory across renames or deletion.</p>
<p><code>Root</code> defends against symlink traversal but does not limit traversal
of mount points. For example, <code>Root</code> does not prevent traversal of
Linux bind mounts. Our threat model is that <code>Root</code> defends against
filesystem constructs that may be created by ordinary users (such
as symlinks), but does not handle ones that require root privileges
to create (such as bind mounts).</p>
<h3 id="windows">Windows</h3>
<p>On Windows, <code>Root</code> opens a handle referencing its root directory.
The open handle prevents that directory from being renamed or deleted until the <code>Root</code> is closed.</p>
<p><code>Root</code> prevents access to reserved Windows device names such as <code>NUL</code> and <code>COM1</code>.</p>
<h3 id="wasi">WASI</h3>
<p>On WASI, the <code>os</code> package uses the WASI preview 1 filesystem API,
which are intended to provide traversal-resistant filesystem access.
Not all WASI implementations fully support filesystem sandboxing,
however, and <code>Root</code>&rsquo;s defense against traversal is limited to that provided
by the WASI implementation.</p>
<h3 id="goosjs">GOOS=js</h3>
<p>When GOOS=js, the <code>os</code> package uses the Node.js file system API.
This API does not include the openat family of functions,
and so <code>os.Root</code> is vulnerable to TOCTOU (time-of-check-time-of-use) races in symlink
validation on this platform.</p>
<p>When GOOS=js, a <code>Root</code> references a directory name rather than a file descriptor,
and does not track directories across renames.</p>
<h3 id="plan-9">Plan 9</h3>
<p>Plan 9 does not have symlinks.
On Plan 9, a <code>Root</code> references a directory name and performs lexical sanitization of
filenames.</p>
<h3 id="performance">Performance</h3>
<p><code>Root</code> operations on filenames containing many directory components can be much more expensive
than the equivalent non-<code>Root</code> operation. Resolving &ldquo;..&rdquo; components can also be expensive.
Programs that want to limit the cost of filesystem operations can use <code>filepath.Clean</code> to
remove &ldquo;..&rdquo; components from input filenames, and may want to limit the number of
directory components.</p>
<h2 id="who-should-use-osroot">Who should use os.Root?</h2>
<p>You should use <code>os.Root</code> or <code>os.OpenInRoot</code> if:</p>
<ul>
<li>you are opening a file in a directory; AND</li>
<li>the operation should not access a file outside that directory.</li>
</ul>
<p>For example, an archive extractor writing files to an output directory should use
<code>os.Root</code>, because the filenames are potentially untrusted and it would be incorrect
to write a file outside the output directory.</p>
<p>However, a command-line program that writes output to a user-specified location
should not use <code>os.Root</code>, because the filename is not untrusted and may
refer to anywhere on the filesystem.</p>
<p>As a good rule of thumb, code which calls <code>filepath.Join</code> to combine a fixed directory
and an externally-provided filename should probably use <code>os.Root</code> instead.</p>
<pre><code>// This might open a file not located in baseDirectory.
f, err := os.Open(filepath.Join(baseDirectory, filename))

// This will only open files under baseDirectory.
f, err := os.OpenInRoot(baseDirectory, filename)
</code></pre>
<h2 id="future-work">Future work</h2>
<p>The <code>os.Root</code> API is new in Go 1.24.
We expect to make additions and refinements to it in future releases.</p>
<p>The current implementation prioritizes correctness and safety over performance.
Future versions will take advantage of platform-specific APIs, such as
Linux&rsquo;s <code>openat2</code>, to improve performance where possible.</p>
<p>There are a number of filesystem operations which <code>Root</code> does not support yet, such as
creating symbolic links and renaming files. Where possible, we will add support for these
operations. A list of additional functions in progress is in
<a href="/issue/67002">go.dev/issue/67002</a>.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/coretypes">Goodbye core types - Hello Go as we know and love it!</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/cleanups-and-weak">From unique to cleanups and weak: new low-level tools for efficiency</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/cleanups-and-weak" target="_blank">From unique to cleanups and weak: new low-level tools for efficiency</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/cleanups-and-weak">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>From unique to cleanups and weak: new low-level tools for efficiency</h1>
      
      <p class="author">
      Michael Knyszek<br>
      6 March 2025
      </p>
      
      <p>In <a href="/blog/unique">last year&rsquo;s blog post</a> about the <code>unique</code> package, we alluded
to some new features then in proposal review, and we&rsquo;re excited to share that as
of Go 1.24 they are now available to all Go developers.
These new features are <a href="https://pkg.go.dev/runtime#AddCleanup" rel="noreferrer" target="_blank">the <code>runtime.AddCleanup</code>
function</a>, which queues up a function to
run when an object is no longer reachable, and <a href="https://pkg.go.dev/weak#Pointer" rel="noreferrer" target="_blank">the <code>weak.Pointer</code>
type</a>, which safely points to an object without
preventing it from being garbage collected.
Together, these two features are powerful enough to build your own <code>unique</code>
package!
Let&rsquo;s dig into what makes these features useful, and when to use them.</p>
<p>Note: these new features are advanced features of the garbage collector.
If you&rsquo;re not already familiar with basic garbage collection concepts, we
strongly recommend reading the introduction of our <a href="/doc/gc-guide#Introduction">garbage collector
guide</a>.</p>
<h2 id="cleanups">Cleanups</h2>
<p>If you&rsquo;ve ever used a finalizer, then the concept of a cleanup will be
familiar.
A finalizer is a function, associated with an allocated object by <a href="https://pkg.go.dev/runtime#SetFinalizer" rel="noreferrer" target="_blank">calling
<code>runtime.SetFinalizer</code></a>, that is later
called by the garbage collector some time after the object becomes unreachable.
At a high level, cleanups work the same way.</p>
<p>Let&rsquo;s consider an application that makes use of a memory-mapped file, and see
how cleanups can help.</p>
<pre><code>//go:build unix

type MemoryMappedFile struct {
    data []byte
}

func NewMemoryMappedFile(filename string) (*MemoryMappedFile, error) {
    f, err := os.Open(filename)
    if err != nil {
        return nil, err
    }
    defer f.Close()

    // Get the file's info; we need its size.
    fi, err := f.Stat()
    if err != nil {
        return nil, err
    }

    // Extract the file descriptor.
    conn, err := f.SyscallConn()
    if err != nil {
        return nil, err
    }
    var data []byte
    connErr := conn.Control(func(fd uintptr) {
        // Create a memory mapping backed by this file.
        data, err = syscall.Mmap(int(fd), 0, int(fi.Size()), syscall.PROT_READ, syscall.MAP_SHARED)
    })
    if connErr != nil {
        return nil, connErr
    }
    if err != nil {
        return nil, err
    }
    mf := &amp;MemoryMappedFile{data: data}
    cleanup := func(data []byte) {
        syscall.Munmap(data) // ignore error
    }
    runtime.AddCleanup(mf, cleanup, data)
    return mf, nil
}
</code></pre>
<p>A memory-mapped file has its contents mapped to memory, in this case, the
underlying data of a byte slice.
Thanks to operating-system magic, reads and writes to the byte slice directly
access the contents of the file.
With this code, we can pass around a <code>*MemoryMappedFile</code>, and when it&rsquo;s
no longer referenced, the memory mapping we created will get cleaned up.</p>
<p>Notice that <code>runtime.AddCleanup</code> takes three arguments: the address of a
variable to attach the cleanup to, the cleanup function itself, and an argument
to the cleanup function.
A key difference between this function and <code>runtime.SetFinalizer</code> is that the
cleanup function takes a different argument than the object we&rsquo;re attaching the
cleanup to.
This change fixes some problems with finalizers.</p>
<p>It&rsquo;s no secret that <a href="/doc/gc-guide#Common_finalizer_issues">finalizers
are difficult to use correctly</a>.
For example, objects to which finalizers are attached must not be involved
in any reference cycles (even a pointer to itself is too much!), otherwise the
object will never be reclaimed and the finalizer will never run, causing a
leak.
Finalizers also significantly delay reclamation of memory.
It takes at a minimum two full garbage collection cycles to reclaim the
memory for a finalized object: one to determine that it&rsquo;s unreachable, and
another to determine that it&rsquo;s still unreachable after the finalizer
executes.</p>
<p>The problem is that finalizers <a href="https://en.wikipedia.org/wiki/Object_resurrection" rel="noreferrer" target="_blank">resurrect the objects they&rsquo;re attached
to</a>.
The finalizer doesn&rsquo;t run until the object is unreachable, at which point it is
considered &ldquo;dead.&rdquo;
But since the finalizer is called with a pointer to the object, the garbage
collector must prevent the reclamation of that object&rsquo;s memory, and instead must
generate a new reference for the finalizer, making it reachable, or &ldquo;live,&rdquo; once
more.
That reference may even remain after the finalizer returns, for example if the
finalizer writes it to a global variable or sends it across a channel.
Object resurrection is problematic because it means the object, and everything
it points to, and everything those objects point to, and so on, is reachable,
even if it would otherwise have been collected as garbage.</p>
<p>We solve both of these problems by not passing the original object to the
cleanup function.
First, the values the object refers to don&rsquo;t need to be kept specially
reachable by the garbage collector, so the object can still be reclaimed even
if it&rsquo;s involved in a cycle.
Second, since the object is not needed for the cleanup, its memory can be
reclaimed immediately.</p>
<h2 id="weak-pointers">Weak pointers</h2>
<p>Returning to our memory-mapped file example, suppose we notice that our program
frequently maps the same files over and over, from different goroutines that are
unaware of each other.
This is fine from a memory perspective, since all these mappings will share
physical memory, but it results in lots of unnecessary system calls to map and
unmap the file.
This is especially bad if each goroutine reads only a small section of each
file.</p>
<p>So, let&rsquo;s deduplicate the mappings by filename.
(Let&rsquo;s assume that our program only reads from the mappings, and the files
themselves are never modified or renamed once created.
Such assumptions are reasonable for system font files, for example.)</p>
<p>We could maintain a map from filename to memory mapping, but then it becomes
unclear when it&rsquo;s safe to remove entries from that map.
We could <em>almost</em> use a cleanup, if it weren&rsquo;t for the fact that the map entry
itself will keep the memory-mapped file object alive.</p>
<p>Weak pointers solve this problem.
A weak pointer is a special kind of pointer that the garbage collector ignores
when deciding whether an object is reachable.
Go 1.24&rsquo;s <a href="https://pkg.go.dev/weak#Pointer" rel="noreferrer" target="_blank">new weak pointer type,
<code>weak.Pointer</code></a>, has a <code>Value</code> method that
returns either a real pointer if the object is still reachable, or <code>nil</code> if it
is not.</p>
<p>If we instead maintain a map that only <em>weakly</em> points to the memory-mapped
file, we can clean up the map entry when nobody&rsquo;s using it anymore!
Let&rsquo;s see what this looks like.</p>
<pre><code>var cache sync.Map // map[string]weak.Pointer[MemoryMappedFile]

func NewCachedMemoryMappedFile(filename string) (*MemoryMappedFile, error) {
    var newFile *MemoryMappedFile
    for {
        // Try to load an existing value out of the cache.
        value, ok := cache.Load(filename)
        if !ok {
            // No value found. Create a new mapped file if needed.
            if newFile == nil {
                var err error
                newFile, err = NewMemoryMappedFile(filename)
                if err != nil {
                    return nil, err
                }
            }

            // Try to install the new mapped file.
            wp := weak.Make(newFile)
            var loaded bool
            value, loaded = cache.LoadOrStore(filename, wp)
            if !loaded {
                runtime.AddCleanup(newFile, func(filename string) {
                    // Only delete if the weak pointer is equal. If it's not, someone
                    // else already deleted the entry and installed a new mapped file.
                    cache.CompareAndDelete(filename, wp)
                }, filename)
                return newFile, nil
            }
            // Someone got to installing the file before us.
            //
            // If it's still there when we check in a moment, we'll discard newFile
            // and it'll get cleaned up by garbage collector.
        }

        // See if our cache entry is valid.
        if mf := value.(weak.Pointer[MemoryMappedFile]).Value(); mf != nil {
            return mf, nil
        }

        // Discovered a nil entry awaiting cleanup. Eagerly delete it.
        cache.CompareAndDelete(filename, value)
    }
}
</code></pre>
<p>This example is a little complicated, but the gist is simple.
We start with a global concurrent map of all the mapped files we made.
<code>NewCachedMemoryMappedFile</code> consults this map for an existing mapped
file, and if that fails, creates and tries to insert a new mapped file.
This could of course fail as well since we&rsquo;re racing with other insertions, so
we need to be careful about that too, and retry.
(This design has a flaw in that we might wastefully map the same file multiple
times in a race, and we&rsquo;ll have to throw it away via the cleanup added by
<code>NewMemoryMappedFile</code>.
This is probably not a big deal most of the time.
Fixing it is left as an exercise for the reader.)</p>
<p>Let&rsquo;s look at some useful properties of weak pointers and cleanups exploited by
this code.</p>
<p>Firstly, notice that weak pointers are comparable.
Not only that, weak pointers have a stable and independent identity, which
remains even after the objects they point to are long gone.
This is why it is safe for the cleanup function to call <code>sync.Map</code>&rsquo;s
<code>CompareAndDelete</code>, which compares the <code>weak.Pointer</code>, and a crucial reason
this code works at all.</p>
<p>Secondly, observe that we can add multiple independent cleanups to a single
<code>MemoryMappedFile</code> object.
This allows us to use cleanups in a composable way and use them to build
generic data structures.
In this particular example, it might be more efficient to combine
<code>NewCachedMemoryMappedFile</code> with <code>NewMemoryMappedFile</code> and
have them share a cleanup.
However, the advantage of the code we wrote above is that it can be rewritten
in a generic way!</p>
<pre><code>type Cache[K comparable, V any] struct {
    create func(K) (*V, error)
    m     sync.Map
}

func NewCache[K comparable, V any](create func(K) (*V, error)) *Cache[K, V] {
    return &amp;Cache[K, V]{create: create}
}

func (c *Cache[K, V]) Get(key K) (*V, error) {
    var newValue *V
    for {
        // Try to load an existing value out of the cache.
        value, ok := cache.Load(key)
        if !ok {
            // No value found. Create a new mapped file if needed.
            if newValue == nil {
                var err error
                newValue, err = c.create(key)
                if err != nil {
                    return nil, err
                }
            }

            // Try to install the new mapped file.
            wp := weak.Make(newValue)
            var loaded bool
            value, loaded = cache.LoadOrStore(key, wp)
            if !loaded {
                runtime.AddCleanup(newValue, func(key K) {
                    // Only delete if the weak pointer is equal. If it's not, someone
                    // else already deleted the entry and installed a new mapped file.
                    cache.CompareAndDelete(key, wp)
                }, key)
                return newValue, nil
            }
        }

        // See if our cache entry is valid.
        if mf := value.(weak.Pointer[V]).Value(); mf != nil {
            return mf, nil
        }

        // Discovered a nil entry awaiting cleanup. Eagerly delete it.
        cache.CompareAndDelete(key, value)
    }
}
</code></pre>
<h2 id="caveats-and-future-work">Caveats and future work</h2>
<p>Despite our best efforts, cleanups and weak pointers can still be error-prone.
To guide those considering using finalizers, cleanups, and weak pointers, we
recently updated the <a href="/doc/gc-guide#Finalizers_cleanups_and_weak_pointers">guide to the garbage
collector</a> with some advice
about using these features.
Take a look next time you reach for them, but also carefully consider whether
you need to use them at all.
These are advanced tools with subtle semantics and, as the guide says, most
Go code benefits from these features indirectly, not from using them directly.
Stick to the use-cases where these features shine, and you&rsquo;ll be alright.</p>
<p>For now, we&rsquo;ll call out some of the issues that you are more likely to run into.</p>
<p>First, the object the cleanup is attached to must be reachable from neither
the cleanup function (as a captured variable) nor the argument to the cleanup
function.
Both of these situations result in the cleanup never executing.
(In the special case of the cleanup argument being exactly the pointer passed
to <code>runtime.AddCleanup</code>, <code>runtime.AddCleanup</code> will panic, as a signal to the
caller that they should not use cleanups the same way as finalizers.)</p>
<p>Second, when weak pointers are used as map keys, the weakly referenced object
must not be reachable from the corresponding map value, otherwise the object
will continue to remain live.
This may seem obvious when deep inside of a blog post about weak pointers, but
it&rsquo;s an easy subtlety to miss.
This problem inspired the entire concept of an
<a href="https://en.wikipedia.org/wiki/Ephemeron" rel="noreferrer" target="_blank">ephemeron</a> to resolve it, which is a
potential future direction.</p>
<p>Thirdly, a common pattern with cleanups is that a wrapper object is needed, like
we see here with our <code>MemoryMappedFile</code> example.
In this particular case, you could imagine the garbage collector directly
tracking the mapped memory region and passing around the inner <code>[]byte</code>.
Such functionality is possible future work, and an API for it has been recently
<a href="/issue/70224">proposed</a>.</p>
<p>Lastly, both weak pointers and cleanups are inherently non-deterministic, their
behavior depending intimately on the design and dynamics of the garbage
collector.
The documentation for cleanups even permits the garbage collector never to run
cleanups at all.
Effectively testing code that uses them can be tricky, but <a href="/doc/gc-guide#Testing_object_death">it is
possible</a>.</p>
<h2 id="why-now">Why now?</h2>
<p>Weak pointers have been brought up as a feature for Go since nearly the
beginning, but for years were not prioritized by the Go team.
One reason for that is that they are subtle, and the design space of weak
pointers is a minefield of decisions that can make them even harder to use.
Another is that weak pointers are a niche tool, while simultaneously adding
complexity to the language.
We already had experience with how painful <code>SetFinalizer</code> could be to use.
But there are some useful programs that are not expressible without them, and
the <code>unique</code> package and the reasons for its existence really emphasized that.</p>
<p>With generics, the hindsight of finalizers, and insights from all the great work
since done by teams in other languages like C# and Java, the designs for weak
pointers and cleanups came together quickly.
The desire to use weak pointers with finalizers raised additional questions,
and so the design for <code>runtime.AddCleanup</code> quickly came together as well.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>I want to thank everyone in the community who contributed feedback on the
proposal issues and filed bugs when the features became available.
I also want to thank David Chase for thoroughly thinking through weak
pointer semantics with me, and I want to thank him, Russ Cox, and Austin
Clements for their help with the design of <code>runtime.AddCleanup</code>.
I want to thank Carlos Amedee for his work on getting <code>runtime.AddCleanup</code>
implemented, polished, landed for Go 1.24.
And finally I want to thank Carlos Amedee and Ian Lance Taylor for their work
replacing <code>runtime.SetFinalizer</code> with <code>runtime.AddCleanup</code> throughout the
standard library for Go 1.25.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/osroot">Traversal-resistant file APIs</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/swisstable">Faster Go maps with Swiss Tables</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/swisstable" target="_blank">Faster Go maps with Swiss Tables</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/swisstable">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Faster Go maps with Swiss Tables</h1>
      
      <p class="author">
      Michael Pratt<br>
      26 February 2025
      </p>
      
      <p>The hash table is a central data structure in computer science, and it provides the implementation for the map type in many languages, including Go.</p>
<p>The concept of a hash table was <a href="https://spectrum.ieee.org/hans-peter-luhn-and-the-birth-of-the-hashing-algorithm" rel="noreferrer" target="_blank">first described</a> by Hans Peter Luhn in 1953 in an internal IBM memo that suggested speeding up search by placing items into &ldquo;buckets&rdquo; and using a linked list for overflow when buckets already contain an item.
Today we would call this a <a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining" rel="noreferrer" target="_blank">hash table using chaining</a>.</p>
<p>In 1954, Gene M. Amdahl, Elaine M. McGraw, and Arthur L. Samuel first used an &ldquo;open addressing&rdquo; scheme when programming the IBM 701.
When a bucket already contains an item, the new item is placed in the next empty bucket.
This idea was formalized and published in 1957 by W. Wesley Peterson in <a href="https://ieeexplore.ieee.org/document/5392733" rel="noreferrer" target="_blank">&ldquo;Addressing for Random-Access Storage&rdquo;</a>.
Today we would call this a <a href="https://en.wikipedia.org/wiki/Hash_table#Open_addressing" rel="noreferrer" target="_blank">hash table using open addressing with linear probing</a>.</p>
<p>With data structures that have been around this long, it&rsquo;s easy to think that they must be &ldquo;done&rdquo;; that we know everything there is to know about them and they can&rsquo;t be improved anymore.
That&rsquo;s not true!
Computer science research continues to make advancements in fundamental algorithms, both in terms of algorithmic complexity and taking advantage of modern CPU hardware.
For example, Go 1.19 <a href="/doc/go1.19#sortpkgsort">switched the <code>sort</code> package</a> from a traditional quicksort, to <a href="https://arxiv.org/pdf/2106.05123.pdf" rel="noreferrer" target="_blank">pattern-defeating quicksort</a>, a novel sorting algorithm from Orson R. L. Peters, first described in 2015.</p>
<p>Like sorting algorithms, hash table data structures continue to see improvements.
In 2017, Sam Benzaquen, Alkis Evlogimenos, Matt Kulukundis, and Roman Perepelitsa at Google presented <a href="https://www.youtube.com/watch?v=ncHmEUmJZf4" rel="noreferrer" target="_blank">a new C++ hash table design</a>, dubbed &ldquo;Swiss Tables&rdquo;.
In 2018, their implementation was <a href="https://abseil.io/blog/20180927-swisstables" rel="noreferrer" target="_blank">open sourced in the Abseil C++ library</a>.</p>
<p>Go 1.24 includes a completely new implementation of the built-in map type, based on the Swiss Table design.
In this blog post we&rsquo;ll look at how Swiss Tables improve upon traditional hash tables, and at some of the unique challenges in bringing the Swiss Table design to Go&rsquo;s maps.</p>
<h2 id="open-addressed-hash-table">Open-addressed hash table</h2>
<p>Swiss Tables are a form of open-addressed hash table, so let&rsquo;s do a quick overview of how a basic open-addressed hash table works.</p>
<p>In an open-addressed hash table, all items are stored in a single backing array.
We&rsquo;ll call each location in the array a <em>slot</em>.
The slot to which a key belongs is primarily determined by the <em>hash function</em>, <code>hash(key)</code>.
The hash function maps each key to an integer, where the same key always maps to the same integer, and different keys ideally follow a uniform random distribution of integers.
The defining feature of open-addressed hash tables is that they resolve collisions by storing the key elsewhere in the backing array.
So, if the slot is already full (a <em>collision</em>), then a <em>probe sequence</em> is used to consider other slots until an empty slot is found.
Let&rsquo;s take a look at a sample hash table to see how this works.</p>
<h3 id="example">Example</h3>
<p>Below you can see a 16-slot backing array for a hash table, and the key (if any) stored in each slot.
The values are not shown, as they are not relevant to this example.</p>
<style>
 
@media screen and (max-width: 55em) {
    .swisstable-table-container {
         
        overflow: scroll;
    }
}

.swisstable-table {
     
    border-collapse: collapse;
     
    table-layout: fixed;
     
    margin: 0 auto;
}

.swisstable-table-cell {
     
    border: 1px solid;
     
    padding: 0.5em 1em 0.5em 1em;
     
    text-align: center;
}
</style>
<div class="swisstable-table-container">
    <table class="swisstable-table">
        <thead>
            <tr>
                <th class="swisstable-table-cell">Slot</th>
                <th class="swisstable-table-cell">0</th>
                <th class="swisstable-table-cell">1</th>
                <th class="swisstable-table-cell">2</th>
                <th class="swisstable-table-cell">3</th>
                <th class="swisstable-table-cell">4</th>
                <th class="swisstable-table-cell">5</th>
                <th class="swisstable-table-cell">6</th>
                <th class="swisstable-table-cell">7</th>
                <th class="swisstable-table-cell">8</th>
                <th class="swisstable-table-cell">9</th>
                <th class="swisstable-table-cell">10</th>
                <th class="swisstable-table-cell">11</th>
                <th class="swisstable-table-cell">12</th>
                <th class="swisstable-table-cell">13</th>
                <th class="swisstable-table-cell">14</th>
                <th class="swisstable-table-cell">15</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="swisstable-table-cell">Key</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell">56</td>
                <td class="swisstable-table-cell">32</td>
                <td class="swisstable-table-cell">21</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell">78</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
            </tr>
        </tbody>
    </table>
</div>
<p>To insert a new key, we use the hash function to select a slot.
Since there are only 16 slots, we need to restrict to this range, so we&rsquo;ll use <code>hash(key) % 16</code> as the target slot.
Suppose we want to insert key <code>98</code> and <code>hash(98) % 16 = 7</code>.
Slot 7 is empty, so we simply insert 98 there.
On the other hand, suppose we want to insert key <code>25</code> and <code>hash(25) % 16 = 3</code>.
Slot 3 is a collision because it already contains key 56.
Thus we cannot insert here.</p>
<p>We use a probe sequence to find another slot.
There are a variety of well-known probe sequences.
The original and most straightforward probe sequence is <em>linear probing</em>, which simply tries successive slots in order.</p>
<p>So, in the <code>hash(25) % 16 = 3</code> example, since slot 3 is in use, we would consider slot 4 next, which is also in use.
So too is slot 5.
Finally, we&rsquo;d get to empty slot 6, where we&rsquo;d store key 25.</p>
<p>Lookup follows the same approach.
A lookup of key 25 would start at slot 3, check whether it contains key 25 (it does not), and then continue linear probing until it finds key 25 in slot 6.</p>
<p>This example uses a backing array with 16 slots.
What happens if we insert more than 16 elements?
If the hash table runs out of space, it will grow, usually by doubling the size of the backing array.
All existing entries are reinserted into the new backing array.</p>
<p>Open-addressed hash tables don&rsquo;t actually wait until the backing array is completely full to grow because as the array gets more full, the average length of each probe sequence increases.
In the example above using key 25, we must probe 4 different slots to find an empty slot.
If the array had only one empty slot, the worst case probe length would be O(n).
That is, you may need to scan the entire array.
The proportion of used slots is called the <em>load factor</em>, and most hash tables define a <em>maximum load factor</em> (typically 70-90%) at which point they will grow to avoid the extremely long probe sequences of very full hash tables.</p>
<h2 id="swiss-table">Swiss Table</h2>
<p>The Swiss Table <a href="https://abseil.io/about/design/swisstables" rel="noreferrer" target="_blank">design</a> is also a form of open-addressed hash table.
Let&rsquo;s see how it improves over a traditional open-addressed hash table.
We still have a single backing array for storage, but we will break the array into logical <em>groups</em> of 8 slots each.
(Larger group sizes are possible as well. More on that below.)</p>
<p>In addition, each group has a 64-bit <em>control word</em> for metadata.
Each of the 8 bytes in the control word corresponds to one of the slots in the group.
The value of each byte denotes whether that slot is empty, deleted, or in use.
If it is in use, the byte contains the lower 7 bits of the hash for that slot&rsquo;s key (called <code>h2</code>).</p>
<div class="swisstable-table-container">
    <table class="swisstable-table">
        <thead>
            <tr>
                <th class="swisstable-table-cell"></th>
                <th class="swisstable-table-cell" colspan="8">Group 0</th>
                <th class="swisstable-table-cell" colspan="8">Group 1</th>
            </tr>
            <tr>
                <th class="swisstable-table-cell">Slot</th>
                <th class="swisstable-table-cell">0</th>
                <th class="swisstable-table-cell">1</th>
                <th class="swisstable-table-cell">2</th>
                <th class="swisstable-table-cell">3</th>
                <th class="swisstable-table-cell">4</th>
                <th class="swisstable-table-cell">5</th>
                <th class="swisstable-table-cell">6</th>
                <th class="swisstable-table-cell">7</th>
                <th class="swisstable-table-cell">0</th>
                <th class="swisstable-table-cell">1</th>
                <th class="swisstable-table-cell">2</th>
                <th class="swisstable-table-cell">3</th>
                <th class="swisstable-table-cell">4</th>
                <th class="swisstable-table-cell">5</th>
                <th class="swisstable-table-cell">6</th>
                <th class="swisstable-table-cell">7</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="swisstable-table-cell">Key</td>
                <td class="swisstable-table-cell">56</td>
                <td class="swisstable-table-cell">32</td>
                <td class="swisstable-table-cell">21</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell">78</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
            </tr>
        </tbody>
    </table>
    <br/> 
    <table class="swisstable-table">
        <thead>
            <tr>
                <th class="swisstable-table-cell"></th>
                <th class="swisstable-table-cell" colspan="8">64-bit control word 0</th>
                <th class="swisstable-table-cell" colspan="8">64-bit control word 1</th>
            </tr>
            <tr>
                <th class="swisstable-table-cell">Slot</th>
                <th class="swisstable-table-cell">0</th>
                <th class="swisstable-table-cell">1</th>
                <th class="swisstable-table-cell">2</th>
                <th class="swisstable-table-cell">3</th>
                <th class="swisstable-table-cell">4</th>
                <th class="swisstable-table-cell">5</th>
                <th class="swisstable-table-cell">6</th>
                <th class="swisstable-table-cell">7</th>
                <th class="swisstable-table-cell">0</th>
                <th class="swisstable-table-cell">1</th>
                <th class="swisstable-table-cell">2</th>
                <th class="swisstable-table-cell">3</th>
                <th class="swisstable-table-cell">4</th>
                <th class="swisstable-table-cell">5</th>
                <th class="swisstable-table-cell">6</th>
                <th class="swisstable-table-cell">7</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="swisstable-table-cell">h2</td>
                <td class="swisstable-table-cell">23</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">50</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell">47</td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
                <td class="swisstable-table-cell"></td>
            </tr>
        </tbody>
    </table>
</div>
<p>Insertion works as follows:</p>
<ol>
<li>Compute <code>hash(key)</code> and break the hash into two parts: the upper 57-bits (called <code>h1</code>) and the lower 7 bits (called <code>h2</code>).</li>
<li>The upper bits (<code>h1</code>) are used to select the first group to consider: <code>h1 % 2</code> in this case, as there are only 2 groups.</li>
<li>Within a group, all slots are equally eligible to hold the key. We must first determine whether any slot already contains this key, in which case this is an update rather than a new insertion.</li>
<li>If no slot contains the key, then we look for an empty slot to place this key.</li>
<li>If no slot is empty, then we continue the probe sequence by searching the next group.</li>
</ol>
<p>Lookup follows the same basic process.
If we find an empty slot in step 4, then we know an insertion would have used this slot and can stop the search.</p>
<p>Step 3 is where the Swiss Table magic happens.
We need to check whether any slot in a group contains the desired key.
Naively, we could just do a linear scan and compare all 8 keys.
However, the control word lets us do this more efficiently.
Each byte contains the lower 7 bits of the hash (<code>h2</code>) for that slot.
If we determine which bytes of the control word contain the <code>h2</code> we are looking for, we&rsquo;ll have a set of candidate matches.</p>
<p>In other words, we want to do a byte-by-byte equality comparison within the control word.
For example, if we are looking for key 32, where <code>h2 = 89</code>, the operation we want looks like so.</p>
<div class="swisstable-table-container">
    <table class="swisstable-table">
        <tbody>
            <tr>
                <td class="swisstable-table-cell"><strong>Test word</strong></td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">89</td>
            </tr>
            <tr>
                <td class="swisstable-table-cell"><strong>Comparison</strong></td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
                <td class="swisstable-table-cell">==</td>
            </tr>
            <tr>
                <td class="swisstable-table-cell"><strong>Control word</strong></td>
                <td class="swisstable-table-cell">23</td>
                <td class="swisstable-table-cell">89</td>
                <td class="swisstable-table-cell">50</td>
                <td class="swisstable-table-cell">-</td>
                <td class="swisstable-table-cell">-</td>
                <td class="swisstable-table-cell">-</td>
                <td class="swisstable-table-cell">-</td>
                <td class="swisstable-table-cell">-</td>
            </tr>
            <tr>
                <td class="swisstable-table-cell"><strong>Result</strong></td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">1</td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">0</td>
                <td class="swisstable-table-cell">0</td>
            </tr>
        </tbody>
    </table>
</div>
<p>This is an operation supported by <a href="https://en.wikipedia.org/wiki/Single_instruction,_multiple_data" rel="noreferrer" target="_blank">SIMD</a> hardware, where a single instruction performs parallel operations on independent values within a larger value (<em>vector</em>). In this case, we <a href="https://cs.opensource.google/go/go/+/master:src/internal/runtime/maps/group.go;drc=a08984bc8f2acacebeeadf7445ecfb67b7e7d7b1;l=155?ss=go" rel="noreferrer" target="_blank">can implement this operation</a> using a set of standard arithmetic and bitwise operations when special SIMD hardware is not available.</p>
<p>The result is a set of candidate slots.
Slots where <code>h2</code> does not match do not have a matching key, so they can be skipped.
Slots where <code>h2</code> does match are potential matches, but we must still check the entire key, as there is potential for collisions (1/128 probability of collision with a 7-bit hash, so still quite low).</p>
<p>This operation is very powerful, as we have effectively performed 8 steps of a probe sequence at once, in parallel.
This speeds up lookup and insertion by reducing the average number of comparisons we need to perform.
This improvement to probing behavior allowed both the Abseil and Go implementations to increase the maximum load factor of Swiss Table maps compared to prior maps, which lowers the average memory footprint.</p>
<h2 id="go-challenges">Go challenges</h2>
<p>Go&rsquo;s built-in map type has some unusual properties that pose additional challenges to adopting a new map design.
Two were particularly tricky to deal with.</p>
<h3 id="incremental-growth">Incremental growth</h3>
<p>When a hash table reaches its maximum load factor, it needs to grow the backing array.
Typically this means the next insertion doubles the size of the array, and copies all entries to the new array.
Imagine inserting into a map with 1GB of entries.
Most insertions are very fast, but the one insertion that needs to grow the map from 1GB to 2GB will need to copy 1GB of entries, which will take a long time.</p>
<p>Go is frequently used for latency-sensitive servers, so we don&rsquo;t want operations on built-in types that can have arbitrarily large impact on tail latency.
Instead, Go maps grow incrementally, so that each insertion has an upper bound on the amount of growth work it must do.
This bounds the latency impact of a single map insertion.</p>
<p>Unfortunately, the Abseil (C++) Swiss Table design assumes all at once growth, and the probe sequence depends on the total group count, making it difficult to break up.</p>
<p>Go&rsquo;s built-in map addresses this with another layer of indirection by splitting each map into multiple Swiss Tables.
Rather than a single Swiss Table implementing the entire map, each map consists of one or more independent tables that cover a subset of the key space.
An individual table stores a maximum of 1024 entries.
A variable number of upper bits in the hash are used to select which table a key belongs to.
This is a form of <a href="https://en.wikipedia.org/wiki/Extendible_hashing" rel="noreferrer" target="_blank"><em>extendible hashing</em></a>, where the number of bits used increases as needed to differentiate the total number of tables.</p>
<p>During insertion, if an individual table needs to grow, it will do so all at once, but other tables are unaffected.
Thus the upper bound for a single insertion is the latency of growing a 1024-entry table into two 1024-entry tables, copying 1024 entries.</p>
<h3 id="modification-during-iteration">Modification during iteration</h3>
<p>Many hash table designs, including Abseil&rsquo;s Swiss Tables, forbid modifying the map during iteration.
The Go language spec <a href="/ref/spec#For_statements:~:text=The%20iteration%20order,iterations%20is%200.">explicitly allows</a> modifications during iteration, with the following semantics:</p>
<ul>
<li>If an entry is deleted before it is reached, it will not be produced.</li>
<li>If an entry is updated before it is reached, the updated value will be produced.</li>
<li>If a new entry is added, it may or may not be produced.</li>
</ul>
<p>A typical approach to hash table iteration is to simply walk through the backing array and produce values in the order they are laid out in memory.
This approach runs afoul of the above semantics, most notably because insertions may grow the map, which would shuffle the memory layout.</p>
<p>We can avoid the impact of shuffle during growth by having the iterator keep a reference to the table it is currently iterating over.
If that table grows during iteration, we keep using the old version of the table and thus continue to deliver keys in the order of the old memory layout.</p>
<p>Does this work with the above semantics?
New entries added after growth will be missed entirely, as they are only added to the grown table, not the old table.
That&rsquo;s fine, as the semantics allow new entries not to be produced.
Updates and deletions are a problem, though: using the old table could produce stale or deleted entries.</p>
<p>This edge case is addressed by using the old table only to determine the iteration order.
Before actually returning the entry, we consult the grown table to determine whether the entry still exists, and to retrieve the latest value.</p>
<p>This covers all the core semantics, though there are even more small edge cases not covered here.
Ultimately, the permissiveness of Go maps with iteration results in iteration being the most complex part of Go&rsquo;s map implementation.</p>
<h2 id="future-work">Future work</h2>
<p>In <a href="/issue/54766#issuecomment-2542444404">microbenchmarks</a>, map operations are up to 60% faster than in Go 1.23.
Exact performance improvement varies quite a bit due to the wide variety of operations and uses of maps, and some edge cases do regress compared to Go 1.23.
Overall, in full application benchmarks, we found a geometric mean CPU time improvement of around 1.5%.</p>
<p>There are more map improvements we want to investigate for future Go releases.
For example, we may be able to <a href="/issue/70835">increase the locality of</a> operations on maps that are not in the CPU cache.</p>
<p>We could also further improve the control word comparisons.
As described above, we have a portable implementation using standard arithmetic and bitwise operations.
However, some architectures have SIMD instructions that perform this sort of comparison directly.
Go 1.24 already uses 8-byte SIMD instructions for amd64, but we could extend support to other architectures.
More importantly, while standard instructions operate on up to 8-byte words, SIMD instructions nearly always support at least 16-byte words.
This means we could increase the group size to 16 slots, and perform 16 hash comparisons in parallel instead of 8.
This would further decrease the average number of probes required for lookups.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>A Swiss Table-based Go map implementation has been a long time coming, and involved many contributors.
I want to thank YunHao Zhang (<a href="https://github.com/zhangyunhao116" rel="noreferrer" target="_blank">@zhangyunhao116</a>), PJ Malloy (<a href="https://github.com/thepudds" rel="noreferrer" target="_blank">@thepudds</a>), and <a href="https://github.com/andy-wm-arthur" rel="noreferrer" target="_blank">@andy-wm-arthur</a> for building initial versions of a Go Swiss Table implementation.
Peter Mattis (<a href="https://github.com/petermattis" rel="noreferrer" target="_blank">@petermattis</a>) combined these ideas with solutions to the Go challenges above to build <a href="https://pkg.go.dev/github.com/cockroachdb/swiss" rel="noreferrer" target="_blank"><code>github.com/cockroachdb/swiss</code></a>, a Go-spec compliant Swiss Table implementation.
The Go 1.24 built-in map implementation is heavily based on Peter&rsquo;s work.
Thank you to everyone in the community that contributed!</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/cleanups-and-weak">From unique to cleanups and weak: new low-level tools for efficiency</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/synctest">Testing concurrent code with testing/synctest</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/synctest" target="_blank">Testing concurrent code with testing/synctest</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/synctest">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Testing concurrent code with testing/synctest</h1>
      
      <p class="author">
      Damien Neil<br>
      19 February 2025
      </p>
      
      <p>One of Go&rsquo;s signature features is built-in support for concurrency.
Goroutines and channels are simple and effective primitives for
writing concurrent programs.</p>
<p>However, testing concurrent programs can be difficult and error prone.</p>
<p>In Go 1.24, we are introducing a new, experimental
<a href="/pkg/testing/synctest"><code>testing/synctest</code></a> package
to support testing concurrent code. This post will explain the motivation behind
this experiment, demonstrate how to use the synctest package, and discuss its potential future.</p>
<p>In Go 1.24, the <code>testing/synctest</code> package is experimental and
not subject to the Go compatibility promise.
It is not visible by default.
To use it, compile your code with <code>GOEXPERIMENT=synctest</code> set in your environment.</p>
<h2 id="testing-concurrent-programs-is-difficult">Testing concurrent programs is difficult</h2>
<p>To begin with, let us consider a simple example.</p>
<p>The <a href="/pkg/context#AfterFunc"><code>context.AfterFunc</code></a> function
arranges for a function to be called in its own goroutine after a context is canceled.
Here is a possible test for <code>AfterFunc</code>:</p>
<pre><code>func TestAfterFunc(t *testing.T) {
    ctx, cancel := context.WithCancel(context.Background())

    calledCh := make(chan struct{}) // closed when AfterFunc is called
    context.AfterFunc(ctx, func() {
        close(calledCh)
    })

    // TODO: Assert that the AfterFunc has not been called.

    cancel()

    // TODO: Assert that the AfterFunc has been called.
}
</code></pre>
<p>We want to check two conditions in this test:
The function is not called before the context is canceled,
and the function <em>is</em> called after the context is canceled.</p>
<p>Checking a negative in a concurrent system is difficult.
We can easily test that the function has not been called <em>yet</em>,
but how do we check that it <em>will not</em> be called?</p>
<p>A common approach is to wait for some amount of time before
concluding that an event will not happen.
Let&rsquo;s try introducing a helper function to our test which does this.</p>
<pre><code>// funcCalled reports whether the function was called.
funcCalled := func() bool {
    select {
    case &lt;-calledCh:
        return true
    case &lt;-time.After(10 * time.Millisecond):
        return false
    }
}

if funcCalled() {
    t.Fatalf(&quot;AfterFunc function called before context is canceled&quot;)
}

cancel()

if !funcCalled() {
    t.Fatalf(&quot;AfterFunc function not called after context is canceled&quot;)
}
</code></pre>
<p>This test is slow:
10 milliseconds isn&rsquo;t a lot of time, but it adds up over many tests.</p>
<p>This test is also flaky:
10 milliseconds is a long time on a fast computer,
but it isn&rsquo;t unusual to see pauses lasting several seconds
on shared and overloaded
<a href="https://en.wikipedia.org/wiki/Continuous_integration" rel="noreferrer" target="_blank">CI</a>
systems.</p>
<p>We can make the test less flaky at the expense of making it slower,
and we can make it less slow at the expense of making it flakier,
but we can&rsquo;t make it both fast and reliable.</p>
<h2 id="introducing-the-testingsynctest-package">Introducing the testing/synctest package</h2>
<p>The <code>testing/synctest</code> package solves this problem.
It allows us to rewrite this test to be simple, fast, and reliable,
without any changes to the code being tested.</p>
<p>The package contains only two functions: <code>Run</code> and <code>Wait</code>.</p>
<p><code>Run</code> calls a function in a new goroutine.
This goroutine and any goroutines started by it
exist in an isolated environment which we call a <em>bubble</em>.
<code>Wait</code> waits for every goroutine in the current goroutine&rsquo;s bubble
to block on another goroutine in the bubble.</p>
<p>Let&rsquo;s rewrite our test above using the <code>testing/synctest</code> package.</p>
<pre><code>func TestAfterFunc(t *testing.T) {
    synctest.Run(func() {
        ctx, cancel := context.WithCancel(context.Background())

        funcCalled := false
        context.AfterFunc(ctx, func() {
            funcCalled = true
        })

        synctest.Wait()
        if funcCalled {
            t.Fatalf(&quot;AfterFunc function called before context is canceled&quot;)
        }

        cancel()

        synctest.Wait()
        if !funcCalled {
            t.Fatalf(&quot;AfterFunc function not called after context is canceled&quot;)
        }
    })
}
</code></pre>
<p>This is almost identical to our original test,
but we have wrapped the test in a <code>synctest.Run</code> call
and we call <code>synctest.Wait</code> before asserting that the function has been called or not.</p>
<p>The <code>Wait</code> function waits for every goroutine in the caller&rsquo;s bubble to block.
When it returns, we know that the context package has either called the function,
or will not call it until we take some further action.</p>
<p>This test is now both fast and reliable.</p>
<p>The test is simpler, too:
we have replaced the <code>calledCh</code> channel with a boolean.
Previously we needed to use a channel to avoid a data race between
the test goroutine and the <code>AfterFunc</code> goroutine,
but the <code>Wait</code> function now provides that synchronization.</p>
<p>The race detector understands <code>Wait</code> calls,
and this test passes when run with <code>-race</code>.
If we remove the second <code>Wait</code> call,
the race detector will correctly report a data race in the test.</p>
<h2 id="testing-time">Testing time</h2>
<p>Concurrent code often deals with time.</p>
<p>Testing code that works with time can be difficult.
Using real time in tests causes slow and flaky tests,
as we have seen above.
Using fake time requires avoiding <code>time</code> package functions,
and designing the code under test to work with
an optional fake clock.</p>
<p>The <code>testing/synctest</code> package makes it simpler to test code that uses time.</p>
<p>Goroutines in the bubble started by <code>Run</code> use a fake clock.
Within the bubble, functions in the <code>time</code> package operate on the
fake clock. Time advances in the bubble when all goroutines are
blocked.</p>
<p>To demonstrate, let&rsquo;s write a test for the
<a href="/pkg/context#WithTimeout"><code>context.WithTimeout</code></a> function.
<code>WithTimeout</code> creates a child of a context,
which expires after a given timeout.</p>
<pre><code>func TestWithTimeout(t *testing.T) {
    synctest.Run(func() {
        const timeout = 5 * time.Second
        ctx, cancel := context.WithTimeout(context.Background(), timeout)
        defer cancel()

        // Wait just less than the timeout.
        time.Sleep(timeout - time.Nanosecond)
        synctest.Wait()
        if err := ctx.Err(); err != nil {
            t.Fatalf(&quot;before timeout, ctx.Err() = %v; want nil&quot;, err)
        }

        // Wait the rest of the way until the timeout.
        time.Sleep(time.Nanosecond)
        synctest.Wait()
        if err := ctx.Err(); err != context.DeadlineExceeded {
            t.Fatalf(&quot;after timeout, ctx.Err() = %v; want DeadlineExceeded&quot;, err)
        }
    })
}
</code></pre>
<p>We write this test just as if we were working with real time.
The only difference is that we wrap the test function in <code>synctest.Run</code>,
and call <code>synctest.Wait</code> after each <code>time.Sleep</code> call to wait for the context
package&rsquo;s timers to finish running.</p>
<h2 id="blocking-and-the-bubble">Blocking and the bubble</h2>
<p>A key concept in <code>testing/synctest</code> is the bubble becoming <em>durably blocked</em>.
This happens when every goroutine in the bubble is blocked,
and can only be unblocked by another goroutine in the bubble.</p>
<p>When a bubble is durably blocked:</p>
<ul>
<li>If there is an outstanding <code>Wait</code> call, it returns.</li>
<li>Otherwise, time advances to the next time that could unblock a goroutine, if any.</li>
<li>Otherwise, the bubble is deadlocked and <code>Run</code> panics.</li>
</ul>
<p>A bubble is not durably blocked if any goroutine is blocked
but might be woken by some event from outside the bubble.</p>
<p>The complete list of operations which durably block a goroutine is:</p>
<ul>
<li>a send or receive on a nil channel</li>
<li>a send or receive blocked on a channel created within the same bubble</li>
<li>a select statement where every case is durably blocking</li>
<li><code>time.Sleep</code></li>
<li><code>sync.Cond.Wait</code></li>
<li><code>sync.WaitGroup.Wait</code></li>
</ul>
<h3 id="mutexes">Mutexes</h3>
<p>Operations on a <code>sync.Mutex</code> are not durably blocking.</p>
<p>It is common for functions to acquire a global mutex.
For example, a number of functions in the reflect package
use a global cache guarded by a mutex.
If a goroutine in a synctest bubble blocks while acquiring
a mutex held by a goroutine outside the bubble,
it is not durably blocked‚Äîit is blocked, but will be unblocked
by a goroutine from outside its bubble.</p>
<p>Since mutexes are usually not held for long periods of time,
we simply exclude them from <code>testing/synctest</code>&rsquo;s consideration.</p>
<h3 id="channels">Channels</h3>
<p>Channels created within a bubble behave differently from ones created outside.</p>
<p>Channel operations are durably blocking only if the channel is bubbled
(created in the bubble).
Operating on a bubbled channel from outside the bubble panics.</p>
<p>These rules ensure that a goroutine is durably blocked only when
communicating with goroutines within its bubble.</p>
<h3 id="io">I/O</h3>
<p>External I/O operations, such as reading from a network connection,
are not durably blocking.</p>
<p>Network reads may be unblocked by writes from outside the bubble,
possibly even from other processes.
Even if the only writer to a network connection is also in the same bubble,
the runtime cannot distinguish between a connection waiting for more data to arrive
and one where the kernel has received data and is in the process of delivering it.</p>
<p>Testing a network server or client with synctest will generally
require supplying a fake network implementation.
For example, the <a href="/pkg/net#Pipe"><code>net.Pipe</code></a> function
creates a pair of <code>net.Conn</code>s that use an in-memory network connection
and can be used in synctest tests.</p>
<h2 id="bubble-lifetime">Bubble lifetime</h2>
<p>The <code>Run</code> function starts a goroutine in a new bubble.
It returns when every goroutine in the bubble has exited.
It panics if the bubble is durably blocked
and cannot be unblocked by advancing time.</p>
<p>The requirement that every goroutine in the bubble exit before Run returns
means that tests must be careful to clean up any background goroutines
before completing.</p>
<h2 id="testing-networked-code">Testing networked code</h2>
<p>Let&rsquo;s look at another example, this time using the <code>testing/synctest</code>
package to test a networked program.
For this example, we&rsquo;ll test the <code>net/http</code> package&rsquo;s handling of
the 100 Continue response.</p>
<p>An HTTP client sending a request can include an &ldquo;Expect: 100-continue&rdquo;
header to tell the server that the client has additional data to send.
The server may then respond with a 100 Continue informational response
to request the rest of the request,
or with some other status to tell the client that the content is not needed.
For example, a client uploading a large file might use this feature to
confirm that the server is willing to accept the file before sending it.</p>
<p>Our test will confirm that when sending an &ldquo;Expect: 100-continue&rdquo; header
the HTTP client does not send a request&rsquo;s content before the server
requests it, and that it does send the content after receiving a
100 Continue response.</p>
<p>Often tests of a communicating client and server can use a
loopback network connection. When working with <code>testing/synctest</code>,
however, we will usually want to use a fake network connection
to allow us to detect when all goroutines are blocked on the network.
We&rsquo;ll start this test by creating an <code>http.Transport</code> (an HTTP client) that uses
an in-memory network connection created by <a href="/pkg/net#Pipe"><code>net.Pipe</code></a>.</p>
<pre><code>func Test(t *testing.T) {
    synctest.Run(func() {
        srvConn, cliConn := net.Pipe()
        defer srvConn.Close()
        defer cliConn.Close()
        tr := &amp;http.Transport{
            DialContext: func(ctx context.Context, network, address string) (net.Conn, error) {
                return cliConn, nil
            },
            // Setting a non-zero timeout enables &quot;Expect: 100-continue&quot; handling.
            // Since the following test does not sleep,
            // we will never encounter this timeout,
            // even if the test takes a long time to run on a slow machine.
            ExpectContinueTimeout: 5 * time.Second,
        }
</code></pre>
<p>We send a request on this transport with the &ldquo;Expect: 100-continue&rdquo; header set.
The request is sent in a new goroutine, since it won&rsquo;t complete until the end of the test.</p>
<pre><code>        body := &quot;request body&quot;
        go func() {
            req, _ := http.NewRequest(&quot;PUT&quot;, &quot;http://test.tld/&quot;, strings.NewReader(body))
            req.Header.Set(&quot;Expect&quot;, &quot;100-continue&quot;)
            resp, err := tr.RoundTrip(req)
            if err != nil {
                t.Errorf(&quot;RoundTrip: unexpected error %v&quot;, err)
            } else {
                resp.Body.Close()
            }
        }()
</code></pre>
<p>We read the request headers sent by the client.</p>
<pre><code>        req, err := http.ReadRequest(bufio.NewReader(srvConn))
        if err != nil {
            t.Fatalf(&quot;ReadRequest: %v&quot;, err)
        }
</code></pre>
<p>Now we come to the heart of the test.
We want to assert that the client will not send the request body yet.</p>
<p>We start a new goroutine copying the body sent to the server into a <code>strings.Builder</code>,
wait for all goroutines in the bubble to block, and verify that we haven&rsquo;t read anything
from the body yet.</p>
<p>If we forget the <code>synctest.Wait</code> call, the race detector will correctly complain
about a data race, but with the <code>Wait</code> this is safe.</p>
<pre><code>        var gotBody strings.Builder
        go io.Copy(&amp;gotBody, req.Body)
        synctest.Wait()
        if got := gotBody.String(); got != &quot;&quot; {
            t.Fatalf(&quot;before sending 100 Continue, unexpectedly read body: %q&quot;, got)
        }
</code></pre>
<p>We write a &ldquo;100 Continue&rdquo; response to the client and verify that it now sends the
request body.</p>
<pre><code>        srvConn.Write([]byte(&quot;HTTP/1.1 100 Continue\r\n\r\n&quot;))
        synctest.Wait()
        if got := gotBody.String(); got != body {
            t.Fatalf(&quot;after sending 100 Continue, read body %q, want %q&quot;, got, body)
        }
</code></pre>
<p>And finally, we finish up by sending the &ldquo;200 OK&rdquo; response to conclude the request.</p>
<p>We have started several goroutines during this test.
The <code>synctest.Run</code> call will wait for all of them to exit before returning.</p>
<pre><code>        srvConn.Write([]byte(&quot;HTTP/1.1 200 OK\r\n\r\n&quot;))
    })
}
</code></pre>
<p>This test can be easily extended to test other behaviors,
such as verifying that the request body is not sent if the server does not ask for it,
or that it is sent if the server does not respond within a timeout.</p>
<h2 id="status-of-the-experiment">Status of the experiment</h2>
<p>We are introducing <a href="/pkg/testing/synctest"><code>testing/synctest</code></a>
in Go 1.24 as an <em>experimental</em> package.
Depending on feedback and experience
we may release it with or without amendments,
continue the experiment,
or remove it in a future version of Go.</p>
<p>The package is not visible by default.
To use it, compile your code with <code>GOEXPERIMENT=synctest</code> set in your environment.</p>
<p>We want to hear your feedback!
If you try out <code>testing/synctest</code>,
please report your experiences, positive or negative,
on <a href="/issue/67434">go.dev/issue/67434</a>.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/swisstable">Faster Go maps with Swiss Tables</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/wasmexport">Extensible Wasm Applications with Go</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/wasmexport" target="_blank">Extensible Wasm Applications with Go</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/wasmexport">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Extensible Wasm Applications with Go</h1>
      
      <p class="author">
      Cherry Mui<br>
      13 February 2025
      </p>
      
      <p>Go 1.24 enhances its WebAssembly (Wasm) capabilities with the
addition of the <code>go:wasmexport</code> directive and the ability to build a reactor
for WebAssembly System Interface (WASI).
These features enable Go developers to export Go functions to Wasm,
facilitating better integration with Wasm hosts and expanding the possibilities
for Go-based Wasm applications.</p>
<h2 id="webassembly-and-the-webassembly-system-interface">WebAssembly and the WebAssembly System Interface</h2>
<p><a href="https://webassembly.org/" rel="noreferrer" target="_blank">WebAssembly (Wasm)</a> is a binary instruction format
that was initially created for web browsers, providing the execution of
high-performance, low-level code at speeds approaching native performance.
Since then, Wasm&rsquo;s utility has expanded, and it is now used in various
environments beyond the browser.
Notably, cloud providers offer services that directly execute Wasm
executables, taking advantage of the
<a href="https://wasi.dev/" rel="noreferrer" target="_blank">WebAssembly System Interface (WASI)</a> system call API.
WASI allows these executables to interact with system resources.</p>
<p>Go first added support for compiling to Wasm in the 1.11 release, through the
<code>js/wasm</code> port.
Go 1.21 added a new port targeting the WASI preview 1 syscall API through the
new <code>GOOS=wasip1</code> port.</p>
<h2 id="exporting-go-functions-to-wasm-with-gowasmexport">Exporting Go Functions to Wasm with <code>go:wasmexport</code></h2>
<p>Go 1.24 introduces a new compiler directive, <code>go:wasmexport</code>, which allows
developers to export Go functions to be called from outside of the
Wasm module, typically from a host application that runs the Wasm runtime.
This directive instructs the compiler to make the annotated function available
as a Wasm <a href="https://webassembly.github.io/spec/core/valid/modules.html?highlight=export#exports" rel="noreferrer" target="_blank">export</a>
in the resulting Wasm binary.</p>
<p>To use the <code>go:wasmexport</code> directive, simply add it to a function definition:</p>
<pre><code>//go:wasmexport add
func add(a, b int32) int32 { return a + b }
</code></pre>
<p>With this, the Wasm module will have an exported function named <code>add</code> that
can be called from the host.</p>
<p>This is analogous to the <a href="/cmd/cgo#hdr-C_references_to_Go">cgo <code>export</code> directive</a>,
which makes the function available to be called from C,
though <code>go:wasmexport</code> uses a different, simpler mechanism.</p>
<h2 id="building-a-wasi-reactor">Building a WASI Reactor</h2>
<p>A WASI reactor is a WebAssembly module that operates continuously, and
can be called upon multiple times to react on events or requests.
Unlike a &ldquo;command&rdquo; module, which terminates after its main function finishes,
a reactor instance remains live after initialization, and its exports remain
accessible.</p>
<p>With Go 1.24, one can build a WASI reactor with the <code>-buildmode=c-shared</code> build
flag.</p>
<pre><code>$ GOOS=wasip1 GOARCH=wasm go build -buildmode=c-shared -o reactor.wasm
</code></pre>
<p>The build flag signals to the linker not to generate the <code>_start</code> function
(the entry point for a command module), and instead generate an
<code>_initialize</code> function, which performs runtime and package initialization,
along with any exported functions and their dependencies.
The <code>_initialize</code> function must be called before any other exported functions.
The <code>main</code> function will not be automatically invoked.</p>
<p>To use a WASI reactor, the host application first initializes it by calling
<code>_initialize</code>, then simply invoke the exported functions.
Here is an example using <a href="https://wazero.io/" rel="noreferrer" target="_blank">Wazero</a>, a Go-based Wasm runtime
implementation:</p>
<pre><code>// Create a Wasm runtime, set up WASI.
r := wazero.NewRuntime(ctx)
defer r.Close(ctx)
wasi_snapshot_preview1.MustInstantiate(ctx, r)

// Configure the module to initialize the reactor.
config := wazero.NewModuleConfig().WithStartFunctions(&quot;_initialize&quot;)

// Instantiate the module.
wasmModule, _ := r.InstantiateWithConfig(ctx, wasmFile, config)

// Call the exported function.
fn := wasmModule.ExportedFunction(&quot;add&quot;)
var a, b int32 = 1, 2
res, _ := fn.Call(ctx, api.EncodeI32(a), api.EncodeI32(b))
c := api.DecodeI32(res[0])
fmt.Printf(&quot;add(%d, %d) = %d\n&quot;, a, b, c)

// The instance is still alive. We can call the function again.
res, _ = fn.Call(ctx, api.EncodeI32(b), api.EncodeI32(c))
fmt.Printf(&quot;add(%d, %d) = %d\n&quot;, b, c, api.DecodeI32(res[0]))
</code></pre>
<p>The <code>go:wasmexport</code> directive and the reactor build mode allow applications to
be extended by calling into Go-based Wasm code.
This is particularly valuable for applications that have adopted Wasm as a
plugin or extension mechanism with well-defined interfaces.
By exporting Go functions, applications can leverage the Go Wasm modules to
provide functionality without needing to recompile the entire application.
Furthermore, building as a reactor ensures that the exported functions can be
called multiple times without requiring reinitialization, making it suitable
for long-running applications or services.</p>
<h2 id="supporting-rich-types-between-the-host-and-the-client">Supporting rich types between the host and the client</h2>
<p>Go 1.24 also relaxes the constraints on types that can be used as input and
result parameters with <code>go:wasmimport</code> functions.
For example, one can pass a bool, a string, a pointer to an <code>int32</code>, or a
pointer to a struct which embeds <code>structs.HostLayout</code> and contains supported
field types
(see the <a href="/cmd/compile#hdr-WebAssembly_Directives">documentation</a> for detail).
This allows Go Wasm applications to be written in a more natural and ergonomic
way, and removes some unnecessary type conversions.</p>
<h2 id="limitations">Limitations</h2>
<p>While Go 1.24 has made significant enhancements to its Wasm capabilities,
there are still some notable limitations.</p>
<p>Wasm is a single-threaded architecture with no parallelism.
A <code>go:wasmexport</code> function can spawn new goroutines.
But if a function creates a background goroutine, it will not continue
executing when the <code>go:wasmexport</code> function returns, until calling back into
the Go-based Wasm module.</p>
<p>While some type restrictions have been relaxed in Go 1.24, there are still
limitations on the types that can be used with <code>go:wasmimport</code> and
<code>go:wasmexport</code> functions.
Due to the unfortunate mismatch between the 64-bit architecture of the client
and the 32-bit architecture of the host, it is not possible to pass pointers in
memory.
For example, a <code>go:wasmimport</code> function cannot take a pointer to a struct that
contains a pointer-typed field.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The addition of the ability to build a WASI reactor and export Go functions to
Wasm in Go 1.24 represent a significant step forward for Go&rsquo;s WebAssembly
capabilities.
These features empower developers to create more versatile and powerful Go-based
Wasm applications, opening up new possibilities for Go in the Wasm ecosystem.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/synctest">Testing concurrent code with testing/synctest</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/go1.24">Go 1.24 is released!</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/go1.24" target="_blank">Go 1.24 is released!</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/go1.24">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Go 1.24 is released!</h1>
      
      <p class="author">
      Junyang Shao, on behalf of the Go team<br>
      11 February 2025
      </p>
      
      <p>Today the Go team is excited to release Go 1.24,
which you can get by visiting the <a href="/dl/">download page</a>.</p>
<p>Go 1.24 comes with many improvements over Go 1.23. Here are some of the notable
changes; for the full list, refer to the <a href="/doc/go1.24">release notes</a>.</p>
<h2 id="language-changes">Language changes</h2>
<p>Go 1.24 now fully supports <a href="/issue/46477">generic type aliases</a>: a type alias
may be parameterized like a defined type.
See the <a href="/ref/spec#Alias_declarations">language spec</a> for details.</p>
<h2 id="performance-improvements">Performance improvements</h2>
<p>Several performance improvements in the runtime have decreased CPU overhead
by 2‚Äì3% on average across a suite of representative benchmarks. These
improvements include a new builtin <code>map</code> implementation based on
<a href="https://abseil.io/about/design/swisstables" rel="noreferrer" target="_blank">Swiss Tables</a>, more efficient
memory allocation of small objects, and a new runtime-internal mutex
implementation.</p>
<h2 id="tool-improvements">Tool improvements</h2>
<ul>
<li>The <code>go</code> command now provides a mechanism for tracking tool dependencies for a
module. Use <code>go get -tool</code> to add a <code>tool</code> directive to the current module. Use
<code>go tool [tool name]</code> to run the tools declared with the <code>tool</code> directive.
Read more on the <a href="/doc/go1.24#go-command">go command</a> in the release notes.</li>
<li>The new <code>test</code> analyzer in <code>go vet</code> subcommand reports common mistakes in
declarations of tests, fuzzers, benchmarks, and examples in test packages.
Read more on <a href="/doc/go1.24#vet">vet</a> in the release notes.</li>
</ul>
<h2 id="standard-library-additions">Standard library additions</h2>
<ul>
<li>
<p>The standard library now includes <a href="/doc/security/fips140">a new set of mechanisms to facilitate
FIPS 140-3 compliance</a>. Applications require no source code
changes to use the new mechanisms for approved algorithms. Read more
on <a href="/doc/go1.24#fips140">FIPS 140-3 compliance</a> in the release notes.
Apart from FIPS 140, several packages that were previously in the
<a href="/pkg/golang.org/x/crypto">x/crypto</a> module are now available in the
<a href="/doc/go1.24#crypto-mlkem">standard library</a>.</p>
</li>
<li>
<p>Benchmarks may now use the faster and less error-prone
<a href="/pkg/testing#B.Loop"><code>testing.B.Loop</code></a> method to perform benchmark iterations
like <code>for b.Loop() { ... }</code> in place of the typical loop structures involving
<code>b.N</code> like <code>for range b.N</code>. Read more on
<a href="/doc/go1.24#new-benchmark-function">the new benchmark function</a> in the
release notes.</p>
</li>
<li>
<p>The new <a href="/pkg/os#Root"><code>os.Root</code></a> type provides the ability to perform
filesystem operations isolated under a specific directory. Read more on
<a href="/doc/go1.24#directory-limited-filesystem-access">filesystem access</a> in the
release notes.</p>
</li>
<li>
<p>The runtime provides a new finalization mechanism,
<a href="/pkg/runtime#AddCleanup"><code>runtime.AddCleanup</code></a>, that is more flexible,
more efficient, and less error-prone than
<a href="/pkg/runtime#SetFinalizer"><code>runtime.SetFinalizer</code></a>. Read more on
<a href="/doc/go1.24#improved-finalizers">cleanups</a> in the release notes.</p>
</li>
</ul>
<h2 id="improved-webassembly-support">Improved WebAssembly support</h2>
<p>Go 1.24 adds a new <code>go:wasmexport</code> directive for Go programs to export
functions to the WebAssembly host, and supports building a Go program as a WASI
<a href="https://github.com/WebAssembly/WASI/blob/63a46f61052a21bfab75a76558485cf097c0dbba/legacy/application-abi.md#current-unstable-abi" rel="noreferrer" target="_blank">reactor/library</a>.
Read more on <a href="/doc/go1.24#wasm">WebAssembly</a> in the release notes.</p>
<hr>
<p>Please read the <a href="/doc/go1.24">Go 1.24 release notes</a> for the complete and
detailed information. Don&rsquo;t forget to watch for follow-up blog posts that
will go in more depth on some of the topics mentioned here!</p>
<p>Thank you to everyone who contributed to this release by writing code and
documentation, reporting bugs, sharing feedback, and testing the release
candidates. Your efforts helped to ensure that Go 1.24 is as stable as possible.
As always, if you notice any problems, please <a href="/issue/new">file an issue</a>.</p>
<p>Enjoy Go 1.24!</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/wasmexport">Extensible Wasm Applications with Go</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/survey2024-h2-results">Go Developer Survey 2024 H2 Results</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/survey2024-h2-results" target="_blank">Go Developer Survey 2024 H2 Results</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/survey2024-h2-results">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Go Developer Survey 2024 H2 Results</h1>
      
      <p class="author">
      Alice Merrick<br>
      20 December 2024
      </p>
      
      <style type="text/css" scoped>
  .chart {
    margin-left: 1.5rem;
    margin-right: 1.5rem;
    width: 800px;
  }
  blockquote p {
    color: var(--color-text-subtle) !important;
  }

  .quote_source {
    font-style: italic;
  }

  @media (prefers-color-scheme: dark) {
    .chart {
      border-radius: 8px;
    }
  }
</style>
<h2 id="background">Background</h2>
<p>Go was designed with a focus on developer experience, and we deeply value the
feedback we receive through proposals, issues, and community interactions.
However, these channels often represent the voices of our most experienced or
engaged users, a small subset of the broader Go community. To ensure we&rsquo;re
serving developers of all skill levels, including those who may not have strong
opinions on language design, we conduct this survey once or twice a year to
gather systematic feedback and quantitative evidence. This inclusive approach
allows us to hear from a wider range of Go developers, providing valuable
insights into how Go is used across different contexts and experience levels.
Your participation is critical in informing our decisions about language changes
and resource allocation, ultimately shaping the future of Go. Thank you to
everyone who contributed, and we strongly encourage your continued participation
in future surveys. Your experience matters to us.</p>
<p>This post shares the results of our most recent Go Developer Survey, conducted
from September 9‚Äì23, 2024. We recruited participants from the Go blog and
through randomized prompts in the <a href="https://code.visualstudio.com/" rel="noreferrer" target="_blank">VS Code</a> Go
plug-in and <a href="https://www.jetbrains.com/go/" rel="noreferrer" target="_blank">GoLand IDE</a>, allowing us to recruit
a more representative sample of Go developers. We received a total of 4,156
responses. A huge thank you to all those who contributed to making this
possible.</p>
<p>Along with capturing sentiments and challenges around using Go and Go tooling,
our primary focus areas for this survey were on uncovering sources of toil,
challenges to performing best practices, and how developers are using AI
assistance.</p>
<h2 id="highlights">Highlights</h2>
<ul>
<li><strong>Developer sentiment towards Go remains extremely positive</strong>, with 93% of
survey respondents saying they felt satisfied while working with Go during the
prior year.</li>
<li><strong>Ease of deployment and an easy to use API/SDK</strong> were respondents‚Äô favorite
things about using Go on the top three cloud providers. First-class Go support
is critical to keeping up with developer expectations.</li>
<li>70% of respondents were using AI assistants when developing with Go. The most
common uses were <strong>LLM-based code completion</strong>, writing tests, generating Go
code from natural language descriptions, and brainstorming. There was a
significant discrepancy between what respondents said they wanted to use AI
for last year, and what they currently use AI for.</li>
<li>The biggest challenge for teams using Go was <strong>maintaining consistent coding
standards</strong> across their codebase. This was often due to team members having
different levels of Go experience and coming from different programming
backgrounds, leading to inconsistencies in coding style and adoption of
non-idiomatic patterns.</li>
</ul>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#sentiment">Overall satisfaction</a></li>
<li><a href="#devenv">Development environments and tools</a></li>
<li><a href="#cloud">Go in the clouds</a></li>
<li><a href="#ai-assistance">AI assistance</a></li>
<li><a href="#team-challenges">Challenges for teams using Go</a></li>
<li><a href="#simd">Single Instruction, Multiple Data (SIMD)</a></li>
<li><a href="#demographics">Demographics</a></li>
<li><a href="#firmographics">Firmographics</a></li>
<li><a href="#methodology">Methodology</a></li>
<li><a href="#how-to-read-these-results">How to read these results</a></li>
<li><a href="#closing">Closing</a></li>
</ul>
<h3 id="sentiment">Overall satisfaction</h3>
<p>Overall satisfaction remains high in the survey with 93% of respondents saying
they were somewhat or very satisfied with Go during the last year. Although the
exact percentages fluctuate slightly from cycle to cycle, we do not see any
statistically significant differences from our <a href="/blog/survey2023-h2-results">2023
H2</a> or <a href="/blog/survey2024-h1-results">2024 H1
</a>Surveys when the satisfaction rate
was 90% and 93%, respectively.</p>
<p></p>
<p>The open comments we received on the survey continue to highlight what
developers like most about using Go, for example, its simplicity, the Go
toolchain, and its promise of backwards compatibility:</p>
<p><em>‚ÄúI am a programming languages enjoyer (C-like) and I always come back to Go for
its simplicity, fast compilation and robust toolchain. Keep it up!‚Äù</em></p>
<p><em>‚ÄúThank you for creating Go! It is my favorite language, because it is pretty
minimal, the development cycle has rapid build-test cycles, and when using a
random open source project written in Go, there is a good chance that it will
work, even 10 years after. I love the 1.0 compatibility guarantee.‚Äù</em></p>
<h3 id="devenv">Development environments and tools</h3>
<h4 id="developer-os">Developer OS</h4>
<p>Consistent with previous years, most survey respondents develop with Go on Linux
(61%) and macOS (59%) systems. Historically, the proportion of Linux and macOS
users has been very close, and we didn‚Äôt see any significant changes from the
last survey. The randomly sampled groups from JetBrains and VS Code were more
likely (33% and 36%, respectively) to develop on Windows than the self-selected
group (16%).</p>
<p> </p>
<h4 id="deployment-environments">Deployment environments</h4>
<p>Given the prevalence of Go for cloud development and containerized workloads,
it‚Äôs no surprise that Go developers primarily deploy to Linux environments
(96%).</p>
<p></p>
<p>We included several questions to understand what architectures respondents are
deploying to when deploying to Linux, Windows or WebAssembly. The x86-64 /
AMD64 architecture was by far the most popular choice for those deploying to
both Linux (92%) and Windows (97%). ARM64 was second at 49% for Linux and 21%
for Windows.</p>
<p> </p>
<p>Not many respondents deployed to Web Assembly (only about 4% of overall
respondents), but 73% that do said they deploy to JS and 48% to WASI Preview 1.</p>
<p></p>
<h4 id="editor-awareness-and-preferences">Editor awareness and preferences</h4>
<p>We introduced a new question on this survey to assess awareness and usage of
popular editors for Go. When interpreting these results, keep in mind that 34%
of respondents came to the survey from VS Code and 9% of respondents came from
GoLand, so it is more likely for them to use those editors regularly.</p>
<p>VS Code was the most widely used editor, with 66% of respondents using it
regularly, and GoLand was the second most used at 35%. Almost all respondents
had heard of both VS Code and GoLand, but respondents were much more likely to
have at least tried VS Code. Interestingly, 33% of respondents said they
regularly use 2 or more editors. They may use different editors for different
tasks or environments, such as using Emacs or Vim via SSH, where IDEs aren‚Äôt
available.</p>
<p></p>
<p>We also asked a question about editor preference, the same as we have asked on
previous surveys. Because our randomly sampled populations were recruited from
within VS Code or GoLand, they are strongly biased towards preferring those
editors. To avoid skewing the results, we show the data for the most preferred
editor here from the self-selected group only. 38% preferred VS Code and 35%
preferred GoLand. This is a notable difference from the last survey in H1, when
43% preferred VS Code and 33% preferred GoLand. A possible explanation could be
in how respondents were recruited this year. This year the VS Code notification
began inviting developers to take the survey before the Go blog entry was
posted, so a larger proportion of respondents came from the VS Code prompt this
year who might have otherwise come from the blog post. Because we only show the
self-selected respondents in this chart, data from respondents from the VS Code
prompt data are not represented here. Another contributing factor could be the
slight increase in those who prefer &ldquo;Other&rdquo; (4%). The write-in responses suggest
there is increased interest in editors like <a href="https://zed.dev/" rel="noreferrer" target="_blank">Zed</a>, which made
up 43% of the write-in responses.</p>
<p></p>
<h4 id="code-analysis-tools">Code analysis tools</h4>
<p>The most popular code analysis tool was <code>gopls</code>, which was knowingly used by 65%
of respondents. Because <code>gopls</code> is used under-the-hood by default in VS Code,
this is likely an undercount. Following closely behind, <code>golangci-lint</code> was used
by 57% of respondents, and <code>staticcheck</code> was used by 34% of respondents. A much
smaller proportion used custom or other tools, which suggests that most
respondents prefer common established tools over custom solutions. Only 10% of
respondents indicated they don&rsquo;t use any code analysis tools.</p>
<p></p>
<h4 id="cloud">Go in the Clouds</h4>
<p>Go is a popular language for modern cloud-based development, so we typically
include survey questions to help us understand which cloud platforms and
services Go developers are using. In this cycle, we sought to learn about
preferences and experiences of Go developers across cloud providers, with a
particular focus on the largest cloud providers: Amazon Web Services (AWS),
Microsoft Azure, and Google Cloud. We also included an additional option for
‚ÄúBare Metal Servers‚Äù for those who deploy to servers without virtualization.</p>
<p>Similar to previous years, almost half of respondents (50%) deploy Go programs
to Amazon Web Services. AWS is followed by self-owned or company-owned servers
(37%), and Google Cloud (30%). Respondents who work at large organizations are a
little more likely to deploy to self-owned or company-owned servers (48%) than
those who work at small-to-medium organizations (34%). They‚Äòre also a little
more likely to deploy to Microsoft Azure (25%) than small-to-medium
organizations (12%).</p>
<p></p>
<p>The most commonly used cloud services were AWS Elastic Kubernetes Service (41%),
AWS EC2 (39%), and Google Cloud GKE (29%). Although we‚Äôve seen Kubernetes usage
increase over time, this is the first time we‚Äôve seen EKS become more widely
used than EC2. Overall, Kubernetes offerings were the most popular services for
AWS, Google Cloud, and Azure, followed by VMs and then Serverless offerings.
Go&rsquo;s strengths in containerization and microservices development naturally align
with the rising popularity of Kubernetes, as it provides an efficient and
scalable platform for deploying and managing these types of applications.</p>
<p></p>
<p>We asked a followup question to respondents who deployed Go code to the top
three cloud providers, Amazon Web Services, Google Cloud, and Microsoft Azure on
what they like most about deploying Go code to each cloud. The most popular
response across different providers was actually Go&rsquo;s performance and language
features rather than something about the cloud provider.</p>
<p>Other common reasons were:</p>
<ul>
<li>Familiarity with the given cloud provider compared to other clouds</li>
<li>Ease of deployment of Go applications on the given cloud provider</li>
<li>The cloud provider&rsquo;s API/SDK for Go is easy to use</li>
<li>The API/SDK is well documented</li>
</ul>
<p>Other than familiarity, the top favorite things highlight the importance of
having first class support for Go to keep up with developer expectations.</p>
<p>It was also fairly common for respondents to say they don&rsquo;t have a favorite
thing about their cloud provider. From a previous version of the survey that
involved write-in responses, this often meant that they did not interact
directly with the Cloud. In particular, respondents who use Microsoft Azure were
much more likely to say that ‚ÄúNothing‚Äù was their favorite thing (51%) compared
to AWS (27%) or Google Cloud (30%).</p>
<p></p>
<h3 id="ai-assistance">AI assistance</h3>
<p>The Go team hypothesizes that AI assistance has the potential to alleviate
developers from tedious and repetitive tasks, allowing them to focus on more
creative and fulfilling aspects of their work. To gain insights into areas where
AI assistance could be most beneficial, we included a section in our survey to
identify common developer toil.</p>
<p>The majority of respondents (70%) are using AI assistants when developing with
Go. The most common usage of AI assistants was in LLM-based code completion
(35%). Other common responses were writing tests (29%), generating Go code from
a natural language description (27%), and brainstorming ideas (25%). There was
also a sizable minority (30%) of respondents who had not used any LLM for
assistance in the last month.</p>
<p></p>
<p>Some of these results stood out when compared to findings from our 2023 H2
survey, where we asked respondents for the top 5 use cases they would like to
see AI/ML support Go developers. Although a couple new responses were introduced
in the current survey, we can still do a rough comparison between what
respondents said they wanted AI support for, and what their actual usage was
like. In that previous survey, writing tests was the most desired use case
(49%). In our latest 2024 H2 survey, about 29% of respondents had used AI
assistants for this in the last month. This suggests that current offerings are
not meeting developer needs for writing tests. Similarly, in 2023, 47%
respondents said they would like suggestions for best practices while coding,
while only 14% a year later said they are using AI assistance for this use case.
46% said they wanted help catching common mistakes while coding, and only 13%
said they were using AI assistance for this. This could indicate that current AI
assistants are not well-equipped for these kinds of tasks, or they&rsquo;re not well
integrated into developer workflows or tooling.</p>
<p>It was also surprising to see such high usage of AI for generating Go code from
natural language and brainstorming, since the previous survey didn&rsquo;t indicate
these as highly desired use cases. There could be a number of explanations for
these differences. While previous respondents might not have explicitly <em>wanted</em>
AI for code generation or brainstorming initially, they might be gravitating
towards these uses because they align with the current strengths of generative
AI‚Äînatural language processing and creative text generation. We should also keep
in mind that people<a href="https://www.nngroup.com/articles/first-rule-of-usability-dont-listen-to-users/" rel="noreferrer" target="_blank"> are not necessarily the best predictors of their own
behavior</a>.</p>
<p></p>
<p>We also saw some notable differences in how different groups responded to this
question. Respondents at small to medium sized organizations were a little more
likely to have used LLMs (75%) compared to those at large organizations (66%).
There could be a number of reasons why, for example, larger organizations may
have stricter security and compliance requirements and concerns about the
security of LLM coding assistants, the potential for data leakage, or compliance
with industry-specific regulations. They also may have already invested in
other developer tools and practices that already provide similar benefits to
developer productivity.</p>
<p></p>
<p>Go developers with less than 2 years of experience were more likely to use AI
assistants (75%) compared to Go developers with 5+ years of experience (67%).
Less experienced Go developers were also more likely to use them for more tasks,
on average 3.50. Although all experience levels tended to use LLM-based code
completion, less experienced Go developers were more likely to use Go for more
tasks related to learning and debugging, such as explaining what a piece of Go
code does, resolving compiler errors and debugging failures in their Go code.
This suggests that AI assistants are currently providing the greatest utility to
those who are less familiar with Go. We don&rsquo;t know how AI assistants affect
learning or getting started on a new Go project, something we want to
investigate in the future. However, all experience levels had similar rates of
satisfaction with their AI assistants, around 73%, so new Go developers are not
more satisfied with AI assistants, despite using them more often.</p>
<p></p>
<p>To respondents who reported using AI assistance for at least one task related to
writing Go code, we asked some follow up questions to learn more about their AI
assistant usage. The most commonly used AI assistants were ChatGPT (68%) and
GitHub Copilot (50%). When asked which AI assistant they used <em>most</em> in the last
month, ChatGPT and Copilot were about even at 36% each, so although more
respondents used ChatGPT, it wasn‚Äôt necessarily their primary assistant.
Participants were similarly satisfied with both tools (73% satisfied with
ChatGPT, vs. 78% with GitHub CoPilot). The highest satisfaction rate for any AI
assistant was Anthropic Claude, at 87%.</p>
<p> </p>
<h3 id="team-challenges">Challenges for teams using Go</h3>
<p>In this section of the survey, we wanted to understand which best practices or
tools should be better integrated into developer workflows. Our approach was to
identify common problems for teams using Go. We then asked respondents which
challenges would bring them the most benefit if they were ‚Äúmagically‚Äù solved for
them. (This was so that respondents would not focus on particular solutions.)
Common problems that would provide the most benefit if they were solved would be
considered candidates for improvement.</p>
<p>The most commonly reported challenges for teams were maintaining consistent coding
standards across our Go codebase (58%), identifying performance issues in a
running Go program (58%) and identifying resource usage inefficiencies in a
running Go program (57%).</p>
<p></p>
<p>21% of respondents said their team would benefit most from maintaining
consistent coding standards across their Go codebase. This was the most common
response, making it a good candidate to address. In a follow-up question, we got
more details as to why specifically this was so challenging.</p>
<p></p>
<p>According to the write-in responses, many teams face challenges maintaining
consistent coding standards because their members have varying levels of
experience with Go and come from different programming backgrounds. This led to
inconsistencies in coding style and the adoption of non-idiomatic patterns.</p>
<p><em>‚ÄúThere&rsquo;s lots of polyglot engineers where I work. So the Go written is not
consistent. I do consider myself a Gopher and spend time trying to convince my
teammates what is idiomatic in Go‚Äù‚ÄîGo developer with 2‚Äì4 years of experience.</em></p>
<p><em>‚ÄúMost of the team members are learning Go from scratch. Coming from the
dynamically typed languages, it takes them a while to get used to the new
language. They seem to struggle maintaining the code consistency following the
Go guidelines.‚Äù‚ÄîGo developer with 2‚Äì4 years of experience.</em></p>
<p>This echoes some feedback we‚Äôve heard before about teammates who write &ldquo;Gava&rdquo; or
&ldquo;Guby&rdquo; due to their previous language experiences. Although static analysis was
a class of tool we had in mind to address this issue when we came up with this
question, we are currently exploring different ways we might address this.</p>
<h3 id="simd">Single Instruction, Multiple Data (SIMD)</h3>
<p>SIMD, or Single Instruction, Multiple Data, is a type of parallel processing
that allows a single CPU instruction to operate on multiple data points
simultaneously. This facilitates tasks involving large datasets and repetitive
operations, and is often used to optimize performance in fields like game
development, data processing, and scientific computing. In this section of the
survey we wanted to assess respondents&rsquo; needs for native SIMD support in Go.</p>
<p>The majority of respondents (89%) say that work on projects where performance
optimizations are crucial at least some of the time. 40% said they work on such
projects at least half the time. This held true across different organization
sizes and experience levels, suggesting that performance is an important issue
for most developers.</p>
<p></p>
<p>About half of respondents (54%), said they are at least a little familiar with
the concept of SIMD. Working with SIMD often requires a deeper understanding of
computer architecture and low-level programming concepts, so unsurprisingly we
find that less experienced developers were less likely to be familiar with SIMD.
Respondents with more experience and who worked on performance-crucial
applications at least half the time were the most likely to be familiar with
SIMD.</p>
<p></p>
<p>For those who were at least slightly familiar with SIMD, we asked some follow
-up questions to understand how respondents were affected by the absence of
native SIMD support in Go. Over a third, about 37%, said they had been impacted.
17% of respondents said they had been limited in the performance they could
achieve in their projects, 15% said they had to use another language instead of
Go to achieve their goals, and 13% said they had to use non-Go libraries when
they would have preferred to use Go libraries. Interestingly, respondents who
were negatively impacted by the absence of native SIMD support were a little
more likely to use Go for data processing and AI/ML. This suggests that adding
SIMD support could make Go a better option for these domains.</p>
<p> </p>
<h3 id="demographics">Demographics</h3>
<p>We ask similar demographic questions during each cycle of this survey so we can
understand how comparable the year-over-year results may be. For example, if we
saw changes in who responded to the survey in terms of Go experience, it‚Äôd be
very likely that other differences in results from prior cycles were due to this
demographic shift. We also use these questions to provide comparisons between
groups, such as satisfaction according to how long respondents have been using
Go.</p>
<p>We didn‚Äôt see any significant changes in levels of experience among respondents
during this cycle.</p>
<p></p>
<p>There are differences in the demographics of respondents according to whether
they came from The Go Blog, the VS Code extension, or GoLand. The population
who responded to survey notifications in VS Code skews toward less experience
with Go; we suspect this a reflection of VS Code‚Äôs popularity with new Go
developers, who may not be ready to invest in an IDE license while they‚Äôre still
learning. With respect to years of Go experience, the respondents randomly
selected from GoLand are more similar to our self-selected population who found
the survey through the Go Blog. Seeing consistencies between samples allows us
to more confidently generalize findings to the rest of the community.</p>
<p></p>
<p>In addition to years of experience with Go, we also measured years of
professional coding experience. Our audience tends to be a pretty experienced
bunch, with 26% of respondents having 16 or more years of professional coding
experience.</p>
<p></p>
<p>The self-selected group was even more experienced than the randomly selected
groups, with 29% having 16 or more years of professional experience. This
suggests that our self-selected group is generally more experienced than our
randomly selected groups and can help explain some of the differences we see in
this group.</p>
<p></p>
<p>We found that 81% of respondents were fully employed. When we look at our
individual samples, we see a small but significant difference within our
respondents from VS Code, who are slightly more likely to be students. This
makes sense given that VS Code is free.</p>


<p>Similar to previous years, the most common use cases for Go were API/RPC
services (75%) and command line tools (62%). More experienced Go developers
reported building a wider variety of applications in Go. This trend was
consistent across every category of app or service. We did not find any notable
differences in what respondents are building based on their organization size.
Respondents from the random VS Code and GoLand samples did not display
significant differences either.</p>
<p></p>
<h3 id="firmographics">Firmographics</h3>
<p>We heard from respondents at a variety of different organizations. About 29%
worked at large organizations with 1,001 or more employees, 25% were from
midsize organizations of 101‚Äì1,000 employees, and 43% worked at smaller
organizations with fewer than 100 employees. As in previous years, the most
common industry people work in was technology (43%) while the second most common
was financial services (13%).</p>
<p> </p>
<p>As in previous surveys, the most common location for survey respondents was the
United States (19%). This year we saw a significant shift in the proportion of
respondents coming from Ukraine, from 1% to 6%, making it the third most common
location for survey respondents. Because we only saw this difference among our
self-selected respondents, and not in the randomly sampled groups, this suggests
that something affected who discovered the survey, rather than a widespread
increase in Go adoption across all developers in Ukraine. Perhaps there was
increased visibility or awareness of the survey or the Go Blog among developers
in Ukraine.</p>
<p></p>
<h2 id="methodology">Methodology</h2>
<p>We announce the survey primarily through the Go Blog, where it is often picked
up on various social channels like Reddit, or Hacker News. We also recruit
respondents by using the VS Code Go plugin to randomly select users to whom we show
a prompt asking if they‚Äôd like to participate in the survey. With some help from
our friends at JetBrains, we also have an additional random sample from
prompting a random subset of GoLand users to take the survey. This gave us two
sources we used to compare the self-selected respondents from our traditional
channels and help identify potential effects of <a href="https://en.wikipedia.org/wiki/Self-selection_bias" rel="noreferrer" target="_blank">self-selection
bias</a>.</p>
<p>57% of survey respondents ‚Äúself-selected‚Äù to take the survey, meaning they found
it on the Go blog or other social Go channels. People who don‚Äôt follow these
channels are less likely to learn about the survey from them, and in some cases,
they respond differently than people who do closely follow them. For example,
they might be new to the Go community and not yet aware of the Go blog. About
43% of respondents were randomly sampled, meaning they responded to the survey
after seeing a prompt in VS Code (25%) or GoLand (11%). Over the period of
September 9‚Äì23, 2024, there was roughly a 10% chance users of the VS Code plugin
would have seen this prompt. The prompt in GoLand was similarly active between
September 9‚Äì20. By examining how the randomly sampled groups differ from the
self-selected responses, as well as from each other, we‚Äôre able to more
confidently generalize findings to the larger community of Go developers.</p>
<p></p>
<h4 id="how-to-read-these-results">How to read these results</h4>
<p>Throughout this report we use charts of survey responses to provide supporting
evidence for our findings. All of these charts use a similar format. The title
is the exact question that survey respondents saw. Unless otherwise noted,
questions were multiple choice and participants could only select a single
response choice; each chart‚Äôs subtitle will tell the reader if the question
allowed multiple response choices or was an open-ended text box instead of a
multiple choice question. For charts of open-ended text responses, a Go team
member read and manually categorized all of the responses. Many open-ended
questions elicited a wide variety of responses; to keep the chart sizes
reasonable, we condensed them to a maximum of the top 10-12 themes, with
additional themes all grouped under ‚ÄúOther‚Äù. The percentage labels shown in
charts are rounded to the nearest integer (e.g., 1.4% and 0.8% will both be
displayed as 1%), but the length of each bar and row ordering are based on the
unrounded values.</p>
<p>To help readers understand the weight of evidence underlying each finding, we
included error bars showing the 95% <a href="https://en.wikipedia.org/wiki/Confidence_interval" rel="noreferrer" target="_blank">confidence
interval</a> for responses;
narrower bars indicate increased confidence. Sometimes two or more responses
have overlapping error bars, which means the relative order of those responses
is not statistically meaningful (i.e., the responses are effectively tied). The
lower right of each chart shows the number of people whose responses are
included in the chart, in the form ‚Äún = [number of respondents]‚Äù. In cases where
we found interesting differences in responses between groups, (e.g., years of
experience, organization size, or sample source) we showed a color-coded
breakdown of the differences.</p>
<h3 id="closing">Closing</h3>
<p>Thanks for reviewing our semi-annual Go Developer Survey! And many thanks to
everyone who shared their thoughts on Go and everyone who contributed to making
this survey happen. It means the world to us and truly helps us improve Go.</p>
<p>&mdash; Alice (on behalf of the Go team at Google)</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/go1.24">Go 1.24 is released!</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/protobuf-opaque">Go Protobuf: The new Opaque API</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
          <li>
            <a href="https://go.dev/blog/protobuf-opaque" target="_blank">Go Protobuf: The new Opaque API</a>
            <div class="item-content">
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/protobuf-opaque">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Go Protobuf: The new Opaque API</h1>
      
      <p class="author">
      Michael Stapelberg<br>
      16 December 2024
      </p>
      
      <p>[<a href="https://en.wikipedia.org/wiki/Protocol_Buffers" rel="noreferrer" target="_blank">Protocol Buffers (Protobuf)</a>
is Google&rsquo;s language-neutral data interchange format. See
<a href="https://protobuf.dev/" rel="noreferrer" target="_blank">protobuf.dev</a>.]</p>
<p>Back in March 2020, we released the <code>google.golang.org/protobuf</code> module, <a href="/blog/protobuf-apiv2">a
major overhaul of the Go Protobuf API</a>. This
package introduced first-class <a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect" rel="noreferrer" target="_blank">support for
reflection</a>,
a <a href="https://pkg.go.dev/google.golang.org/protobuf/types/dynamicpb" rel="noreferrer" target="_blank"><code>dynamicpb</code></a>
implementation and the
<a href="https://pkg.go.dev/google.golang.org/protobuf/testing/protocmp" rel="noreferrer" target="_blank"><code>protocmp</code></a>
package for easier testing.</p>
<p>That release introduced a new protobuf module with a new API. Today, we are
releasing an additional API for generated code, meaning the Go code in the
<code>.pb.go</code> files created by the protocol compiler (<code>protoc</code>). This blog post
explains our motivation for creating a new API and shows you how to use it in
your projects.</p>
<p>To be clear: We are not removing anything. We will continue to support the
existing API for generated code, just like we still support the older protobuf
module (by wrapping the <code>google.golang.org/protobuf</code> implementation). Go is
<a href="/blog/compat">committed to backwards compatibility</a> and this
applies to Go Protobuf, too!</p>
<h2 id="background">Background: the (existing) Open Struct API</h2>
<p>We now call the existing API the Open Struct API, because generated struct types
are open to direct access. In the next section, we will see how it differs from
the new Opaque API.</p>
<p>To work with protocol buffers, you first create a <code>.proto</code> definition file like
this one:</p>
<pre><code>edition = &quot;2023&quot;;  // successor to proto2 and proto3

package log;

message LogEntry {
  string backend_server = 1;
  uint32 request_size = 2;
  string ip_address = 3;
}
</code></pre>
<p>Then, you <a href="https://protobuf.dev/getting-started/gotutorial/" rel="noreferrer" target="_blank">run the protocol compiler
(<code>protoc</code>)</a> to generate code
like the following (in a <code>.pb.go</code> file):</p>
<pre><code>package logpb

type LogEntry struct {
  BackendServer *string
  RequestSize   *uint32
  IPAddress     *string
  // ‚Ä¶internal fields elided‚Ä¶
}

func (l *LogEntry) GetBackendServer() string { ‚Ä¶ }
func (l *LogEntry) GetRequestSize() uint32   { ‚Ä¶ }
func (l *LogEntry) GetIPAddress() string     { ‚Ä¶ }
</code></pre>
<p>Now you can import the generated <code>logpb</code> package from your Go code and call
functions like
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto#Marshal" rel="noreferrer" target="_blank"><code>proto.Marshal</code></a>
to encode <code>logpb.LogEntry</code> messages into protobuf wire format.</p>
<p>You can find more details in the <a href="https://protobuf.dev/reference/go/go-generated/" rel="noreferrer" target="_blank">Generated Code API
documentation</a>.</p>
<h3 id="presence">(Existing) Open Struct API: Field Presence</h3>
<p>An important aspect of this generated code is how <em>field presence</em> (whether a
field is set or not) is modeled. For instance, the above example models presence
using pointers, so you could set the <code>BackendServer</code> field to:</p>
<ol>
<li><code>proto.String(&quot;zrh01.prod&quot;)</code>: the field is set and contains &ldquo;zrh01.prod&rdquo;</li>
<li><code>proto.String(&quot;&quot;)</code>: the field is set (non-<code>nil</code> pointer) but contains an
empty value</li>
<li><code>nil</code> pointer: the field is not set</li>
</ol>
<p>If you are used to generated code not having pointers, you are probably using
<code>.proto</code> files that start with <code>syntax = &quot;proto3&quot;</code>. The field presence behavior
changed over the years:</p>
<ul>
<li><code>syntax = &quot;proto2&quot;</code> uses <em>explicit presence</em> by default</li>
<li><code>syntax = &quot;proto3&quot;</code> used <em>implicit presence</em> by default (where cases 2 and 3
cannot be distinguished and are both represented by an empty string), but was
later extended to allow <a href="https://protobuf.dev/programming-guides/proto3/#field-labels" rel="noreferrer" target="_blank">opting into explicit presence with the <code>optional</code>
keyword</a></li>
<li><code>edition = &quot;2023&quot;</code>, the <a href="https://protobuf.dev/editions/overview/" rel="noreferrer" target="_blank">successor to both proto2 and
proto3</a>, uses <a href="https://protobuf.dev/programming-guides/field_presence/" rel="noreferrer" target="_blank"><em>explicit
presence</em></a> by default</li>
</ul>
<h2 id="opaqueapi">The new Opaque API</h2>
<p>We created the new <em>Opaque API</em> to uncouple the <a href="https://protobuf.dev/reference/go/go-generated/" rel="noreferrer" target="_blank">Generated Code
API</a> from the underlying
in-memory representation. The (existing) Open Struct API has no such separation:
it allows programs direct access to the protobuf message memory. For example,
one could use the <code>flag</code> package to parse command-line flag values into protobuf
message fields:</p>
<pre><code>var req logpb.LogEntry
flag.StringVar(&amp;req.BackendServer, &quot;backend&quot;, os.Getenv(&quot;HOST&quot;), &quot;‚Ä¶&quot;)
flag.Parse() // fills the BackendServer field from -backend flag
</code></pre>
<p>The problem with such a tight coupling is that we can never change how we lay
out protobuf messages in memory. Lifting this restriction enables many
implementation improvements, which we&rsquo;ll see below.</p>
<p>What changes with the new Opaque API? Here is how the generated code from the
above example would change:</p>
<pre><code>package logpb

type LogEntry struct {
  xxx_hidden_BackendServer *string // no longer exported
  xxx_hidden_RequestSize   uint32  // no longer exported
  xxx_hidden_IPAddress     *string // no longer exported
  // ‚Ä¶internal fields elided‚Ä¶
}

func (l *LogEntry) GetBackendServer() string { ‚Ä¶ }
func (l *LogEntry) HasBackendServer() bool   { ‚Ä¶ }
func (l *LogEntry) SetBackendServer(string)  { ‚Ä¶ }
func (l *LogEntry) ClearBackendServer()      { ‚Ä¶ }
// ‚Ä¶
</code></pre>
<p>With the Opaque API, the struct fields are hidden and can no longer be
directly accessed. Instead, the new accessor methods allow for getting, setting,
or clearing a field.</p>
<h3 id="lessmemory">Opaque structs use less memory</h3>
<p>One change we made to the memory layout is to model field presence for
elementary fields more efficiently:</p>
<ul>
<li>The (existing) Open Struct API uses pointers, which adds a 64-bit word to the
space cost of the field.</li>
<li>The Opaque API uses <a href="https://en.wikipedia.org/wiki/Bit_field" rel="noreferrer" target="_blank">bit
fields</a>, which require one bit per
field (ignoring padding overhead).</li>
</ul>
<p>Using fewer variables and pointers also lowers load on the allocator and on the
garbage collector.</p>
<p>The performance improvement depends heavily on the shapes of your protocol
messages: The change only affects elementary fields like integers, bools, enums,
and floats, but not strings, repeated fields, or submessages (because it is
<a href="https://protobuf.dev/reference/go/opaque-faq/#memorylayout" rel="noreferrer" target="_blank">less
profitable</a>
for those types).</p>
<p>Our benchmark results show that messages with few elementary fields exhibit
performance that is as good as before, whereas messages with more elementary
fields are decoded with significantly fewer allocations:</p>
<pre><code>             ‚îÇ Open Struct API ‚îÇ             Opaque API             ‚îÇ
             ‚îÇ    allocs/op    ‚îÇ  allocs/op   vs base               ‚îÇ
Prod#1          360.3k ¬± 0%       360.3k ¬± 0%  +0.00% (p=0.002 n=6)
Search#1       1413.7k ¬± 0%       762.3k ¬± 0%  -46.08% (p=0.002 n=6)
Search#2        314.8k ¬± 0%       132.4k ¬± 0%  -57.95% (p=0.002 n=6)
</code></pre>
<p>Reducing allocations also makes decoding protobuf messages more efficient:</p>
<pre><code>             ‚îÇ Open Struct API ‚îÇ             Opaque API            ‚îÇ
             ‚îÇ   user-sec/op   ‚îÇ user-sec/op  vs base              ‚îÇ
Prod#1         55.55m ¬± 6%        55.28m ¬± 4%  ~ (p=0.180 n=6)
Search#1       324.3m ¬± 22%       292.0m ¬± 6%  -9.97% (p=0.015 n=6)
Search#2       67.53m ¬± 10%       45.04m ¬± 8%  -33.29% (p=0.002 n=6)
</code></pre>
<p>(All measurements done on an AMD Castle Peak Zen 2. Results on ARM and Intel
CPUs are similar.)</p>
<p>Note: proto3 with implicit presence similarly does not use pointers, so you will
not see a performance improvement if you are coming from proto3. If you were
using implicit presence for performance reasons, forgoing the convenience of
being able to distinguish empty fields from unset ones, then the Opaque API now
makes it possible to use explicit presence without a performance penalty.</p>
<h3 id="lazydecoding">Motivation: Lazy Decoding</h3>
<p>Lazy decoding is a performance optimization where the contents of a submessage
are decoded when first accessed instead of during
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto#Unmarshal" rel="noreferrer" target="_blank"><code>proto.Unmarshal</code></a>. Lazy
decoding can improve performance by avoiding unnecessarily decoding fields which
are never accessed.</p>
<p>Lazy decoding can&rsquo;t be supported safely by the (existing) Open Struct API. While
the Open Struct API provides getters, leaving the (un-decoded) struct fields
exposed would be extremely error-prone. To ensure that the decoding logic runs
immediately before the field is first accessed, we must make the field private
and mediate all accesses to it through getter and setter functions.</p>
<p>This approach made it possible to implement lazy decoding with the Opaque
API. Of course, not every workload will benefit from this optimization, but for
those that do benefit, the results can be spectacular: We have seen logs
analysis pipelines that discard messages based on a top-level message condition
(e.g. whether <code>backend_server</code> is one of the machines running a new Linux kernel
version) and can skip decoding deeply nested subtrees of messages.</p>
<p>As an example, here are the results of the micro-benchmark we included,
demonstrating how lazy decoding saves over 50% of the work and over 87% of
allocations!</p>
<pre><code>                  ‚îÇ   nolazy    ‚îÇ                lazy                ‚îÇ
                  ‚îÇ   sec/op    ‚îÇ   sec/op     vs base               ‚îÇ
Unmarshal/lazy-24   6.742¬µ ¬± 0%   2.816¬µ ¬± 0%  -58.23% (p=0.002 n=6)

                  ‚îÇ    nolazy    ‚îÇ                lazy                 ‚îÇ
                  ‚îÇ     B/op     ‚îÇ     B/op      vs base               ‚îÇ
Unmarshal/lazy-24   3.666Ki ¬± 0%   1.814Ki ¬± 0%  -50.51% (p=0.002 n=6)

                  ‚îÇ   nolazy    ‚îÇ               lazy                ‚îÇ
                  ‚îÇ  allocs/op  ‚îÇ allocs/op   vs base               ‚îÇ
Unmarshal/lazy-24   64.000 ¬± 0%   8.000 ¬± 0%  -87.50% (p=0.002 n=6)
</code></pre>
<h3 id="pointercomparison">Motivation: reduce pointer comparison mistakes</h3>
<p>Modeling field presence with pointers invites pointer-related bugs.</p>
<p>Consider an enum, declared within the <code>LogEntry</code> message:</p>
<pre><code>message LogEntry {
  enum DeviceType {
    DESKTOP = 0;
    MOBILE = 1;
    VR = 2;
  };
  DeviceType device_type = 1;
}
</code></pre>
<p>A simple mistake is to compare the <code>device_type</code> enum field like so:</p>
<pre><code>if cv.DeviceType == logpb.LogEntry_DESKTOP.Enum() { // incorrect!
</code></pre>
<p>Did you spot the bug? The condition compares the memory address instead of the
value. Because the <code>Enum()</code> accessor allocates a new variable on each call, the
condition can never be true. The check should have read:</p>
<pre><code>if cv.GetDeviceType() == logpb.LogEntry_DESKTOP {
</code></pre>
<p>The new Opaque API prevents this mistake: Because fields are hidden, all access
must go through the getter.</p>
<h3 id="accidentalsharing">Motivation: reduce accidental sharing mistakes</h3>
<p>Let&rsquo;s consider a slightly more involved pointer-related bug. Assume you are
trying to stabilize an RPC service that fails under high load. The following
part of the request middleware looks correct, but still the entire service goes
down whenever just one customer sends a high volume of requests:</p>
<pre><code>logEntry.IPAddress = req.IPAddress
logEntry.BackendServer = proto.String(hostname)
// The redactIP() function redacts IPAddress to 127.0.0.1,
// unexpectedly not just in logEntry *but also* in req!
go auditlog(redactIP(logEntry))
if quotaExceeded(req) {
    // BUG: All requests end up here, regardless of their source.
    return fmt.Errorf(&quot;server overloaded&quot;)
}
</code></pre>
<p>Did you spot the bug? The first line accidentally copied the pointer (thereby
sharing the pointed-to variable between the <code>logEntry</code> and <code>req</code> messages)
instead of its value. It should have read:</p>
<pre><code>logEntry.IPAddress = proto.String(req.GetIPAddress())
</code></pre>
<p>The new Opaque API prevents this problem as the setter takes a value
(<code>string</code>) instead of a pointer:</p>
<pre><code>logEntry.SetIPAddress(req.GetIPAddress())
</code></pre>
<h3 id="reflection">Motivation: Fix Sharp Edges: reflection</h3>
<p>To write code that works not only with a specific message type
(e.g. <code>logpb.LogEntry</code>), but with any message type, one needs some kind of
reflection. The previous example used a function to redact IP addresses. To work
with any type of message, it could have been defined as <code>func redactIP(proto.Message) proto.Message { ‚Ä¶ }</code>.</p>
<p>Many years ago, your only option to implement a function like <code>redactIP</code> was to
reach for <a href="/blog/laws-of-reflection">Go&rsquo;s <code>reflect</code> package</a>,
which resulted in very tight coupling: you had only the generator output and had
to reverse-engineer what the input protobuf message definition might have looked
like. The <a href="/blog/protobuf-apiv2"><code>google.golang.org/protobuf</code> module
release</a> (from March 2020) introduced
<a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect" rel="noreferrer" target="_blank">Protobuf
reflection</a>,
which should always be preferred: Go&rsquo;s <code>reflect</code> package traverses the data
structure&rsquo;s representation, which should be an implementation detail. Protobuf
reflection traverses the logical tree of protocol messages without regard to its
representation.</p>
<p>Unfortunately, merely <em>providing</em> protobuf reflection is not sufficient and
still leaves some sharp edges exposed: In some cases, users might accidentally
use Go reflection instead of protobuf reflection.</p>
<p>For example, encoding a protobuf message with the <code>encoding/json</code> package (which
uses Go reflection) was technically possible, but the result is not <a href="https://protobuf.dev/programming-guides/proto3/#json" rel="noreferrer" target="_blank">canonical
Protobuf JSON
encoding</a>. Use the
<a href="https://pkg.go.dev/google.golang.org/protobuf/encoding/protojson" rel="noreferrer" target="_blank"><code>protojson</code></a>
package instead.</p>
<p>The new Opaque API prevents this problem because the message struct fields are
hidden: accidental usage of Go reflection will see an empty message. This is
clear enough to steer developers towards protobuf reflection.</p>
<h3 id="idealmemory">Motivation: Making the ideal memory layout possible</h3>
<p>The benchmark results from the <a href="#lessmemory">More Efficient Memory
Representation</a> section have already shown that protobuf
performance heavily depends on the specific usage: How are the messages defined?
Which fields are set?</p>
<p>To keep Go Protobuf as fast as possible for <em>everyone</em>, we cannot implement
optimizations that help only one program, but hurt the performance of other
programs.</p>
<p>The Go compiler used to be in a similar situation, up until <a href="/blog/go1.20">Go 1.20 introduced
Profile-Guided Optimization (PGO)</a>. By recording the
production behavior (through <a href="/blog/pprof">profiling</a>) and feeding
that profile back to the compiler, we allow the compiler to make better
trade-offs <em>for a specific program or workload</em>.</p>
<p>We think using profiles to optimize for specific workloads is a promising
approach for further Go Protobuf optimizations. The Opaque API makes those
possible: Program code uses accessors and does not need to be updated when the
memory representation changes, so we could, for example, move rarely set fields
into an overflow struct.</p>
<h2 id="migration">Migration</h2>
<p>You can migrate on your own schedule, or even not at all‚Äîthe (existing) Open
Struct API will not be removed. But, if you‚Äôre not on the new Opaque API, you
won‚Äôt benefit from its improved performance, or future optimizations that target
it.</p>
<p>We recommend you select the Opaque API for new development. Protobuf Edition
2024 (see <a href="https://protobuf.dev/editions/overview/" rel="noreferrer" target="_blank">Protobuf Editions Overview</a>
if you are not yet familiar) will make the Opaque API the default.</p>
<h3 id="hybridapi">The Hybrid API</h3>
<p>Aside from the Open Struct API and Opaque API, there is also the Hybrid API,
which keeps existing code working by keeping struct fields exported, but also
enabling migration to the Opaque API by adding the new accessor methods.</p>
<p>With the Hybrid API, the protobuf compiler will generate code on two API levels:
the <code>.pb.go</code> is on the Hybrid API, whereas the <code>_protoopaque.pb.go</code> version is
on the Opaque API and can be selected by building with the <code>protoopaque</code> build
tag.</p>
<h3 id="rewriting">Rewriting Code to the Opaque API</h3>
<p>See the <a href="https://protobuf.dev/reference/go/opaque-migration/" rel="noreferrer" target="_blank">migration
guide</a>
for detailed instructions. The high-level steps are:</p>
<ol>
<li>Enable the Hybrid API.</li>
<li>Update existing code using the <code>open2opaque</code> migration tool.</li>
<li>Switch to the Opaque API.</li>
</ol>
<h3 id="publishing">Advice for published generated code: Use Hybrid API</h3>
<p>Small usages of protobuf can live entirely within the same repository, but
usually, <code>.proto</code> files are shared between different projects that are owned by
different teams. An obvious example is when different companies are involved: To
call Google APIs (with protobuf), use the <a href="https://github.com/googleapis/google-cloud-go" rel="noreferrer" target="_blank">Google Cloud Client Libraries for
Go</a> from your project. Switching
the Cloud Client Libraries to the Opaque API is not an option, as that would be
a breaking API change, but switching to the Hybrid API is safe.</p>
<p>Our advice for such packages that publish generated code (<code>.pb.go</code> files) is to
switch to the Hybrid API please! Publish both the <code>.pb.go</code> and the
<code>_protoopaque.pb.go</code> files, please. The <code>protoopaque</code> version allows your
consumers to migrate on their own schedule.</p>
<h3 id="enablelazy">Enabling Lazy Decoding</h3>
<p>Lazy decoding is available (but not enabled) once you migrate to the Opaque API!
üéâ</p>
<p>To enable: in your <code>.proto</code> file, annotate your message-typed fields with the
<code>[lazy = true]</code> annotation.</p>
<p>To opt out of lazy decoding (despite <code>.proto</code> annotations), the <a href="https://pkg.go.dev/google.golang.org/protobuf/runtime/protolazy" rel="noreferrer" target="_blank"><code>protolazy</code>
package
documentation</a>
describes the available opt-outs, which affect either an individual Unmarshal
operation or the entire program.</p>
<h2 id="nextsteps">Next Steps</h2>
<p>By using the open2opaque tool in an automated fashion over the last few years,
we have converted the vast majority of Google‚Äôs <code>.proto</code> files and Go code to
the Opaque API. We continuously improved the Opaque API implementation as we
moved more and more production workloads to it.</p>
<p>Therefore, we expect you should not encounter problems when trying the Opaque
API. In case you do encounter any issues after all, please <a href="https://github.com/golang/protobuf/issues/" rel="noreferrer" target="_blank">let us know on the
Go Protobuf issue tracker</a>.</p>
<p>Reference documentation for Go Protobuf can be found on <a href="https://protobuf.dev/reference/go/" rel="noreferrer" target="_blank">protobuf.dev ‚Üí Go
Reference</a>.</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <p>
        
          
            <b>Next article: </b><a href="/blog/survey2024-h2-results">Go Developer Survey 2024 H2 Results</a><br>
          
        
        
          
            <b>Previous article: </b><a href="/blog/15years">Go Turns 15</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/play.js"></script>

</div>
          </li>
  
        </ul>
      </div>
  
      <div class="card">
        <h2>Reddit</h2>
  
        <h3 class="subreddit">r/gamedev</h3>
        <ul class="item-list">
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jw3gtn/a_psa_regarding_the_importance_of_posture/" target="_blank">A PSA Regarding The Importance Of Posture</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Although I have to take breaks in between typing this, I feel it&#39;s important enough of a topic that I&#39;ll deal with the pain. In this post I&#39;ll describe a timeline of mistakes that led to miserable medical complications. My hope is that I can reach others with the &quot;not gonna happen to me&quot; mindset that I used to have and hopefully persuade them to shake off the thought. Apologies in advance if this just sounds like rambling.</p> <p>With that out of the way, I&#39;ll start with myself.</p> <h1>GAMEDEV&#39;S ROLE IN MY LIFE</h1> <p>Probably like a lot of people here, I had dreams of making my own games when I grew up. That dream faded to the background for most of my life until around 4-5 years ago, where I finally got to experience solo development when I began creating mods for Doki Doki Literature Club. With the game being made in Ren&#39;Py, it was surprisingly moddable. During those ~2 years I got to experience researching and working with freelance artists and musicians, as well as learning the importance of managing your time between communicating and coding while waiting for assets. I learned about networking and creating bridges between peers within the community, opening up other opportunities for collaborative projects.</p> <p>I was always a creative person, and that&#39;s the major source of my happiness. Being able to tell a story and receive tangible proof of its impact gave me an incredible sense of purpose that I lacked in my &quot;waste money on college classes because I don&#39;t know what I want to do with my life&quot; phase. As a writer foremost, visual novels were my preferred medium, although I began branching out to 3D development. I spent <em>A LOT</em> of time studying the fundamentals of animation and found it was also a source of enjoyment for me. I was on a hot streak of taking online courses for different gamedev related fields and was excited to learn new skills for the first time since my sophomore forensics class in High School.</p> <p>Even with all these huge improvements to my life, it was probably where my problems started. Unbeknownst to me, my time at the computer was slowly causing changes in my body.</p> <h1>POOR POSTURE AND THE CONSEQUENCES</h1> <p>To keep this part shorter, I&#39;ll sum up the unfortunate events that followed my introduction to the gamedev scene. My mental health was declining due to certain medications failing, causing me to quit my job. Coincidentally, the lease for the condo my best friend &amp; I were living in was ending that month so I moved back into my parents&#39; house. Years of unemployment and spiraling depression later, and I was finally in a position where I felt stable enough to make some steps towards finding a suitable career. I want to stress that throughout these ~3 years I spent <strong>all of my time</strong> playing video games at my computer and spending the rest of available time working on (and then abandoning) personal Unity/Unreal projects or continuing a novel I was writing at the time. Maybe 10 hours a day with rarely leaving the room.</p> <p>July of 2024 I felt a stretching pain in my neck when I woke up, and I assumed I pulled something in my sleep. It didn&#39;t go away over the next few days, and ibuprofen didn&#39;t help much. In the following week the pain spread to the muscles in my arms and legs. It was a burning kind of pain like when you&#39;re exercising. I saw a doctor and they gave me a referral to a rheumatologist. They said they were booked and would call back when an appointment is available.</p> <p>A month passes. Then two more. Then three more. A dozen blood tests, doctor visits, orthopedic and eventually the ER. Nobody knew what was wrong, every test came back negative. Throughout this time I couldn&#39;t sleep, and I became unable to use my mouse &amp; keyboard without feeling that ache/burning after 5 minutes or so. All of my hobbies were too painful to enjoy, and the time I could spend on them became shorter and shorter. My boredom and frustration led me to abusing nicotine pouches and gaming with a controller almost the entire day, since doing any sort of coding or writing was impossible. After a period of time even that was too painful to enjoy, and my chair became too painful for my legs to sit. One half of both hands became numb, directly down the middle in between the ring and middle finger. I experienced this before with Ulnar Nerve Entrapment and had a surgery to correct it, but this seemed different considering the symptoms were now bilateral.</p> <p>Then I found <a href="https://www.reddit.com/r/RSI/comments/1i73sng/how_to_know_if_you_have_thoracic_outlet_syndrome/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">this post</a> . The symptoms for Thoracic Outlet Syndrome matched up with what I had been experiencing, <strong>for the most part</strong>. About 2 weeks ago I had an x-ray of my cervical spine (from the head to the shoulders), which looked like <a href="https://imgur.com/a/W9KqiLX">this</a> . <strong>(DON&#39;T VIEW IF YOU DON&#39;T LIKE SKELETONS)</strong></p> <p>The doctor that viewed the images determined that inward bend in the spine was &quot;mild reversal of the normal cervical lordosis, could be spasm or positional.&quot; Regardless of if I disagree with the &quot;mild&quot; part of that assessment, this altered curvature was indicative that something was <strong>actually happening to me</strong>. I noticed I couldn&#39;t sit or lay down comfortable, no matter what. My body always felt slightly off kilter, like one shoulder was lower than the other. I felt like I lost the ability to stay conscious of my posture and that my body would reposition itself on its own.</p> <p>Finally, at the end of the timeline, I found <a href="https://esportshealthcare.com/gaming-posture/">this article</a> that connected almost all the dots in my mind. All of it was related to how I was sitting at my desk and how I was using my keyboard, compounded by the amount of hours I spend working on it. The neck, shoulders, wrists and thumbs, legs, back, all of it. If I were to use my own words, I&#39;d say the TOS turned my body into a Rube Goldberg contraption of esports injuries. I&#39;m hoping I&#39;ll be able to fix all of these conditions with physical therapy and finally be able to make games again.</p> <h1>THE LESSON I LEARNED</h1> <p>This is an obvious warning that all of us have heard and read from others. I didn&#39;t think much of it, just &quot;straighten my back if I notice I&#39;m slouching&quot; and that&#39;s it. But I didn&#39;t take it seriously, and it ruined me. I&#39;m currently forced to wait until April 30 for an EMG before taking any next steps. Who knows, maybe all this was caused by a different medical condition and my poor posture just accelerated it.</p> <p>I seriously can&#39;t stress this enough. If gamedev is a passion that&#39;s important to you, <em>please</em> take whatever steps you can to take care of your body while you&#39;re working, especially with long sessions.</p> <p>Thank you for your time, and good luck on your endeavors!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/GlazedInfants"> /u/GlazedInfants </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jw3gtn/a_psa_regarding_the_importance_of_posture/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jw3gtn/a_psa_regarding_the_importance_of_posture/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jw0m1u/anyone_else_feel_tired_after_working_for_money/" target="_blank">Anyone else feel tired after working for money paying job to work on their free time on game development?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I work as a Software Developer for 9-to-5 job. It is very demanding sometimes for me to concentrate on it and it pays well. But my passion is to work on video games. Lately I&#39;ve been more and more exhausted by my work and don&#39;t have any energy to work on making games even though I wanted to. I can go to gym and run after work, but thinking ain&#39;t a thing after work I usually have power anymore to do. Do you get what I mean? Does anyone else have this? Have you switched job to easier one for the mind or take days off from work to do your own thing? I have done gamejams in the past, but I feel like I&#39;m pushing it too much to a point I burnout and don&#39;t have energy to work for the day job after that for few days. Do you think there is a limit how much human can have attention and thought for one day? Or am I in a state of burnout again?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Flashy-Brick9540"> /u/Flashy-Brick9540 </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jw0m1u/anyone_else_feel_tired_after_working_for_money/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jw0m1u/anyone_else_feel_tired_after_working_for_money/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jvz3om/the_birth_of_call_of_duty/" target="_blank">The Birth of Call of Duty</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hello again, My name is Nathan Silvers, I&#39;m one of only 27 people who can say &quot;I Created Call of Duty&quot;. Today I&#39;m telling my point of view on the creation of Call of duty, where I worked as a Level Designer creating single player campaign missions:</p> <p>Not to diminish actual child-birth. I have two kids of my own, but I couldn&#39;t think of a better word to describe the creation of Call of Duty.</p> <p>It was birthed.</p> <p>Most everyone shared the same sentiment and it was one of the major factors to moving on to Infinity Ward from 2015. The opportunity to grow and do our own thing. World War 2 wasn&#39;t our first choice, it was meant to be a stepping stone to something different. It was simple, establish ourselves with this easy no-brainer add on for our wildly popular MOHAA game, and then Shop ourselves around for funding or however that &quot;Business stuff&quot; works, for the next thing. Nothing was off the table, including RTS games, fantasy RPG, Epic Sci-Fi FPS. The memory here is so vague, but I was reminded recently by Brad Allen himself that the sentiment around the office was &quot;Success breeds autonomy&quot;. It&#39;s something we clung to at the start. A caret dangled in front of us.</p> <p>Autonomy never came..</p> <p>This is a personal account, a point of view, though I imagine my peers at 2015 going through Infinity Ward can reflect some of the same sentiment too.</p> <p>Too be honest, the release of my first AAA breakout game Medal of Honor: Allied Assault, while it was exciting and a high, at first, it left me with a low following it. A reminder that I was still running away from &quot;Normal&quot; life and back to dealing with complex emotions following an awkward non-standard teenage-life development. One thing I knew at the time, was that the Gas pedal of Game Development wasn&#39;t working for me, developmentally. I was still running away. Kind of ready to face my demons a little. This new season had me being anti-crunch, work smarter, not harder.</p> <p>I would do some days of crunch but go home more exercise a little bit, eat healthier. The alternative, was crash-and-burn.</p> <p>One thing to note, that once we agreed to do this &quot;MOH killer&quot;, despite having a reaction to it, that we didn&#39;t want to. We were all-in. World War 2, had many stories left to tell. It was a chance to try it with our &quot;seasoned&quot; team and do-over some things we might not have done had we continued with the MOH:AA game and tools. I remember a meeting where we came together, and tried to get this behemoth of a ball rolling and the motivating slogan came out of it. &quot;Kill the baby&quot;.. Sweat and tears went into developing MOHAA, A lot of it was due to our youth and we were ok with Proving our position.</p> <h1>A fresh start</h1> <p>When I say fresh, I mean fresh in all senses. The office was as bare bones as it gets. The Tools and advancements that we had made to the Quake 3 (in addition to Rituals Enhancements) were all Gone! We were given access to Return to Castle Wolfenstein as a base. There was a lot of things that we would miss, but on many fronts it was an opportunity to do-over the things that we wanted and skip on the things we didn&#39;t want.</p> <p>We created a new new Scripting language. C-Style. We came up with new visibility setup that would hopefully handle us putting more details in open spaces. Lots of animation stuff, Asset Management was a new thing where assets were no longer text edited. The inherited a WW2 themed texture set even though we&#39;d have to come up with our own art it was something we could get quick prototypes that actually had texture. Looking back from a tools perspective, we may have also adapted some really cool localization tools from Raven ( I believe ).</p> <p>We also settled on a really simple answer for the Terrain problems we had. All I needed was a curve patch where I could control the vertices specifically, This was far better than the &quot;Manual bumpification&quot; or wrestling with the intersections of terrain system and curves. Roads could bend and have a 1:1 connection with the terrain next to them.</p> <h1>The Hook</h1> <p>Much ado was made about the hook of the game, we couldn&#39;t just be a MOHAA clone, Jason was adamant, &quot;We need a hook!&quot;. The hook that we came up with was, that &quot;In war no one fights alone&quot;.</p> <p>The game was going to, as much as possible, be about being in war with a team.</p> <h1>My Involvement</h1> <p>I remember doing some early prototypes for outdoor area&#39;s, I wanted to challenge the new portal system, think &quot;Favela&quot; for MW2 but a lot more primitive. It was a work that would get thrown out. I think the priority with Portals was that while inside of a building, the windows and doors would be tight clips to the outside perspective, things drawing over each other would cost a lot. The portals ended up being quite tricky to leverage in large organic spaces, too many of them and performance would degrade. Buildings being largely demolished with non-square openings would also prove to be tricky. I became the resident expert on optimizing levels with Portals. It was my thing.. Very boring, non-glamorous but necessary for elevating all the things that we wanted to do.</p> <p>I was also beginning to become the special teams guy with vehicles in the game, something I would carry on to later titles. I wrote a lot of systemic vehicle animation script ( guys getting into, out of vehicles ).</p> <p>We still had to do everything on the levels, but I think in this game we ended up playing to each others strengths a bit more and moving around. Sometimes we&#39;d script each others geometry. I had strengths in both scripting and this new portal system. I could do some geometry too.</p> <h1>All the Tanks</h1> <p>The tank missions, I wanted to be lit by sunny day light, I wanted the blending of terrain, the river, the boundaries all to be seamless. I was really proud to be able to do these roads and geometry that didn&#39;t bubble around and morph to lower their detail. It was low as possible polygon count landscape with non of those &quot;terrain system&quot; artifacts. Even under the trees I added little patches of other texture to make the trees feel more connected (as opposed to a hard edge clipping with the solid white snow). Our re-do on terrain was so much more simplistic. I think it was also encouraged by graphics card development at the time, transform and lighting or, T&amp;L. Where engineers were happier about us just dumping a bunch of geometry into the levels.</p> <p>The scripting in the tank mission is intentionally simplistic, a whole game can be made about tank simulation but I wanted this mission to not outstay its welcome. It was meant to break up the First person shooting, Give you something different, and not break the bank. These tanks are orchestrated on a linear path, they have dynamic turrets that shoot you if you don&#39;t do anything. Nothing to it!</p> <p>The next mission was a little more advanced, driving in the city with destructible buildings. There were sneaky soldiers with RPG&#39;s and destructible buildings. I did all the Scripting and geometry for this mission. Again, short and sweet was my goal. Fun fact, we made games in ~18 months back then, with 20 something people. It was good to understand the limitation and work within reasonable self expectation. I knew my limitations and stand by the decisions to keep it simple. There were so many other, more important facets of the game that needed me!</p> <h1>Car Ride</h1> <p>&quot;Carride&quot; was another level I worked on, This is a place where I would exercise tricky portal placement and mastery of the new terrain system. In some sections we&#39;d place a tree wall closer to the road to create a portal. It was a fun organic sprawl that we could race a car through. I only did geometry for this. The scripting was done by Chad Grenier . The new terrain system had support for overlapping geometry that we could create blends on, a grass going into dirt, etc. All of that can be seen in here with a keen eye![ ](<a href="https://x.com/BlitzSearch/article/1910041521858261046/media/1910034906253778944">https://x.com/BlitzSearch/article/1910041521858261046/media/1910034906253778944</a>)</p> <h1>TruckRide</h1> <p>Truckride is probably my favorite contribution to this Call of Duty, Outside of maybe Half-life&#39;s train ride intro, games didn&#39;t really do this so there was no frame of reference. It was challenging to get all those things to align. I would liken it to an uncut scene in a movie, you know where they go a minute with action and don&#39;t cut to a different camera. That guy that jumps from vehicle to vehicle really got to use the lerp function ( it doesn&#39;t always read well ).</p> <p>It&#39;s really something when you start pulling in known Actors to do the voiceovers, Jason Statham himself was doing things, and I got to instruct dialogue. When I needed the player to be told about where the &quot;Lorries&quot; were while riding the truck I&#39;d make a request and then get the VO. I always thought of this as a career highlight. Next to 50 Cent popping his head into my office to say &#39;Sup!&#39; but that&#39;s later, way later (spoiler alert?).</p> <p>I believe this map had a block out when I got it ( I want to say Ned Man?. ). Boy 20+ year old memory sure does let me down sometimes. I did a lot of the texturing and those cool mountains in the background. I think we got an extended grid space in this game so we could do those things.</p> <h1>Airfield</h1> <p>Airfield was another mission. I did all the geometry and Scripting for this. I had an &quot;Ideal crash path&quot; for different places on the path. If I could show you the in editor version, you&#39;d see a really cool spider web of paths for the planes.</p> <p>I loved doing those fish-tail truck turns. None of that is real physics and I&#39;m basically an animator with a vehicle spline path. So are the crashes for the cars in Truckride. I think Airfield might be the only place where I scripted an area with the player on his feet! though it would be brief, I made sure to get the dead guy falling off the balcony in there.</p> <p>I think that&#39;s it for my main missions. I was often pulled in to help optimize levels and whenever you see AI&#39;s get in and out of vehicles there&#39;s a likely hood that I was involved with that.</p> <h1>Continued Comradery</h1> <p>Hackey sack was traded for Volley ball, New restaurants for lunches was refreshing. My Buddy Mackey Kept me sharp with some Puyo-Pop and Tetris Attack (Pokemon puzzle?). We still did lots of those extra curriculars to team build and we had a fantastic trip to E3 where once again, we stole the show! This time with a playable demo and a booth demo if I remember correctly.</p> <p>I kept these guys at arms length, you know, the things we were doing were tempting lifelong friendships and at this point I understood that this was business. I never let them in on some of the personal stuff that I was going through, I didn&#39;t want to get planted in what I was considering volatile soil if that makes sense. But I was thinking about planting. You know, family people that are ride-or-die. </p> <p>It&#39;s one of the regrets I have about how I conducted myself there, I still to this day consider those guys friends but those friendships have not been nurtured, nor tended to. If you are following me on You Tube I have been trying to do reconnects, and really enjoying it, in front of a camera to share.</p> <h1>Parting ways</h1> <p>At the end of this game, It was a personal decision to part ways. I wanted to get closer to home. I hadn&#39;t really kept in touch with family that well during my time in Tulsa, OK. There was one visit from my family who was super cool and drove the U-haul full of my big stuff from home and my cat. The poor cat had some long days at the apartment. </p> <p>With the company now in LA, I believe I was there initially for a while as I was roomates with Carl Glave.. The events are jumbled and weird. I vaguely remember coming home to Vancouver, WA, then going to Tulsa, OK for just a 3 week stay before the company moved to LA. </p> <p>My solution was to research the best, closest to home option, a sort of middle ground. I could go there, and visit my family more often. You know be connected with humans on a not-for-work basis. </p> <h1>Monolith</h1> <p>Monolith was is based out of Seattle, Washington. Seattle is just 3 hours north of my actual hometown in Vancouver, Washington. I was checking out their games &quot;No one lives Forever&quot;, &quot;Tron&quot;. They had a certain charm and I felt like that could work. This was my one getting hired outside of 2015 experience, where I got do do a crummy interview but I&#39;m sure that having &quot;Call of Duty&quot; And &quot;Medal of Honor&quot; on my resume was the deciding factor for being hired.</p> <p>I made the move there, the game that I was working on with them was F.E.A.R.<br/> Far from what attracted me to the company. I didn&#39;t last there, and there are a number of factors that had me leaving early.</p> <ul> <li>20-30Hz, Sounds silly, but I was huge on framerate. I didn&#39;t care to work like that</li> <li>FEAR, I grew up a Christian, and this should have been a bigger red-flag for me but I was doing my game dev thing.. FEAR is a device of the enemy and here I was Promoting it. You could say that about a lot of game development evils including some of the things that happened in Call of Duty in my later years, but this one was really pressing me. </li> <li>Still too far from home, I found myself doing the 3 hour drive to and from, every weekend to visit family. This isn&#39;t much better than a 2 hour flight + airport time.</li> <li>Call of Duty, is a tough act to follow. </li> </ul> <p>I think I was there for maybe 3 months, I had to break an apartment lease. I moved all the way back, to moms house, where I could really process and figure out what was next, what do I want to do with my life now.</p> <p>Stay tuned for the next article, where I talk a bit about the in-between time. Some gamer oriented sharpening of skills and MOD development. Then Getting hired at Gray Matter and the exciting return to Infinity Ward.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Front-Independence40"> /u/Front-Independence40 </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jvz3om/the_birth_of_call_of_duty/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jvz3om/the_birth_of_call_of_duty/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jvwwhn/i_made_a_free_tool_that_generates_all_possible/" target="_blank">I made a free tool that generates all possible Steam store graphical assets from a single artwork in one click</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Steam requires you to have your game&#39;s artwork in a lot of different resolutions and aspect ratios, and I always found it very time-consuming to resize and crop my artwork to fit all these non-standard sizes.</p> <p>So I built a completely <a href="https://www.steamassetcreator.com/">free tool</a> that fixes this problem.</p> <p><a href="https://www.steamassetcreator.com/">https://www.steamassetcreator.com/</a></p> <p>Simply upload your crispy high-res artwork, choose from one of the preset resolutions (i.e., Header Capsule, Vertical Capsule, etc.), adjust the crop to liking, and download instantly! Optionally, you can also upload your game&#39;s logo, which overlays on top of your artwork.</p> <p>The images you upload stay in your browser&#39;s storage and never leave your system, and there are no ads!</p> <p>If you get the time to try it out, please let me know what you think! I have plans to add some more features, like a dynamic preview of how it would actually look on Steam before you download the final image.</p> <p>I&#39;d love some feedback on what you think!</p> <p>Small 1 min walkthrough on how it works: <a href="https://youtu.be/BSW1az_216s">https://youtu.be/BSW1az_216s</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/supanthapaul"> /u/supanthapaul </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jvwwhn/i_made_a_free_tool_that_generates_all_possible/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jvwwhn/i_made_a_free_tool_that_generates_all_possible/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jvwa13/i_released_my_first_game_on_steam_and_it_got/" target="_blank">I released my first game on Steam, and it got destroyed in reviews... Here's how I tried to save it. (RNG in games)</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>A few months ago, I launched my very first solo-developed game on Steam. It started as a simple game jam concept, but I believed in its potential and decided to turn it into a full release.</p> <p>However, the game garnered mixed reviews. While some players enjoyed it, many pointed out serious flaws, and the negative reviews quickly piled up. Instead of giving up, I took all the feedback to heart and spent the following months working non-stop on updates to fix the biggest issues.</p> <p>In this post, I want to share my experience, what I learned as a solo indie dev, and hear your thoughts. If you&#39;re a developer who has been in a similar situation, how did you handle it? If you&#39;re a player, how do you feel about these kinds of issues in indie games?</p> <h1>üìñ The Context ‚Äì My Game (and Its Core Flaws)</h1> <p>The game is a <strong>tower defense roguelike</strong> with a twist : <strong>a reversed dungeon crawler</strong>. You play as the <strong>guardian of a labyrinth</strong>, trying to stop an adventurer from escaping. </p> <p>You can place monsters and traps to slow the adventurer down and keep him trapped. If he escapes, it&#39;s game over‚Ä¶</p> <p>But this concept had some <strong>major design flaws</strong> that I hadn‚Äôt fully realized until players pointed them out.</p> <h1>1. Pacing Issues ‚Äì Too Many Dead Moments</h1> <p>The adventurer grows stronger as he levels up. Your monsters remain at a fixed strength, but you unlock stronger ones over time to keep up with his increasing power.</p> <p>üî¥ <strong>The problem</strong>: If you quickly place a high-tier monster, it can hold the adventurer back for multiple levels without effort. This creates long stretches of gameplay where there‚Äôs <strong>no challenge</strong>, leading to boredom and frustration.</p> <p>‚úÖ <strong>The Fix: The Anger Mechanic</strong></p> <p>I introduced a new system: <strong>Anger</strong>.</p> <ul> <li>The adventurer gradually builds up <strong>rage</strong> when stuck against a monster for too long.</li> <li>This increases his stats, making each encounter progressively harder rather than shifting difficulty in big, abrupt spikes.</li> <li>It also adds a <strong>strategic layer</strong>: players can choose to make the adventurer angrier (to earn more gold) or try to keep him calm to make battles easier.</li> </ul> <p>This update dramatically improved the <strong>flow of difficulty</strong> and reduced the long, boring moments.</p> <h1>2. RNG Frustration ‚Äì When Luck Works Against You</h1> <p>Each turn, the game offers a selection of random cards to build your defense. But sometimes, players <strong>desperately need a specific card</strong>, and bad luck can make them wait way too long.</p> <p>üî¥ <strong>The problem</strong>: Some players felt helpless after dozens of turns without getting the card they needed. RNG-based mechanics are always tricky in one way or another...</p> <p>‚úÖ <strong>The Fix: Card Storage &amp; The Merchant Update</strong></p> <p>To give players more control over randomness, I added:</p> <ul> <li><strong>A storage system</strong> ‚Üí Players can now <strong>save</strong> cards for later instead of being forced to use or discard them immediately.</li> <li><strong>A new shop system</strong> ‚Üí Occasionally, a <strong>Merchant</strong> appears, allowing players to buy the exact cards they need.</li> <li><strong>Additional leveling system, upgrades &amp; talents</strong> to further refine deck-building strategy.</li> </ul> <p>This reduced frustration while <strong>adding depth and content</strong> at the same time.</p> <h1>üõ†Ô∏è The Result ‚Äì Two Major Updates So Far</h1> <p>These changes formed the <strong>Anger Update</strong> and the <strong>Merchant Update</strong>, which aimed to fix the core issues players faced at launch.</p> <p>Now that these problems are mostly resolved, I can now focus on balancing the game&#39;s difficulty, adding <strong>more content</strong> etc.</p> <p>But I still have the feeling that something is wrong despite the updates, and that players will complain as long as there&#39;s an ounce of RNG left. And yet, it&#39;s an important component in the design of this game (as in Heartstone or Teamfight tactics) and can&#39;t be totally removed.</p> <p>All I can do now is give players more and more tools to counter these bad RNGs.</p> <h1>üéì What I Learned</h1> <ul> <li><strong>Listening to player feedback is crucial</strong> ‚Äì Sometimes, problems aren&#39;t obvious until people start playing your game. If the players feel that something is wrong, there are certainly things to fix (even if it&#39;s not exactly what they&#39;re pointing to).</li> <li><strong>More playtesting is always needed</strong> ‚Äì Especially with experienced players from the same genre, to catch potential issues before launch. (mine was a bit rushed)</li> <li><strong>Fixing problems can also create new, exciting mechanics</strong> ‚Äì Instead of just patching flaws, updates can enrich the overall experience. It‚Äôs a win-win for players !</li> </ul> <h1>üí¨ What Do You Think?</h1> <ul> <li><strong>Indie devs</strong> ‚Äì Have you ever dealt with negative reviews? How did you recover from a rough launch, and were you able to improve your game‚Äôs rating? How have you handled randomness in your games?</li> <li><strong>Players</strong> ‚Äì How do you feel about RNG in games? When do you like it? When do you hate it?</li> </ul> <p>If you&#39;ve played my game before, or if you&#39;re interested in checking it out, I&#39;d love to hear your thoughts on these updates and how they impact the experience from your perspective ! </p> <p>Here‚Äôs the steam page : <a href="https://store.steampowered.com/app/2940990/Maze_Keeper/">https://store.steampowered.com/app/2940990/Maze_Keeper/</a></p> <p>See you in the comments, cheers ! ü§ó</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/waenII"> /u/waenII </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jvwa13/i_released_my_first_game_on_steam_and_it_got/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jvwa13/i_released_my_first_game_on_steam_and_it_got/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jvq9wm/the_existential_dread_of_making_ingame_ui/" target="_blank">The existential dread of making in-game UI</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>good day everyone! I was recently going thru a few posts on here and notices that a lot of people seem to absolutely despise making UI for their games. Is it really that bad? Can you please elaborate a little on what part of that process you dread the most and how youre going about solving it? </p> <p>thanks yall!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/-night_knight_"> /u/-night_knight_ </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jvq9wm/the_existential_dread_of_making_ingame_ui/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jvq9wm/the_existential_dread_of_making_ingame_ui/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jvbazl/my_steam_page_launch_surpised_me_beyond_my/" target="_blank">My Steam Page Launch surpised me beyond my Expectations</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><h1>Post Mortem: Steam Page Launch for Fantasy World Manager</h1> <p>By Florian Alushaj<br/> Developer of Fantasy World Manager</p> <p>Steam Page for Reference: <a href="https://store.steampowered.com/app/3447280/Fantasy_World_Manager/">https://store.steampowered.com/app/3447280/Fantasy_World_Manager/</a> , this is not intended as self-promotion but i think its good to have it as reference for people that want to take their own impression.</p> <p><strong>Sources for everything mentioned in the Post:</strong></p> <p><strong>4Gamer Twitter Post:</strong></p> <p><a href="https://x.com/4GamerNews/status/1909127239528300556"><strong>https://x.com/4GamerNews/status/1909127239528300556</strong></a></p> <p><strong>4Gamer Website Post:</strong></p> <p><a href="https://www.4gamer.net/games/899/G089908/20250407027/"><strong>https://www.4gamer.net/games/899/G089908/20250407027/</strong></a></p> <p>SteamDB Hub Followers Chart:</p> <p><a href="https://steamdb.info/app/3447280/charts/">https://steamdb.info/app/3447280/charts/</a></p> <p>-&gt; 50 Hub followers, 70 creator page followers , 988 wishlists , 40 people on discord</p> <h1>Date of Launch</h1> <p>April 6/7, 2025</p> <p>After months of development and early community engagement, the Steam page for Fantasy World Manager officially went live on April 6/7th, 2025. It marked the first public-facing milestone for the game, and a key step in building long-term visibility and community support ahead of my planned Q4 2025 release.</p> <h1>What is Fantasy World Manager?</h1> <p>At its core, Fantasy World Manager is a creative simulation sandbox game that puts you in charge of building your own fantasy world from the ground up.<br/> Players can design, build, and customize everything ‚Äî from zones, creatures, and items to quests, events, NPCs, and dungeons. The simulation layer then brings the world to life as inhabitants begin to interact, evolve, and shape their stories.</p> <p><strong>The core loop is about creative freedom ‚Äî the management and simulation elements are the icing on the cake.</strong></p> <h1>Launch Highlights</h1> <ul> <li><strong>Steam Page Live:</strong> April 6,7, 2025 (it was online a few hours before april 7th)</li> <li><strong>Wishlists milestone:</strong> around1,000 wishlists within the first 2 days</li> <li><strong>Languages Supported:</strong> English, German, Simplified Chinese, Japanese, French, Russian, Turkish (with plans to expand further)</li> <li><strong>Media Coverage:</strong> The well-known Japanese site <strong>4Gamer</strong> published a feature on the game, bringing in early international attention, especially from Japanese players</li> <li><strong>Reddit virality</strong>: frequent dev updates on Reddit (<a href="/r/godot">r/godot</a>) reached over 1 million views combined, helping build pre-launch momentum</li> </ul> <h1>Community &amp; Press</h1> <p>I leaned heavily on Reddit, Twitter (X), and developer communities (particularly within the Godot ecosystem) to build awareness. The feedback was overwhelmingly positive ‚Äî especially around the procedural world generation, editor freedom, and overall concept as a kind of ‚Äúsandbox god sim meets MMO theme park.‚Äù</p> <p>Japanese players in particular responded to the 4Gamer article with enthusiasm, comparing the game to TRPG-style worldbuilding and Dungeon Master tools.</p> <h1>‚úÖ What Went Well</h1> <ul> <li>Strong community support pre-launch through devlog posts and Reddit interaction</li> <li>Localization-ready Steam page in 7 major languages helped expand wishlist diversity</li> <li>Press hit from 4Gamer gave us credibility in the Japanese market</li> <li>Quick growth to 1,000+ wishlists thanks to Reddit virality and Discord engagement</li> <li>Clear messaging on the creative focus: Players understood the &quot;build/design first, simulate second&quot; concept</li> </ul> <h1>‚ùå What Could Be Improved</h1> <ul> <li>No Trailer uploaded, as i am struggling with actually making a good one</li> <li>The Steampage needs to showcase more gameplay mechanics from player perspective</li> <li>No Western media pickup (yet): While 4Gamer covered the game, no major English-speaking outlets (e.g. IGN, PC Gamer) have picked it up so far</li> </ul> <h1>Next Steps</h1> <ul> <li>Finalize press kits and continue pitching smaller/medium-sized gaming sites ‚Äî especially in the top 15 Steam languages</li> <li>Reach out to YouTubers and streamers with a demo preview build</li> <li>Prepare for inclusion in a Steam Next Fest or other event</li> <li>Continue refining UI/UX and communicating core gameplay in visual form</li> <li>Expand Discord &amp; community-building efforts</li> </ul> <p>Huge thanks to everyone who has followed the game so far, added it to their wishlist, or gave feedback along the way. The response from the global community ‚Äî across Reddit, Steam, and even Japan ‚Äî has been incredibly motivating. This is just the beginning of what Fantasy World Manager can become.</p> <p>thank you!</p> <p>‚Äî</p> <p>Florian Alushaj<br/> Solo Developer ‚Äì Fantasy World Manager</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Hot-Persimmon-9768"> /u/Hot-Persimmon-9768 </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jvbazl/my_steam_page_launch_surpised_me_beyond_my/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jvbazl/my_steam_page_launch_surpised_me_beyond_my/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1jv8lok/after_16_years_i_finally_launched_jurynow_a_game/" target="_blank">After 16 Years, I Finally Launched JuryNow ‚Äî A Game Where 12 Real People Decide Your Dilemma in 3 Minutes</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Good Afternoon Game Developers</p> <p>I&#39;m a 58F so not the typical demographic here! I‚Äôve spent the last <em>16 years</em> obsessing over a single idea:<br/> <strong>What if we could get instant, unbiased, human verdicts‚Äîlike a digital jury‚Äîon anything in life?</strong></p> <p>That turned into <strong>JuryNow</strong>:<br/> A real-time online game where you ask <em>any binary question</em> (from deep life dilemmas to fashion face-offs), and <strong>12 random, diverse strangers</strong> vote on it within 3 minutes.</p> <p>üß† Not AI.<br/> ‚ù§Ô∏è Not your friends.<br/> üåç Just <em>pure collective intelligence</em> from real people around the world.</p> <p>While you wait, you do <strong>JuryDuty</strong>‚Äîvote on other people‚Äôs questions for 3 minutes. No comments. No rabbit holes. Just snap decisions from anonymous minds.</p> <p>I built this as a kind of antidote to AI, and a means to connect instantly to a group of 12 completely diverse people around the world, different ages, professions, cultures....just like a real jury. Now it&#39;s just launched and it&#39;s human, fast, fun, and kind of addictive - there is a definitely a dopamine hit when you receive your verdict. </p> <p>It‚Äôs now live at: <a href="http://www.jurynow.app"><strong>www.jurynow.app</strong></a> <strong>but....</strong>when there are less than 13 people playing at the same time, the verdict switches into an AI generated mode (there is a sign above) but hopefully when there are plenty of people playing regularly, that MVP feature will be dismantled.<br/> I‚Äôd love your feedback, (gentle) criticisms‚Äîor just a random verdict on whether I should‚Äôve launched sooner. üòÖ</p> <p>Thank you!</p> <p>Sarah</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/JuryNow"> /u/JuryNow </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1jv8lok/after_16_years_i_finally_launched_jurynow_a_game/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1jv8lok/after_16_years_i_finally_launched_jurynow_a_game/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1i05ral/introducing_rgamedevs_new_sister_subreddits/" target="_blank">Introducing r/GameDev‚Äôs New Sister Subreddits: Expanding the Community for Better Discussions</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><h1>Existing subreddits:</h1> <p><a href="/r/gamedev">r/gamedev</a></p> <p>-</p> <p><a href="/r/gameDevClassifieds">r/gameDevClassifieds</a> | <a href="/r/gameDevJobs">r/gameDevJobs</a></p> <p><em>Indeed, there are two job boards. I have contemplated removing the latter, but I would be hesitant to delete a board that may be proving beneficial to individuals in their job search, even if both boards cater to the same demographic.</em></p> <p><em>-</em></p> <p><a href="/r/INAT">r/INAT</a><br/> <em>Where we&#39;ve been sending all the REVSHARE | HOBBY projects to recruit.</em></p> <h1>New Subreddits:</h1> <p><a href="/r/gameDevMarketing">r/gameDevMarketing</a><br/> <em>Marketing is undoubtedly one of the most prevalent topics in this community, and for valid reasons. It is anticipated that with time and the community‚Äôs efforts to redirect marketing-related discussions to this new subreddit, other game development topics will gain prominence.</em></p> <p><em>-</em></p> <p><a href="/r/gameDevPromotion">r/gameDevPromotion</a></p> <p><em>Unlike here where self-promotion will have you meeting the ban hammer if we catch you, in this subreddit anything goes. SHOW US WHAT YOU GOT.</em></p> <p>-</p> <p><a href="/r/gameDevTesting">r/gameDevTesting</a><br/> <em>Dedicated to those who seek testers for their game or to discuss QA related topics.</em></p> <p>------</p> <p>To clarify, marketing topics are still welcome here. However, this may change if <a href="/r/gameDevMarketing">r/gameDevMarketing</a> gains the momentum it needs to attract a sufficient number of members to elicit the responses and views necessary to answer questions and facilitate discussions on post-mortems related to game marketing.</p> <p>There are over 1.8 <strong>million</strong> of you here in <a href="/r/gameDev">r/gameDev</a>, which is the sole reason why any and all marketing conversations take place in this community rather than any other on this platform. If you want more focused marketing conversations and to see fewer of them happening here, please spread the word and join it yourself.</p> <h1>EDIT:</h1> <ul> <li>Added <a href="/r/gameDevTesting">r/gameDevTesting</a> </li> </ul> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/KevinDL"> /u/KevinDL </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1i05ral/introducing_rgamedevs_new_sister_subreddits/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1i05ral/introducing_rgamedevs_new_sister_subreddits/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/gamedev/comments/1hchbk9/beginner_megathread_how_to_get_started_which/" target="_blank">BEGINNER MEGATHREAD - How to get started? Which engine to pick? How do I make a game like X? Best course/tutorial? Which PC/Laptop do I buy?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Many thanks to everyone who contributes with help to those who ask questions here, it helps keep the subreddit tidy.</p> <p>Here are a few good posts from the community with beginner resources:</p> <p><a href="https://www.reddit.com/r/gamedev/comments/1hchbk9/beginner_megathread_how_to_get_started_which/m1usvhl/">I am a complete beginner, which game engine should I start with?</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1hchbk9/beginner_megathread_how_to_get_started_which/m1utz56/">I just picked my game engine. How do I get started learning it?</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1adji3r/a_beginners_guide_to_indie_development/">A Beginner&#39;s Guide to Indie Development</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1adqik4/how_i_got_from_0_experience_to_landing_a_job_in/">How I got from 0 experience to landing a job in the industry in 3 years.</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1ae8s03/heres_a_beginners_guide_for_my_fellow_redditors/">Here‚Äôs a beginner&#39;s guide for my fellow Redditors struggling with game math</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1hr463f/a_not_so_short_laptop_recommendation_guide_2025/">A (not so) short laptop recommendation guide - 2025 edition</a></p> <p><a href="https://www.reddit.com/r/gamedev/comments/1cwttz8/pcs_for_game_development_a_not_so_short_guide/">PCs for game development - a (not so short) guide :)</a></p> <p>&nbsp;</p> <h3>Beginner information:</h3> <p>If you haven&#39;t already please check out our guides and FAQs in the sidebar before posting, or use these links below:</p> <p><a href="https://www.reddit.com/r/gamedev/wiki/faq#wiki_getting_started">Getting Started</a></p> <p><a href="https://www.reddit.com/r/gamedev/wiki/engine_faq">Engine FAQ</a></p> <p><a href="https://www.reddit.com/r/gamedev/wiki/index">Wiki</a></p> <p><a href="https://www.reddit.com/r/gamedev/wiki/faq">General FAQ</a></p> <p><strong>If these don&#39;t have what you are looking for then post your questions below</strong>, make sure to be clear and descriptive so that you can get the help you need. Remember to follow the subreddit rules with your post, this is not a place to find others to work or collaborate with use <a href="/r/inat">r/inat</a> and <a href="/r/gamedevclassifieds">r/gamedevclassifieds</a> or the appropriate channels in the <a href="https://discord.gg/reddit-gamedev">discord</a> for that purpose, and if you have other needs that go against our rules check out the rest of the subreddits in our sidebar.</p> <p>If you are looking for more direct help through instant messing in discords there is our <a href="https://discord.gg/reddit-gamedev">r/gamedev discord</a> as well as other discords relevant to game development in the sidebar underneath related communities.</p> <p>&nbsp;</p> <h5>Engine specific subreddits:</h5> <p><a href="/r/Unity3D">r/Unity3D</a></p> <p><a href="/r/Unity2D">r/Unity2D</a></p> <p><a href="/r/UnrealEngine">r/UnrealEngine</a></p> <p><a href="/r/UnrealEngine5">r/UnrealEngine5</a></p> <p><a href="/r/Godot">r/Godot</a></p> <p><a href="/r/GameMaker">r/GameMaker</a></p> <h5>Other relevant subreddits:</h5> <p><a href="/r/LearnProgramming">r/LearnProgramming</a></p> <p><a href="/r/ProgrammingHelp">r/ProgrammingHelp</a></p> <p><a href="/r/HowDidTheyCodeIt">r/HowDidTheyCodeIt</a></p> <p><a href="/r/GameJams">r/GameJams</a></p> <p><a href="/r/GameEngineDevs">r/GameEngineDevs</a></p> <p>&nbsp;</p> <p><a href="https://www.reddit.com/r/gamedev/comments/1agdesg/beginner_megathread_how_to_get_started_which/">Previous Beginner Megathread</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/pendingghastly"> /u/pendingghastly </a> <br/> <span><a href="https://www.reddit.com/r/gamedev/comments/1hchbk9/beginner_megathread_how_to_get_started_which/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/gamedev/comments/1hchbk9/beginner_megathread_how_to_get_started_which/">[comments]</a></span></div>
          </li>
  
        </ul>
  
        <h3 class="subreddit">r/golang</h3>
        <ul class="item-list">
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jw39g7/error_with_go_install/" target="_blank">Error with go install</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi I get an error when trying to do this command.</p> <p>go install -v <a href="http://golang.org/x/tools/gopls@latest">golang.org/x/tools/gopls@latest</a></p> <p>go: golang.org/x/tools/gopls@latest: module golang.org/x/tools/gopls: Get &quot;<a href="https://proxy.golang.org/golang.org/x/tools/gopls/@v/list%22:">https://proxy.golang.org/golang.org/x/tools/gopls/@v/list&quot;:</a> dial tcp: lookup proxy.golang.org on [::1]:53: read udp [::1]:50180-&gt;[::1]:53: read: connection refused</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/KnownSecond7641"> /u/KnownSecond7641 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jw39g7/error_with_go_install/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jw39g7/error_with_go_install/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jw2z1z/how_are_we_all_feeling_about_the_layers_of/" target="_blank">How are we all feeling about the layers of interfaces mentioned in this post?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Saw this post on the experienced dev sub this morning. The complaints sound so familiar that I had to check if the OP was someone from my company.</p> <p>I became a Golang developer since the very early days of my career, so I am used to this type of pattern and prefer it a lot more than the Python apps I used to develop. </p> <p>But I also often see developers coming from other languages particularly Python get freaked out by code bases written in Golang. I had also met a principal engineer whose background was solely in Python insisted that Golang is not an object-oriented programming language and questioned all of the Golang patterns.</p> <p>How do you think about everything described in the post from the link above?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Efficient_Grape_3192"> /u/Efficient_Grape_3192 </a> <br/> <span><a href="https://www.reddit.com/r/ExperiencedDevs/s/Fbqy4waFVU">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jw2z1z/how_are_we_all_feeling_about_the_layers_of/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jw2uh6/can_someone_explain_why_string_pointers_are_like/" target="_blank">Can someone explain why string pointers are like this?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Getting a pointer to a string or any builtin type is super frustrating. Is there an easier way?</p> <pre><code>attempt1 := &amp;&quot;hello&quot; // ERROR attempt2 := &amp;fmt.Sprintf(&quot;hello&quot;) // ERROR const str string = &quot;hello&quot; attempt3 = &amp;str3 // ERROR str2 := &quot;hello&quot; attempt4 := &amp;str5 func toP[T any](obj T) *T { return &amp;obj } attempt5 := toP(&quot;hello&quot;) // Is there a builting version of toP? Currently you either have to define it // in every package, or you have import a utility package and use it like this: import &quot;utils&quot; attempt6 := utils.ToP(&quot;hello&quot;) </code></pre> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/wesdotcool"> /u/wesdotcool </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jw2uh6/can_someone_explain_why_string_pointers_are_like/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jw2uh6/can_someone_explain_why_string_pointers_are_like/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jw17tu/what_do_i_do_about_this_error_invalid_go_version/" target="_blank">What do I do about this error? "Invalid go version '1.21.1': must match format 1.23" (Debian 12)</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi,</p> <p>I&#39;m getting the above error when I try to run my program in addition to &quot;go: errors parsing go.mod:&quot; above the line with &quot;Invalid go version &#39;1.21.1&#39;: must match format 1.23&quot;.</p> <p>I have looked up this error and all I could find with it was to edit the go.mod file in the github repository to match the version formatting, but the problem there is I am using an open source project that I am not an editor on, so I cant change the go.mod file. </p> <p>I am not super familiar with go or debian tbh, so please walk me through step by step if you have an idea of what to do, thanks! And if there is info that I have left out please ask and I will provide, again I&#39;m not sure what info is necessary to answer a question like this. </p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/beefucker3000_and_1"> /u/beefucker3000_and_1 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jw17tu/what_do_i_do_about_this_error_invalid_go_version/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jw17tu/what_do_i_do_about_this_error_invalid_go_version/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jw0z46/github_samberlo_a_lodashstyle_go_library_based_on/" target="_blank">GitHub - samber/lo: üí• A Lodash-style Go library based on Go 1.18+ Generics (map, filter, contains, find...)</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/golang/comments/1jw0z46/github_samberlo_a_lodashstyle_go_library_based_on/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/IAmCesarMarinhoRJ"> /u/IAmCesarMarinhoRJ </a> <br/> <span><a href="https://github.com/samber/lo#ternary">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jw0z46/github_samberlo_a_lodashstyle_go_library_based_on/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvx3ka/hot_to_centralize_session_management_in_multiple/" target="_blank">Hot to centralize session management in multiple instances in go server.</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I have a golang server which uses goth for google oauth2 and gorrilla/sessions for session managemnet, it works well locally since it stores the session in a single instance but when i deployed to render ( which uses distributed instances ) it will fail to authorize the user saying &quot;this session doesn&#39;t match with that one...&quot;, cause the initial session was stored on the other one. So what is the best approach to manage session centrally. Consider i will use a vps with multiple instances in the future.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Tall-Strike-6226"> /u/Tall-Strike-6226 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvx3ka/hot_to_centralize_session_management_in_multiple/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvx3ka/hot_to_centralize_session_management_in_multiple/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvwasz/go_pipeline_library/" target="_blank">Go Pipeline Library</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi guys wanted to share a new project I&#39;ve been working on in the past days <a href="https://github.com/Synoptiq/go-fluxus">https://github.com/Synoptiq/go-fluxus</a></p> <p>Key features:</p> <ul> <li><strong>High-performance</strong> parallel processing with fine-grained concurrency control</li> <li><strong>Fan-out/fan-in</strong> patterns for easy parallelization</li> <li><strong>Type-safe</strong> pipeline construction using Go generics</li> <li><strong>Robust error handling</strong> with custom error strategies</li> <li><strong>Context-aware</strong> operations with proper cancellation support</li> <li><strong>Retry mechanisms</strong> with configurable backoff strategies</li> <li><strong>Batch processing</strong> capabilities for efficient resource utilization</li> <li><strong>Metrics collection</strong> with customizable collectors</li> <li><strong>OpenTelemetry tracing</strong> for observability</li> <li><strong>Circuit breaker</strong> pattern for fault tolerance</li> <li><strong>Rate limiting</strong> to control throughput</li> <li><strong>Memory pooling</strong> for reduced allocations</li> <li><strong>Thoroughly tested</strong> and with comprehensive examples</li> <li><strong>Chain stages</strong> with different input/output types</li> </ul> <p>Any feedback is welcome! ü§ó</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Unique-Side-4443"> /u/Unique-Side-4443 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvwasz/go_pipeline_library/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvwasz/go_pipeline_library/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvv6p9/hobby_project_iza_write_linux_inspired_commands/" target="_blank">[hobby project] iza - write linux inspired commands for mongodb</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi All,</p> <p>I am working on the project named `iza` to learn as well as understand go patterns. With this tool, we can do mongodb operations using linux based commands. For example, by running</p> <pre><code>```bash iza touch hello/buna_ziua ``` </code></pre> <p>will create a new empty collection inside database named `hello`. May I request for review so that it would be easy to maintain and scale? In the future, I would like to extend it to more databases, as well as cicd, artifactory if time permits.</p> <p>Source code: <a href="https://github.com/sarvsav/iza">https://github.com/sarvsav/iza</a></p> <p>Thank you for your time.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/sarvsav"> /u/sarvsav </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvv6p9/hobby_project_iza_write_linux_inspired_commands/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvv6p9/hobby_project_iza_write_linux_inspired_commands/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvrigx/created_this_script_to_corrupt_private_files/" target="_blank">Created this script to corrupt private files after use on someone else's PC, VPS, etc</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Few weeks ago I started learning Go. And as they say best way to learn a language keep building something that is useful to you. And I happen to work with confidential files on runpod, and many other VPS. I don&#39;t trust them, so I just corrupt those files and fill with random data and for that, I created this script. <a href="https://github.com/Suleman-Elahi/FileCorruptor">https://github.com/FileCorruptor</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/ogMasterPloKoon"> /u/ogMasterPloKoon </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvrigx/created_this_script_to_corrupt_private_files/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvrigx/created_this_script_to_corrupt_private_files/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvjckp/go_tokenizer/" target="_blank">Go tokenizer</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Edited: looking for an Go tokenizer that specialized for NLP processing or subwords tokenization that I can use in my project, preferably has a Unigram support, any ideas?</p> <p>Think of it as the equivalent of SentencePiece or a Hugging Face tokenizer in Go aiming to preprocess to preprocess text in a way that‚Äôs compatible with your ONNX model and Unigram requirements.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/halfRockStar"> /u/halfRockStar </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvjckp/go_tokenizer/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvjckp/go_tokenizer/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvihlv/learning_go_while_making_a_project_looking_for/" target="_blank">Learning go while making a project. Looking for beginners who want to learn go to colab</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi Guys, i have been learning go recently. i come from a python background, so go is fun language to learn for me. I know a bit c and it has helped me a lot Anyways, I have made a little project to exercise on my go skills. It&#39;s a gravity system simulator. It basically the Newton&#39;s law of gravity with raylib. i&#39;d be very happy if you make a PR especially people who are learning go as well, So it would be good project to start a new path. thanks for reading. here is the link to the github repo: <a href="https://github.com/shayan15sa/phi-sim">https://github.com/shayan15sa/phi-sim</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Ok_Lengthiness_4916"> /u/Ok_Lengthiness_4916 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvihlv/learning_go_while_making_a_project_looking_for/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvihlv/learning_go_while_making_a_project_looking_for/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvif1g/file_streaming_server/" target="_blank">File streaming server</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I implemented this simple file streaming server using GoLang and tested it using JavaScript. The README contains most of the information you&#39;d need about it and my current challenges. I want to get some advice about my implementation. Thank you</p> <p>Here: <a href="https://github.com/BenFaruna/file-streaming.git">https://github.com/BenFaruna/file-streaming.git</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/devfaruna007"> /u/devfaruna007 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvif1g/file_streaming_server/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvif1g/file_streaming_server/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvhiwj/go_typer_level_up_your_typing_skills_where_it/" target="_blank">üöÄ Go Typer, level up your typing skills where it actually matters (in terminal üòâ)</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/golang/comments/1jvhiwj/go_typer_level_up_your_typing_skills_where_it/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>So I made a typiing practice retro-style game in go!<br/> If you guys like it i&#39;ll add type racer and online mupltiplayer and stats like `problem key` and so on. </p> <p>Hope you guys enjoy.</p> <p>here is a <a href="https://private-user-images.githubusercontent.com/158470661/432024027-644a3feb-5758-4d3e-bd0d-878abde63787.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDQyMzQ2MTQsIm5iZiI6MTc0NDIzNDMxNCwicGF0aCI6Ii8xNTg0NzA2NjEvNDMyMDI0MDI3LTY0NGEzZmViLTU3NTgtNGQzZS1iZDBkLTg3OGFiZGU2Mzc4Ny5tcDQ_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNDA5JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDQwOVQyMTMxNTRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0wNDdhZTU0ZDdkNTM2ZDJmNmVkZWZkOGU0ODE3MWVmNTkyMDZmNzZmNTFjNDYzOWUyZDcwMjkyZGM1NjZkYzk5JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.uHP1IX6dIvH4VTHRnm693NHMgudgB-xGfFaZ4_0CRYk">DEMO</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/DisplayLegitimate374"> /u/DisplayLegitimate374 </a> <br/> <span><a href="https://github.com/prime-run/go-typer">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvhiwj/go_typer_level_up_your_typing_skills_where_it/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jve3ty/announcing_mockery_v3/" target="_blank">Announcing Mockery v3</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/golang/comments/1jve3ty/announcing_mockery_v3/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>Mockery v3 is here! I&#39;m so excited to share this news with you folks. v3 includes some ground-breaking feature additions that put it far and above all other code generation frameworks out there. Give v3 a try and let me know what you think. Thanks!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/LandonClipp"> /u/LandonClipp </a> <br/> <span><a href="https://topofmind.dev/blog/2025/04/08/announcing-mockery-v3/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jve3ty/announcing_mockery_v3/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvdsr8/type_safe_orm/" target="_blank">Type Safe ORM</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Wanna to share my type safe ORM: <a href="https://github.com/go-goe/goe">https://github.com/go-goe/goe</a> </p> <p>Key features:<br/> - üîñ Type safe queries and compiler time errors<br/> - üóÇÔ∏è Iterate over rows<br/> - ‚ôªÔ∏è Wrappers for more simple queries and Builds for complex queries<br/> - üì¶ Auto migrate Go structures to database tables<br/> - üö´ Non-string usage for avoid mistyping or mismatch attributes</p> <p>I will make examples with web frameworks (currently testing with Fuego and they match very well because of the type constraint) and benchmarks comparing with another ORMs. </p> <p>This project is new and any feedback is very helpful. ü§ó</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/olauro"> /u/olauro </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvdsr8/type_safe_orm/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvdsr8/type_safe_orm/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jvcf3l/deepseekgo_an_update_after_2_months/" target="_blank">deepseek-go: an update after 2 months</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I remember making <a href="https://www.reddit.com/r/golang/comments/1ica1fj/deepseekgo_a_go_wrapper_for_deepseek/">this</a> post 2 months ago where I introduced a side project I had been working on for a few months.</p> <p>Thank you to everyone who showed their support for the project then, and also for the criticism I received then (trust me, I read all of them). I think I understand GoLang more now than I did during my last post.</p> <p>I&#39;m making this post to list the things I&#39;ve added to this project in the last few months and some more thoughts about why exactly this project exists.</p> <p><strong>Features/Accomplishments added:</strong></p> <ol> <li>Deepseek Go now 100% covers the Deepseek API (including the beta endpoints, plus the features that are not in API docs, from trial and error by our contributors).</li> <li>Deepseek Go now also supports external providers such as OpenRouter and Azure.</li> <li>Deepseek Go has seen contributions from 10+ contributors, with 15+ PRs and 30+ issues resolved.</li> <li>Deepseek Go is now listed on <a href="https://github.com/deepseek-ai/awesome-deepseek-integration">https://github.com/deepseek-ai/awesome-deepseek-integration</a>.</li> </ol> <p><strong>Why does this project even exist when there&#39;s openai-go or go-openai?</strong> -&gt; A simple reason, which many won&#39;t agree with: it exists because the alternatives we have are not updated to cater to Deepseek. The largest repository still hasn&#39;t included support for Deepseek R1. And through the achievements the project has received, we clearly know that there&#39;s a clear need for a different client for Deepseek atleast GoLang.</p> <p>If you wish to use Deepseek in Go, please consider using deepseek-go, and if you like the project, please star it.</p> <p>Github repo: <a href="https://github.com/cohesion-org/deepseek-go">https://github.com/cohesion-org/deepseek-go</a></p> <p>Today is the release of <code>deepseek-go v1.2.9</code>, too!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/LordVein05"> /u/LordVein05 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jvcf3l/deepseekgo_an_update_after_2_months/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jvcf3l/deepseekgo_an_update_after_2_months/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jv7jdv/a_trip_down_memory_lane_how_we_resolved_a_memory/" target="_blank">A Trip Down Memory Lane: How We Resolved a Memory Leak When pprof Failed Us</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p><code>pprof</code> is an amazing tool for debugging memory leaks, but what about when it&#39;s not enough? Read about how we used <code>gcore</code> and <code>viewcore</code> to hunt a particularly nasty memory leak in a large distributed system.</p> <p><strong>Note:</strong> We&#39;ve reproduced our blog so folks can read its entirety on Reddit, but if you want to go to our website to read it there and see screenshots and architecture diagrams (since those can&#39;t be posted in this subreddit), you can access it here: <a href="https://www.warpstream.com/blog/a-trip-down-memory-lane-how-we-resolved-a-memory-leak-when-pprof-failed-us">https://www.warpstream.com/blog/a-trip-down-memory-lane-how-we-resolved-a-memory-leak-when-pprof-failed-us</a></p> <h1>Backstory</h1> <p>A couple of weeks ago, we noticed that the HeapInUse metric reported by the Go runtime, which tracks the number of in-use bytes on the heap, looked like the following for the WarpStream control plane:</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67edd25ce24b85e0583a3937_AD_4nXe56vzeVniqYwc3cubTGdYD2aALVqLAoYBqH-5nEvFdHenTwuXUG39RjFY6pojgwUoqdr-MAtEkpnSxHijdkxd337m8HBuYZAvwFfv1OLIbeGXhqDl4kjBWDU4d-s5Vq2bM1wOvZg.png">Figure 1: The HeapInUse metric for the control plane showed signs of a memory leak.</a></p> <p>This was alarming, as the linear increase strongly indicates a memory leak. The leak was very slow, and our control planes are deployed almost daily (sometimes multiple times per day), so while the memory leak didn‚Äôt represent an immediate issue, we wanted to get to the bottom of it.</p> <h1>Initial Approach</h1> <p>The WarpStream control plane is written in Go, which has excellent built-in support for debugging application memory issues with <a href="https://pkg.go.dev/runtime/pprof">pprof</a>. We‚Äôve used <code>pprof</code> hundreds of times in the past to debug performance issues, and usually memory leaks are particularly easy to spot. </p> <p>The <code>pprof</code> heap profiles can be used to see which objects are still ‚Äúlive‚Äù on the heap as of the latest garbage collection run, so figuring out the source of a memory leak is usually as simple as grabbing a couple of heap profiles at different points in time. The differences in the memory occupied by live objects will explain the leak.</p> <p>As expected, comparing heap profiles taken at different times showed something very suspicious:</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67eed32251071fce1c12f36b_Frame%201%20(3">Figure 2: Comparing profiles showed a significant increase in the size of the live compaction jobs.</a>.png)</p> <p>The profile on the right, which was taken later, showed that the size of the live FileMetadata objects created by the compaction scheduler almost doubled! To understand what the profile is telling us here, we have to get into WarpStream‚Äôs job scheduling framework briefly.</p> <h1>Job Scheduling in WarpStream</h1> <p>For a WarpStream cluster to function efficiently, a few background jobs need to run regularly. An example of such a job is the <a href="https://docs.warpstream.com/warpstream/overview/architecture/write-path#file-compaction">compaction jobs</a> that periodically rewrite and merge the data files in object storage. These jobs run in the Agent, but are scheduled by the control plane. </p> <p>To orchestrate these jobs, a polling model is used as shown in Figure 3 below. The control plane maintains a job queue to which the various job schedulers submit jobs. The Agent will periodically poll the control plane for outstanding jobs to run, and once a job is completed, an acknowledgement is sent back to the control plane, allowing the control plane to remove the specified job from the queue. Additionally, the control plane regularly scans the jobs in the job queue to remove jobs it considers timed out, preventing queue buildup.</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67eec600abf7e6b2a1be4641_Group%20538%20(3">Figure 3: In this high-level overview of WarpStream‚Äôs job scheduling framework, jobs are submitted by the various job schedulers into a job queue. The Agent polls from the queue, runs the returned job, and informs the control plane of the job‚Äôs completion or failure.</a>.png)</p> <h1>Understanding the Leak</h1> <p>Knowing how job scheduling works, it was surprising to see the FileMetadata objects being highlighted in the heap profiles. These objects, serving as inputs for the compaction jobs, have a pretty deterministic lifecycle: they should be removed from the queue and eventually garbage collected as compaction jobs complete or time out.</p> <p>So, how can we explain the increased memory usage due to these FileMetadata objects? We had two hypotheses:</p> <ol> <li>The queue size was growing.</li> <li>The queue was unintentionally retaining references to the jobs.</li> </ol> <p>With our logs and metrics, the first hypothesis was ruled out. To confirm the second one, we carefully went through the job queue code, spotted and fixed a potential source of leak, and yet the fix did not stop the leak. Much of this relied on our familiarity with the codebase, so even when we thought we had a fix, there was no concrete proof.</p> <p>We were stumped. We set out thinking that profiling would provide all the answers, but were left perplexed. With no remaining hypothesis to validate, we had to revisit the fundamentals.</p> <h1>Garbage Collection Internals</h1> <p>The Go runtime comes with a <a href="https://tip.golang.org/doc/gc-guide">garbage collector (GC)</a> and most of the time we don‚Äôt have to think about how it works, until we need to understand why a certain object is being retained. The fact that the FileMetadata objects showed up in the in-use space view of the heap profiles means that the GC still considered them live. But what does that mean?</p> <p>The Go GC employs the mark-sweep algorithm, meaning its cycles include a mark phase and a sweep phase. The mark phase figures out if an object is reachable and the sweep phase reclaims the unreachable objects determined from the mark phase. </p> <p>To figure out whether an object is reachable, the GC has to traverse the object graph starting from the GC roots marking objects referenced by reachable objects as reachable. The complete list of GC roots can be found below, but examples include global variables and live <code>goroutine</code> stacks.</p> <pre><code>func markroot(gcw *gcWork, rootIndex uint32) { switch getRootType(rootIndex): case DATA_SEGMENT: markGlobalVariables(gcw, rootIndex) case BSS_SEGMENT: markGlobalVariables(gcw, rootIndex) case FINALIZER: scanFinalizers(gcw) case DEAD_GOROUTINE_STACK: freeDeadGoroutineStacks(gcw) case SPAN_WITH_SPECIALS: scanSpansWithSpecials(gcw, rootIndex) default: scanGoroutineStacks(gcw, rootIndex) } </code></pre> <p>Figure 4: Pseudocode based on the Go GC‚Äôs <a href="https://github.com/golang/go/blob/master/src/runtime/mgcmark.go#L150-L256">logic</a> showing the mark phase starting from the GC roots.</p> <p>That means that for the <code>FileMetadata</code> objects to be retained, they must be traceable back to some GC root. The question then became: could we figure out the precise chain of object references leading to the <code>FileMetadata</code> objects? Unfortunately, this isn‚Äôt something that pprof could help with.</p> <h1>Core Dumps to the Rescue</h1> <p>The heap profiles were very effective at telling us the <em>allocation</em> sites of live objects, but provided no insights into why specific objects were being <em>retained</em>. Getting the GC roots of these objects would be crucial for understanding the leak. </p> <p>For that, we used <a href="https://sourceware.org/gdb/current/onlinedocs/gdb.html/gcore-man.html">gcore</a> from gdb to take a core dump of the control plane process in our staging environment by running the following command:</p> <pre><code>gcore &lt;pid&gt; </code></pre> <p>However, raw core dumps can be notoriously difficult to interpret. While the snapshot of the heap from the core dump tells us about object relationships, understanding what those objects <em>mean</em> in the context of our application is a whole other challenge. So, we turned to <a href="https://pkg.go.dev/golang.org/x/debug/cmd/viewcore">viewcore</a> for analysis, as it enriches the core dump with <a href="https://dwarfstd.org/">DWARF</a> debugging information and provides handy utilities for exploring the state of the dumped process.</p> <p>We ran the following commands to see the live <code>FileMetadata</code> objects along with their virtual addresses:</p> <pre><code>viewcore &lt;corefile&gt; objects &gt; objs.txt cat objs.txt | grep streampb.FileMetadata </code></pre> <p>The resulting output looked like this:</p> <pre><code>c097bc8000 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc8140 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc8280 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9680 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc97c0 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9900 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9a40 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9b80 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9cc0 githuburl/pkg/stream/pb/streampb.FileMetadata c097bc9e00 githuburl/pkg/stream/pb/streampb.FileMetadata c097bd0000 githuburl/pkg/stream/pb/streampb.FileMetadata c097bd0140 githuburl/pkg/stream/pb/streampb.FileMetadata c097bd0280 githuburl/pkg/stream/pb/streampb.FileMetadata </code></pre> <p>Figure 5: A sample of the live <code>FileMetadata</code> objects that viewcore showed from the core dump.</p> <p>To get the GC root information for a given object, we ran:</p> <pre><code>viewcore &lt;corefile&gt; reachable &lt;address&gt; </code></pre> <p>That gave us the chain of references shown below:</p> <pre><code>(viewcore) reachable c028dba000 githuburl/pkg/deadscanner.(*Scheduler).RunAsync.GoWithRecover.func3 githuburl/pkg/deadscanner.(*Scheduler).RunAsync.func1 githuburl/pkg/deadscanner.(*Scheduler).scheduleJobsLoop.s ‚Üí c0148e7b00 githuburl/pkg/deadscanner.Scheduler .queue.data ‚Üí c00dc67680 githuburl/pkg/jobs.backoffJobQueue .queue.data ‚Üí c002e45f00 githuburl/pkg/jobs.balancedJobQueue .queue.data ‚Üí c00294a930 githuburl/pkg/jobs.multiPriorityJobQueue .queuesInOrder.ptr ‚Üí c002714eb8 [3]*githuburl/pkg/jobs.pq [0] -&gt; c0029518c0 githuburl/pkg/jobs.pq.q‚Üí c00dc67380 githuburl/pkg/jobs.jobQueue .queues ‚Üí c00d67320 githuburl/pkg/jobs.jobTypeQueues ._queuesByType ‚Üí c00294a6f0 hash&lt;githuburl/pkg/stream/pb/agentpoolpb.JobType,*githuburl/pkg/jobs.jobTypeQueue&gt;.buckets ‚Üí c0303464d0 bucket&lt;githuburl/pkg/stream/pb/agentpoolpb.JobType,*githuburl/pkg/jobs.jobTypeQueue&gt; .values[1] ‚Üí c010c40180 githuburl/pkg/jobs.jobTypeQueue .inflight ‚Üí c002717830 hash&lt;string,githuburl/pkg/jobs.inflightEntry&gt; .buckets ‚Üí c0437ec000 [33+4?]bucket&lt;string,githuburl/pkg/jobs.inflightEntry&gt; [0].values[0].onAck ‚Üí fO c026225dc0 unk112 f56 ‚Üí c02fb58f00 githuburl/pkg/stream/pb/agentpoolpb.JobInput .CompactionJob ‚Üí c028dbba40 githuburl/pkg/stream/pb/agentpoolpb.CompactionJobInput .Files.ptr -&gt; c027ea9b00 [32]*githuburl/pkg/stream/pb/streampb.FileMetadata [11] ‚Üí c028dba000 githuburl/pkg/stream/pb/streampb.FileMetadata </code></pre> <p>Figure 6: The precise chain of references from a <code>FileMetadata</code> object to a GC root.</p> <h1>Root Causing the Leak</h1> <p>Now this chain of references from the core dump revealed something less obvious. That is, these <code>FileMetadata</code> objects, which we said were created by the <em>compaction</em> scheduler, were retained by the <em>deadscanner</em> scheduler, which is used to scan and remove files in the object store that are no longer tracked by the control plane.</p> <p>This gave us another angle to consider: how could the deadscanner scheduler possibly be retaining jobs that it did not create? As revealed by the object relationship from Figure 6 and the diagram from Figure 3, the compaction and deadscanner schedulers share a reference to the same job queue. Consequently, the fact that a compaction job is not retained by the compaction scheduler, and rather the deadscanner scheduler, implies that the compaction scheduler had terminated already, while the deadscanner scheduler continued to run. </p> <p>This behavior was unexpected. All job schedulers for a virtual cluster are bundled into a single computational unit called an actor, and the actor dictates the lifecycle of its internal components. Consequently, the various schedulers shut down if and only if the job actor shuts down. At least, that‚Äôs how it‚Äôs supposed to work!</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67eec22d58548dfd2b871ef0_Group%20539%20(1">Figure 7: The WarpStream control plane is multi-tenant. The job actors for different virtual clusters are distributed among the control plane replicas.</a>.png)</p> <p>That information narrowed down the scope of the search, and upon investigation, we discovered that the memory leak could be attributed to a goroutine leak in the deadscanner scheduler. The important code snippet is reproduced below: </p> <pre><code>func (s *Scheduler) RunAsync(ctx context.Context) { go s.scheduleJobsLoop(ctx) } func (s *Scheduler) scheduleJobsLoop(ctx context.Context) { t := time.NewTicker(s.config.Interval) defer t.Stop() for { select { case &lt;-ctx.Done(): return case &lt;-t.C: if err := s.runOnce(ctx); err != nil { s.logger.Error(&quot;run_failure&quot;, err) } } } } func (s *Scheduler) runOnce(ctx context.Context) error { ctx, cc := context.WithTimeout(ctx, time.Hour) defer cc() jobInput := createJobInput() for { outcome, err := s.queue.Submit(ctx, jobInput) if err != nil { return fmt.Errorf(&quot;error submitting job: %w&quot;, err) } if outcome.Success() { break } if outcome.Backoff { break } if outcome.Backpressured { // Queue is currently full, retry the submission. } time.Sleep(100 * time.Millisecond) } return nil } </code></pre> <p>The scheduler runs in background and periodically schedules jobs for the Agents to execute. These jobs are submitted to a queue, and we block on job submission until one of the terminating conditions is met. The rationale is simple: if the queue is full at the time of the submission, the scheduler will wait for inflight jobs to complete and queue slots to become available. </p> <p>And that precisely was the cause of the leak. When a job actor is shutting down, it signals to the contained job schedulers that a shutdown is in progress by canceling the context passed to the RunAsync function.</p> <p>However, there is a catch. If the deadscanner scheduler is busy spinning inside the for loop in runOnce due to a back-pressured signal indicating a full queue at the time of the context cancellation, it will not be aware of the cancellation! What is worse is that during job actor shutdown, the queue will most likely be full because the queue will not be serving poll requests from the Agents anymore, and the outstanding jobs will remain, causing job submission to be backpressure continuously, and the goroutine from the deadscanner scheduler to be stuck.</p> <p>The fix was simple. All we needed to do was to make the job queue submission function check for context cancellation before doing anything else. The deadscanner scheduler will see the job submission error due to an invalid context, break from the loop form <code>runOnce</code>, and shut down properly.</p> <pre><code>func (j *jobQueue) submit ( ctx context.Context, jobInput JobInput, ) (JobOutcome, error) { if ctxErr := ctx.Err(); ctxErr != nil { return JobOutcome{}, ctxErr } // Continue with job submission. ... } </code></pre> <p>Figure 8. The replicated patch to the job queue that returns an error for job submissions with a canceled context.</p> <p>At this point one might start to wonder when the job actor gets shut down. If this only happened during control plane shutdowns, the effects would have been benign. The reality is more complex. The control plane explicitly shuts down job actors in the following scenarios:</p> <ol> <li>A virtual cluster becomes idle.</li> <li>A job actor is being migrated to another control plane replica to avoid hotspotting.</li> </ol> <p>Consider a scenario where a tenant disconnects all their Agents from the control plane. This corresponds to the first case: if a cluster is no longer receiving poll job requests, then the job actor can be purged to free up resources. Scenario 2 is related to the multi-tenant nature of the control plane. </p> <p>As shown in Figure 7, every virtual cluster gets its own job actor for isolation, and the various job actors are distributed among the control plane replicas. To avoid overloading individual replicas with memory-intensive job actors, the control plane periodically assesses the memory usage of the replicas. When significant imbalances are detected, it redistributes actors by shutting down an actor on the replica with the highest memory usage and re-spawning it on the replica with the lowest usage. The combination of these two factors led to more frequent and yet less predictable memory leak occurrences.</p> <p>To confirm that we had the right fix, we deployed the patch and monitored the <code>HeapInUse</code> metric shown previously in Figure 1. This time, the metric looked a lot healthier:</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67edd25b970feef67b947fc5_AD_4nXdwZbBdPxqWDf8S3oDAVWOT7rNR8slNf22ERwsaeSW3mcqJOydCbd8hsvxdcVfgBCO7uOY5fEwlXD4sS4ZRH9bCBf_Z91W1uNJV6rkpMdIkOh4EOqDYfS1akD7morTAbD69dB14.png">Figure 9: The HeapInUse metric for the control plane no longer showed a linear increase after the patch was deployed</a></p> <h1>Final Thoughts</h1> <p>The cause of a memory leak is always more obvious in retrospect. The investigation took several twists and turns before we arrived at the correct solution. So we wondered: could we have approached this more effectively? Since we now know that the root cause was a goroutine leak, we should have been able to rely on the goroutine profiles to uncover the problem.</p> <p>It turned out that sometimes the global picture is not very telling. When comparing two profiles showing all goroutines, the leak was not very obvious to the human eye</p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67edd25cca97fe364bdc1c51_AD_4nXf-nw1iMvuQ2cziHn5MtMD9V_6hscZLkUqlGTozTMdmGGvOiQuMLvxVMh-0sHjKfI1s8IZgiDc8NOdU03z6SEeO1A5uL7nHFMz4Jt2J12glDlvkqJTi8QK1A6CTcsqFOP5Q4Wsimw.png">Figure 10: A comparison of goroutine profiles for the same period as in Figure 2 showed no significant differences.</a></p> <p>However, when we zoomed in on the offending deadscanner package, a more significant change was revealed: </p> <p><a href="https://cdn.prod.website-files.com/64baaecd9c5c9b1b6c38aa0e/67eec9b72f12437323cc197c_asd.png">Figure 11: A comparison of goroutine profiles for the same period as in Figure 2 showed no significant differences.</a></p> <p>The art of debugging complex systems is simultaneously holding both the system-wide perspective and the microscopic view, and knowing and using the right tools at each level of detail. As we have seen, seemingly subtle changes can have a significant impact on a global level. </p> <p>The debugging journey often begins with examining global trends using diagnostic tools like profiling. However, when those observations are inconclusive, isolating the data by specific dimensions can also be beneficial. While the selection of these dimensions might involve some trial and error, the results can still be very insightful. And as a last resort, reverting to the lowest-level tools is always a viable option.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/warpstream_official"> /u/warpstream_official </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jv7jdv/a_trip_down_memory_lane_how_we_resolved_a_memory/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jv7jdv/a_trip_down_memory_lane_how_we_resolved_a_memory/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jv4qoc/easier_wifi_control_for_terminal_dudes_on_linux/" target="_blank">Easier Wi-Fi control for terminal dudes on Linux written in Go</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I recently decided to build a terminal app to prevent too much of my time wasting steps for switching wi-fi access points or turning wi-fi on/off.</p> <p>I was really frustrated with <code>nmcli</code> and <code>nmtui</code> because they just over-complicate the process.</p> <blockquote> <p>So if you have the same problem or whatever, check it out on my GitHub:<br/> <a href="https://github.com/Vistahm/ewc">https://github.com/Vistahm/ewc</a></p> </blockquote> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/vistahm"> /u/vistahm </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jv4qoc/easier_wifi_control_for_terminal_dudes_on_linux/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jv4qoc/easier_wifi_control_for_terminal_dudes_on_linux/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jv4q7f/go_live_coding_interview_problems_with_tests_and/" target="_blank">Go live coding interview problems. With tests and solutions</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi everyone!</p> <p>I started collecting live coding problems for interview preparation. It‚Äôs more focused on real-life tasks than algorithms, and I think it‚Äôs really fun to solve.</p> <p>Each problem has tests so you can check your solution, and there‚Äôs also a solution to compare with.</p> <p>You can suggest problems through issues or add your own trough PR.</p> <p>Any feedback or contribution would be much appreciated!</p> <p>Repository: <a href="https://github.com/blindlobstar/go-interview-problems">https://github.com/blindlobstar/go-interview-problems</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/EastRevolutionary347"> /u/EastRevolutionary347 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jv4q7f/go_live_coding_interview_problems_with_tests_and/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jv4q7f/go_live_coding_interview_problems_with_tests_and/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jv3row/why_empty_struct_in_golang_have_zero_size/" target="_blank">Why empty struct in golang have zero size??</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Sorry this might have been asked before but I am coming from a C++ background where empty classes or structs reserve one byte if there is no member inside it. But why it&#39;s 0 in case of Golang??</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Loud_Staff5065"> /u/Loud_Staff5065 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jv3row/why_empty_struct_in_golang_have_zero_size/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jv3row/why_empty_struct_in_golang_have_zero_size/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jv0u0v/why_go_should_be_your_first_step_into_backend/" target="_blank">Why Go Should Be Your First Step into Backend Development</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/golang/comments/1jv0u0v/why_go_should_be_your_first_step_into_backend/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/9millionrainydays_91"> /u/9millionrainydays_91 </a> <br/> <span><a href="https://blog.cubed.run/why-go-should-be-your-first-step-into-backend-development-45be1ea5fdf7">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jv0u0v/why_go_should_be_your_first_step_into_backend/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1juxiu7/suggestions_on_linq_like_library_for_golang/" target="_blank">Suggestions on Linq like library for Golang</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey all üëã</p> <p>Just wanted to share an idea I‚Äôve been working on‚Äîand get some feedback from fellow gophers.</p> <p>I‚Äôm planning to build a LINQ-style library for Go that works with arrays, slices, and maps. The idea is to keep it super lightweight and simple, so performance overhead stays minimal.</p> <p>Yeah, I know not everyone‚Äôs into these kinds of abstractions‚Äîsome of you love writing your own ops from scratch. Totally respect that! All I ask is: please don‚Äôt hit me with the ‚Äújust write it yourself‚Äù replies üôè This isn‚Äôt for everyone, and that‚Äôs totally okay.</p> <p>I‚Äôm aware of <a href="https://github.com/ahmetb/go-linq">go-linq</a>, but it‚Äôs not maintained anymore, and it predates generics‚Äîso it relies heavily on reflection (ouch). There <em>is</em> an old PR trying to add generics, but it just tacks on more methods instead of simplifying things.</p> <p>My goal is to start fresh, take advantage of Go‚Äôs generics, and keep the API clean and minimal‚Äînot bloated with 3 versions of every function. Just the essentials.</p> <p>So‚Äîany ideas, features, or pain points you‚Äôd like to see addressed in a lib like this? Anything you‚Äôve always wished was easier when working with slices/maps in Go?</p> <p>Open to all constructive input üôå</p> <p>(And again, no offense if this isn&#39;t your thing. Use it or don&#39;t‚Äîtotally your call!)</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/cosmic_predator"> /u/cosmic_predator </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1juxiu7/suggestions_on_linq_like_library_for_golang/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1juxiu7/suggestions_on_linq_like_library_for_golang/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jus8w6/go_performance_when_the_gc_doesnt_do_anything/" target="_blank">Go performance when the GC doesn't do anything</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Say some Go program is architected in a way that the garbage collector does not have anything to do (i.e., all objects are kept alive all the time). Should one expect the same performance as C or C++? Is the go compiler as efficient as GCC for example?</p> <p>Edit: of course, the assumption is that the program is written efficiently in both languages and that the common feature set of both programming languages is used. So we don&#39;t care that go does not have inheritance the way C++ does.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/SufficientGas9883"> /u/SufficientGas9883 </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jus8w6/go_performance_when_the_gc_doesnt_do_anything/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jus8w6/go_performance_when_the_gc_doesnt_do_anything/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jumta1/well_i_really_want_typed_methods/" target="_blank">Well, i really want typed methods</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Why<br/> <code>func (f *Foo) bar[Baz any](arg Baz)</code> is forbidden<br/> but<br/> <code>func bar[Baz any](f *Foo, arg Baz)</code> is allowed</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Vaniog"> /u/Vaniog </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jumta1/well_i_really_want_typed_methods/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jumta1/well_i_really_want_typed_methods/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jubrxu/so_i_wrote_a_book_the_story_behind_100_go/" target="_blank">So, I Wrote a Book: The Story Behind 100 Go Mistakes and How to Avoid Them</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/golang/comments/1jubrxu/so_i_wrote_a_book_the_story_behind_100_go/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>It took me a while to be ready to share this, but here it is: the story behind the process of writing my book, <em>100 Go Mistakes and How to Avoid Them</em>. Thought it might interest folks who enjoy behind-the-scenes journeys.</p> <p>Also, this is another opportunity to say thank you to the Go community for being so supportive. ‚ù§Ô∏è</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/teivah"> /u/teivah </a> <br/> <span><a href="https://www.thecoder.cafe/p/100-go-mistakes">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jubrxu/so_i_wrote_a_book_the_story_behind_100_go/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1jp1j8u/whos_hiring_april_2025/" target="_blank">Who's Hiring - April 2025</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>This post will be stickied at the top of until the last week of April (more or less).</p> <p>Please adhere to the following rules when posting:</p> <p><strong>Rules for individuals:</strong></p> <ul> <li>Don&#39;t create top-level comments; those are for employers.</li> <li>Feel free to reply to top-level comments with on-topic questions.</li> <li>Meta-discussion should be reserved for the distinguished mod comment.</li> </ul> <p><strong>Rules for employers:</strong></p> <ul> <li>To make a top-level comment you must be hiring directly, or a focused third party recruiter with <strong>specific jobs with named companies</strong> in hand. No recruiter fishing for contacts please.</li> <li>The job must be currently open. It is permitted to post in multiple months if the position is still open, especially if you posted towards the end of the previous month.</li> <li>The job must involve working with Go on a regular basis, even if not 100% of the time.</li> <li>One top-level comment per employer. If you have multiple job openings, please consolidate their descriptions or mention them in replies to your own top-level comment.</li> <li>Please base your comment on the following template:</li> </ul> <p><strong>COMPANY:</strong> <em>[Company name; ideally link to your company&#39;s website or careers page.]</em></p> <p><strong>TYPE:</strong> <em>[Full time, part time, internship, contract, etc.]</em></p> <p><strong>DESCRIPTION:</strong> <em>[What does your team/company do, and what are you using Go for? How much experience are you seeking and what seniority levels are you hiring for? The more details the better.]</em></p> <p><strong>LOCATION:</strong> <em>[Where are your office or offices located? If your workplace language isn&#39;t English-speaking, please specify it.]</em></p> <p><strong>ESTIMATED COMPENSATION:</strong> <em>[Please attempt to provide at least a rough expectation of wages/salary.If you can&#39;t state a number for compensation, omit this field. Do not just say &quot;competitive&quot;. Everyone says their compensation is &quot;competitive&quot;.If you are listing several positions in the &quot;Description&quot; field above, then feel free to include this information inline above, and put &quot;See above&quot; in this field.If compensation is expected to be offset by other benefits, then please include that information here as well.]</em></p> <p><strong>REMOTE:</strong> <em>[Do you offer the option of working remotely? If so, do you require employees to live in certain areas or time zones?]</em></p> <p><strong>VISA:</strong> <em>[Does your company sponsor visas?]</em></p> <p><strong>CONTACT:</strong> <em>[How can someone get in touch with you?]</em></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/jerf"> /u/jerf </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1jp1j8u/whos_hiring_april_2025/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1jp1j8u/whos_hiring_april_2025/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/golang/comments/1hb5zz7/frequently_asked_questions/" target="_blank">Frequently Asked Questions</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>The Golang subreddit maintains a list of <a href="https://www.reddit.com/r/golang/wiki/r_golang_faqs/">answers to frequently asked questions</a>. This allows you to get instant answers to these questions.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/jerf"> /u/jerf </a> <br/> <span><a href="https://www.reddit.com/r/golang/comments/1hb5zz7/frequently_asked_questions/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/golang/comments/1hb5zz7/frequently_asked_questions/">[comments]</a></span></div>
          </li>
  
        </ul>
  
        <h3 class="subreddit">r/rust</h3>
        <ul class="item-list">
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jw2jpn/i_built_a_redis_clone_in_rust_hash_set/" target="_blank">I built a Redis clone in Rust - Hash & Set functionality with SADD, SREM, SMEMBERS</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey everyone! I wanted to share a project I&#39;ve been working on - a Redis-like in-memory database implemented from scratch in Rust.</p> <p>The clone supports Redis Hash and Set data structures with full functionality for commands like SADD, SREM, SMEMBERS, and SISMEMBER. I focused on creating a clean architecture while taking advantage of Rust&#39;s safety features.</p> <p>In my <a href="https://youtu.be/pEtKg2lXH98">video walkthrough</a>, I explain the core data structures, command parsing logic, and implementation details. It was fascinating to see how Rust&#39;s ownership model helped prevent many common bugs in database systems.</p> <p>The <a href="https://github.com/Matrx123/redis-like-clone">source code</a> is available on GitHub if you want to check it out or contribute.</p> <p>What do you think? Any suggestions for improvements or features I should add next? I&#39;m particularly interested in feedback on the video and any suggestion for my overall improvement. ü¶Ä‚ù§Ô∏è‚ù§Ô∏è</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/vipinjoeshi"> /u/vipinjoeshi </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jw2jpn/i_built_a_redis_clone_in_rust_hash_set/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jw2jpn/i_built_a_redis_clone_in_rust_hash_set/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jw2jaf/released_the_first_turingcomplete_version_of_my/" target="_blank">Released the first Turing-complete version of my own programming language</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Released the first Turing-complete version of the Mussel programming language: a language as safe and fast as Rust with a syntax as easy as Python.</p> <p>Version 0.0.4 is now available</p> <p><a href="https://github.com/gianndev/mussel">https://github.com/gianndev/mussel</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/gianndev_"> /u/gianndev_ </a> <br/> <span><a href="https://github.com/gianndev/mussel">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jw2jaf/released_the_first_turingcomplete_version_of_my/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jw15ss/shadertoys_ported_to_rust_gpu/" target="_blank">Shadertoys ported to Rust GPU</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/LegNeato"> /u/LegNeato </a> <br/> <span><a href="https://rust-gpu.github.io/blog/2025/04/10/shadertoys">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jw15ss/shadertoys_ported_to_rust_gpu/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvyldq/has_anyone_gradually_migrated_off_of_django_to/" target="_blank">Has anyone gradually migrated off of Django to Rust (axum) ?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I&#39;m looking to use Rust kinda like a reverse proxy to forward the requests to the existing Django application.</p> <p>This would help migrate the routes to Rust/Axum and use the current application as a fallback for everything else. However, I am not able to find any package that can serve as a WSGI bridge to spin up the Django application.</p> <p>Has anyone tried something similar?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/vazark"> /u/vazark </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jvyldq/has_anyone_gradually_migrated_off_of_django_to/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvyldq/has_anyone_gradually_migrated_off_of_django_to/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvwcgj/btrees_inverted_indices_and_a_model_for_full_text/" target="_blank">BTrees, Inverted Indices, and a Model for Full Text Search</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Wrote a blog post about the core ideas behind how full text search engines work, with Rust code to help explain some of the details!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/ohrv"> /u/ohrv </a> <br/> <span><a href="https://ohadravid.github.io/posts/2025-04-08-btrees-and-mental-models/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvwcgj/btrees_inverted_indices_and_a_model_for_full_text/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvvwjv/just_finished_my_first_creative_coding_project/" target="_blank">Just finished my first creative coding project with Rust</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey folks! üëã</p> <p>I&#39;m a beginner in Rust, and I just wrapped up a little project using the <a href="https://nannou.cc"><code>nannou</code></a> crate (aka the &quot;Processing for Rust&quot; kind of vibe). It&#39;s a simple simulation of bouncing balls with collisions. You can:</p> <ul> <li>Add/remove balls with Left/Right arrow keys üèπ</li> <li>Control balls radius with Up/Down arrow keys</li> <li>Smack &#39;em with the &#39;R&#39; key for some chaotic energy üí•</li> </ul> <p>I called it <em>balls</em>. Because... well, they&#39;re balls. And I&#39;m very mature.</p> <p>Would love for you to check it out and roast me (gently) with feedback! </p> <p>NB. the physics-y part of the code (especially collisions) was put together with a bit of help from AI since I‚Äôm still figuring things out. I‚Äôm planning to rewrite it properly once I level up a bit. </p> <p>Thanks in advance! This community rocks ü§ò</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/_MrCouchPotato"> /u/_MrCouchPotato </a> <br/> <span><a href="https://github.com/giacomo-folli/balls">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvvwjv/just_finished_my_first_creative_coding_project/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvvw9i/stabilize_letchains/" target="_blank">Stabilize let-chains</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/kibwen"> /u/kibwen </a> <br/> <span><a href="https://github.com/rust-lang/rust/pull/132833">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvvw9i/stabilize_letchains/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvtwlr/does_rust_really_have_problems_with/" target="_blank">Does Rust really have problems with self-referential data types?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hello,</p> <p>I am just learning Rust and know a bit about the pitfalls of e.g. building trees. I want to know: is it true that when using Rust, self referential data structures are &quot;painful&quot;? Thanks!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Jolly_Fun_8869"> /u/Jolly_Fun_8869 </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jvtwlr/does_rust_really_have_problems_with/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvtwlr/does_rust_really_have_problems_with/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvtjbk/a_surprising_enum_size_optimization_in_the_rust/" target="_blank">A surprising enum size optimization in the Rust compiler ¬∑ post by James Fennell</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/Skaarj"> /u/Skaarj </a> <br/> <span><a href="https://jpfennell.com/posts/enum-type-size/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvtjbk/a_surprising_enum_size_optimization_in_the_rust/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvstn2/media_my_4_year_old_daughter_loves_ferris/" target="_blank">[Media] My 4 year old daughter loves Ferris</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/GregorySchadenfreude"> /u/GregorySchadenfreude </a> <br/> <span><a href="https://i.redd.it/zip6kyejvyte1.jpeg">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvstn2/media_my_4_year_old_daughter_loves_ferris/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvoqc4/badges_service_library_pure_on_rust_shieldsio/" target="_blank">Badges service & library pure on Rust (shields.io alternative)</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey folks! üëã</p> <p>I built a Rust alternative to shields.io ‚Äî it&#39;s called badges.ws.</p> <p>You can use it as a crate to generate custom SVG badges (badgelib), or run it as a service to embed badges into your README, docs, etc. I tried to keep the API mostly compatible with shields.io.</p> <p>Originally I made the badgelib crate just for my own projects, but it eventually turned into a full badge service. The project ended up taking a lot more time than I expected. SVG seems simple, but in reality it doesn‚Äôt have things like flexbox ‚Äî so everything has to be calculated manually (for calculating badge width I even need to do some virtual text rendering first).</p> <p>Here‚Äôs the project: - Crate: <a href="https://crates.io/crates/badgelib">https://crates.io/crates/badgelib</a> - Repo: <a href="https://github.com/vladkens/badges">https://github.com/vladkens/badges</a> - Demo: <a href="https://badges.ws">https://badges.ws</a></p> <p>Stack: Axum + Maud + reqwest</p> <p>I‚Äôm getting a bit tired of Rust re-compile times, especially when working with templates and HTML. I want to have a more development-friendly stack for the frontend side in my next project :)</p> <p>Would love to hear your thoughts or feedback!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/vladkens"> /u/vladkens </a> <br/> <span><a href="https://github.com/vladkens/badges">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvoqc4/badges_service_library_pure_on_rust_shieldsio/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvkz1n/thread_safe_vectorlike_type/" target="_blank">Thread safe vector-like type?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I am looking for something that would be effectively like this:</p> <p><code>struct MtVector&lt;T&gt;(RwLock&lt;Vec&lt;RwLock&lt;T&gt;&gt;&gt;);</code></p> <p>A type that:</p> <ul> <li>Allows you to access elements by index/insertion order</li> <li>Is thread safe</li> <li>Allows you to add and remove elements</li> <li>Allows you to iterate over all elements of the collection</li> </ul> <p>The actual type I am sharing is very inconvenient to try to build around because of restrictions on RWGuards, which don&#39;t allow you to return iterators for example.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/camilo16"> /u/camilo16 </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jvkz1n/thread_safe_vectorlike_type/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvkz1n/thread_safe_vectorlike_type/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvhpol/forint_a_crate_for_invoking_macros_with_integer/" target="_blank">forint | A crate for invoking macros with integer types.</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Have you ever had the need to implement a trait for many integer types at once? I know I have to all the time. So I created a macro that invokes another macro for each integer type. It was simple, but it got the job done. But later on, I found that I actually needed to be able to control which types are used as input to the target macro, so I wrote a procedural macro to do just that. I made it so that I could add flags for which types to include. Then later on, I realized that I might also want to control how the macro is invoked. Either for each int type, or with each int type.</p> <p>So this is that procedural macro. <code>for_each_int_type</code>.</p> <p>I put an explanation in the readme that goes into detail about how to use this macro. I hope that it&#39;s clear. If you have any feedback, please let me know!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Inheritable"> /u/Inheritable </a> <br/> <span><a href="https://crates.io/crates/forint">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvhpol/forint_a_crate_for_invoking_macros_with_integer/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvh6vo/facet_rust_reflection_serialization/" target="_blank">facet: Rust reflection, serialization, deserialization ‚Äî know the shape of your types</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/bik1230"> /u/bik1230 </a> <br/> <span><a href="https://github.com/facet-rs/facet">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvh6vo/facet_rust_reflection_serialization/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvgecc/this_week_in_rust_594/" target="_blank">This Week in Rust #594</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/ArnaudeDUsseau"> /u/ArnaudeDUsseau </a> <br/> <span><a href="https://this-week-in-rust.org/blog/2025/04/09/this-week-in-rust-594/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvgecc/this_week_in_rust_594/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvfqnu/finally_dipping_my_toes_in_rust_by_building_a/" target="_blank">Finally dipping my toes in Rust by building a computational graph constraint checker!</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Trying out Rust for the first time, coming from Python, Go, and JS. I built a small computational graph builder for checking constraints in a proof system, mostly an application for things like building zero knowledge proof systems. You can define any function, turn it into a computational graph, define constraints to be satisfied, and verify that everything ran correctly. </p> <p>Had a lot of fun building this. Rust is nice, really like all the stuff the compiler catches prior to running codes, traits are also awesome. Build times are rough though. </p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/aeronauticator"> /u/aeronauticator </a> <br/> <span><a href="https://github.com/AmeanAsad/constraint-builder">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvfqnu/finally_dipping_my_toes_in_rust_by_building_a/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jveeid/choosing_the_right_rust_gui_library_in_2025_why/" target="_blank">Choosing the Right Rust GUI Library in 2025: Why Did You Pick Your Favorite?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey everyone,</p> <p>I&#39;m currently diving into GUI development with Rust and, honestly, I&#39;m a bit overwhelmed by the number of options out there‚Äî<code>egui</code>, <code>iced</code>, <code>splint</code>, <code>tauri</code>, and others. They all seem to have their strengths, but it‚Äôs hard to make a decision because they all have roughly the same amount of reviews and stars, and I don‚Äôt have the time to experiment with each one to figure out which is <em>really</em> the best fit for me.</p> <p>So, I wanted to ask the community: why did you choose the Rust GUI library you‚Äôre currently using?</p> <ul> <li><strong>What were the main criteria that led you to your choice?</strong></li> <li><strong>Are there small features or details that made one library feel more comfortable or intuitive than others?</strong> Maybe it&#39;s a specific API design, or a feature that‚Äôs really helped you get your project off the ground.</li> <li><strong>What kind of project are you working on, and why did you pick the library you did?</strong> What made you feel like <code>egui</code> or <code>iced</code> (or whatever you‚Äôre using) was the best fit for your use case over the others?</li> </ul> <p>It feels like, with web development, the decision is pretty easy‚ÄîReact is a go-to choice and many libraries are built on top of it. But with Rust GUI options, there doesn&#39;t seem to be a clear &quot;best&quot; option, at least not one that stands out above the others in a way that&#39;s easy to decide. It&#39;s hard to find that &quot;killer feature&quot; when each library seems to offer something unique, and with limited time to test them, I feel a little stuck.</p> <p>Would love to hear your thoughts and experiences! Looking forward to hearing why you made your choice and how it&#39;s worked out so far.</p> <p><em>Also, I just want to vent a bit about something that&#39;s been driving me crazy. Right now, I‚Äôm stuck trying to center a button with content below it at the center of the screen. In React, I could easily do that with MUI, but here, in Rust, I have no clue how to do it. I‚Äôve tried using something like centered_and_justified, and while it seems to work in making the content fill 100% width and height (as the documentation says), I can‚Äôt for the life of me figure out how to actually center my content.</em></p> <p><em>This is honestly the main reason I decided to post here‚Äîam I sure egui is the right tool for my project? How many hours should I spend figuring out this one small detail? It‚Äôs frustrating!</em></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/FreePhoenix888"> /u/FreePhoenix888 </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jveeid/choosing_the_right_rust_gui_library_in_2025_why/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jveeid/choosing_the_right_rust_gui_library_in_2025_why/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jve9z8/ehmi_hmi_components_for_egui/" target="_blank">eHMI - HMI components for egui</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Good day everyone,</p> <p>Let me introduce or recent open-sourced crate: a egui component set for Human-Machine interfaces.</p> <p>The set includes</p> <ul> <li>bars</li> <li>gauges</li> <li>buttons (slider, relay, valve)</li> </ul> <p>(no charts as egui has got the perfect own plot library).</p> <p><a href="https://github.com/roboplc/ehmi">https://github.com/roboplc/ehmi</a></p> <p><a href="https://preview.redd.it/xet9a74qzute1.png?width=2830&amp;format=png&amp;auto=webp&amp;s=3eae2870e1360f5ef9ddd1b14b3fd8596236e965">https://preview.redd.it/xet9a74qzute1.png?width=2830&amp;format=png&amp;auto=webp&amp;s=3eae2870e1360f5ef9ddd1b14b3fd8596236e965</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/disserman"> /u/disserman </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jve9z8/ehmi_hmi_components_for_egui/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jve9z8/ehmi_hmi_components_for_egui/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jvdnmz/why_no_debug_by_default/" target="_blank">Why no `Debug` by default?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Wouldn&#39;t it be much more convenient if every type would implement <code>Debug</code> in debug mode by default?</p> <p>In our rather large codebase almost none of the types implement <code>Debug</code> as we do not need it when everything work. And we also don&#39;t want the derive annotation everywhere. </p> <p>But if we go on bug hunting it is quite annoying that we can barely print anything.</p> <p>Is there any work flow how to enable <code>Debug</code> (or something similar) to all types in debug mode?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/TigrAtes"> /u/TigrAtes </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jvdnmz/why_no_debug_by_default/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jvdnmz/why_no_debug_by_default/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jva4w6/ownedfuture_turn_borrowed_futures_into_owned_ones/" target="_blank">owned-future: turn borrowed futures into owned ones</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p><a href="https://docs.rs/owned-future/latest/owned_future/">docs</a> - <a href="https://crates.io/crates/owned-future">crates.io</a> - <a href="https://github.com/Daniel-Aaron-Bloom/owned-future">repo</a></p> <p>I don&#39;t know how often others run into this problem, but pretty commonly I&#39;m dealing with an <code>Arc&lt;Something&gt;</code> and <code>Something</code> will have some a method <code>async fn stuff(&amp;self, ...) -&gt; ...</code> that is async and takes a reference, thus borrowing my <code>Arc</code>. But I don&#39;t want it to borrow the <code>Arc</code>, I want it to take ownership of the <code>Arc</code> so I can just freely pass the future around.</p> <p>I got sick of having to setup self-referential structures to do this, so I made a new crate which does this without self-referential structures, and in fact uses zero <code>unsafe</code> (for simple cases, to handle complex cases the crate uses a tiny bit <code>unsafe</code>).</p> <p>Now if you&#39;ve ever gotten frustrated at something like this:</p> <pre><code>use std::sync::Arc; use tokio::sync::Notify; let notify = Arc::new(Notify::new()); // Spawn a thread that waits to be notified { // Copy the Arc let notify = notify.clone(); // Start listening before we spawn let notified = notify.notified(); // Spawn the thread tokio::spawn(async move { // Wait for our listen to complete notified.await; // &lt;-- fails because we can&#39;t move `notified` }); } // Notify the waiting threads notify.notify_waiters(); </code></pre> <p>Now there&#39;s a simple solution:</p> <pre><code>use std::sync::Arc; use tokio::sync::Notify; use owned_future::make; // Make the constructor for our future let get_notified = owned_future::get!(fn(n: &amp;mut Arc&lt;Notify&gt;) -&gt; () { n.notified() }); let notify = Arc::new(Notify::new()); // Spawn a thread that waits to be notified { // Copy the Arc let notify = notify.clone(); // Start listening before we spawn let notified = make(notify, get_notified); // Spawn the thread tokio::spawn(async move { // wait for our listen to complete notified.await; }); } // notify the waiting threads notify.notify_waiters(); </code></pre> <p>All with zero unsafe (for simple cases like this).</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Daniel-Aaron-Bloom"> /u/Daniel-Aaron-Bloom </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jva4w6/ownedfuture_turn_borrowed_futures_into_owned_ones/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jva4w6/ownedfuture_turn_borrowed_futures_into_owned_ones/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jv9uho/march_project_goals_update_rust_blog/" target="_blank">March Project Goals Update | Rust Blog</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/matthieum"> /u/matthieum </a> <br/> <span><a href="https://blog.rust-lang.org/2025/04/08/Project-Goals-2025-March-Update.html">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jv9uho/march_project_goals_update_rust_blog/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jv9rkw/cant_understand_how_optionmap_can_update_a_value/" target="_blank">can't understand how Option::map can update a value</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I&#39;m learning how to implement Linked lists in rust, following this website <a href="https://rust-unofficial.github.io/too-many-lists/">Too many List</a>, a run down:</p> <p>we use a <code>struct List</code> containing <code>head: Link</code> where <code>Link = Option&lt;Box&lt;Node&gt;&gt;</code>, with <code>struct Node</code> containing <code>elem: i32, next: Link</code>. so far so good.</p> <p>But then he implements a peek method that returns the value of the head node element:</p> <pre><code>fn peek(&amp;self) -&gt; Option&lt;&amp;T&gt; { self.head.as_ref().map(|node| &amp;node.elem) } </code></pre> <p>and there is another peek method with mutability:</p> <pre><code>fn peek_mut(&amp;mut self) -&gt; Option&lt;&amp;mut T&gt; { self.head.as_mut().map(|node| &amp;mut node.elem) } </code></pre> <p>I kinda understand the implementation above, but completely lost it when he updated the head elem value with</p> <pre><code>link.peek_mut().map(|value| *value = 42); </code></pre> <p>how did it update the elem? what are we derefrencing? and why we didn&#39;t write this derefrencing operation in the body of the method? and why <code>self.head.as_mut().map(|node| node.elem)</code>work in the method?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Joubranoo"> /u/Joubranoo </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jv9rkw/cant_understand_how_optionmap_can_update_a_value/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jv9rkw/cant_understand_how_optionmap_can_update_a_value/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jv5zcs/what_happens_here_in_if_let/" target="_blank">What happens here in "if let"?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I chanced upon code like the following in a <a href="https://github.com/dtolnay/anyhow">repository</a>:</p> <pre><code>trait Trait: Sized { fn t(self, i: i32) -&gt; i32 { i } } impl&lt;T&gt; Trait for T {} fn main() { let g = if let 1 | 2 = 2 {}.t(3) == 3; println!(&quot;{}&quot;, g); } </code></pre> <p>The code somehow compiles and runs (<a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2024&amp;gist=fea0864360db66d663b5d0a9ca95944c">playground</a>), though it doesn&#39;t look like a syntactically valid &quot;if let&quot; expression, according to the <a href="https://doc.rust-lang.org/reference/expressions/if-expr.html#if-let-expressions">reference</a>.</p> <p>Does anyone have an idea what&#39;s going on here? Is it a parser hack that works because <code>{}</code> is ambiguous (it&#39;s a block expression as required by <code>let if</code> and at the same time evaluates to <code>()</code>)?</p> <p>Update: Thanks for the comments! Many comments however are talking about the initial <code>|</code>. That&#39;s not the weird bit. As I mentioned above the weird part is <code>{}.t(3) ...</code>. To discourage further discussions on that let me just remove it from the code.</p> <p>I believe this is the correct answer from the comments: <code>(if let 1 | 2 = 2 {}).t(3) == 3</code>. Somehow I never thought of parsing it this way.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/corank"> /u/corank </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jv5zcs/what_happens_here_in_if_let/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jv5zcs/what_happens_here_in_if_let/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jv2ypa/pokemon_tcg_pocket_rust/" target="_blank">Pokemon TCG Pocket + Rust</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi all!</p> <p>I&#39;m excited to share a project I&#39;ve been working on. Its a Pokemon TCG Pocket simulator written in Rust. Open-sourcing it here: <a href="https://github.com/bcollazo/deckgym-core">https://github.com/bcollazo/deckgym-core</a></p> <p>The idea is to use it to optimize decks for the game. For example, simulate thousands of games using Giant Cape, then a thousand more with Rocky Helmet, and see which one wins more games.</p> <p>I did this project to learn Rust (and to find the best Blastoise deck üòÖ). Now there are <em>a lot</em> of cards to implement. Best chance of having this work fully is with a community. So if you are a fellow Pokemon + Rust fan, looking to learn rust, or in general can help a newbie Rustacean, I invite you to create a pull request!</p> <p>Here are a few example Pull Requests for if you&#39;d like to contribute:</p> <ul> <li>Implementing Tentacruel: <a href="https://github.com/bcollazo/deckgym-core/pull/5/files">https://github.com/bcollazo/deckgym-core/pull/5/files</a></li> <li>Implementing Flareon: <a href="https://github.com/bcollazo/deckgym-core/pull/4/files">https://github.com/bcollazo/deckgym-core/pull/4/files</a></li> <li>More attacks: <a href="https://github.com/bcollazo/deckgym-core/pull/10/files">https://github.com/bcollazo/deckgym-core/pull/10/files</a></li> </ul> <p>Lastly, I also built a website to make the functionality more accesible. You can check it out at: <a href="https://www.deckgym.com">https://www.deckgym.com</a></p> <p>Thanks for taking a look, and happy coding!</p> <p><a href="https://preview.redd.it/yftlmn97cste1.png?width=2222&amp;format=png&amp;auto=webp&amp;s=57ed4cc7064dfe389d2999183241d7c83e9dba0b">deckgym CLI</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/downvotedragon"> /u/downvotedragon </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jv2ypa/pokemon_tcg_pocket_rust/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jv2ypa/pokemon_tcg_pocket_rust/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jv2vxx/embedded_rust_in_production_in_2025/" target="_blank">Embedded Rust in Production in 2025</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/jahmez"> /u/jahmez </a> <br/> <span><a href="https://onevariable.com/blog/embedded-rust-production/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jv2vxx/embedded_rust_in_production_in_2025/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1juyo7t/wrkflw_a_cli_tool_to_validate_and_execute_github/" target="_blank">wrkflw ( a cli tool to validate and execute GitHub Actions workflows locally) now has a full TUI!</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hey everyone,</p> <p>I wanted to share an update to wrkflw <a href="https://github.com/bahdotsh/wrkflw">https://github.com/bahdotsh/wrkflw</a>. wrkflw now features a full TUI, making it much easier to manage and run your workflows!</p> <h2>What&#39;s new in this update:</h2> <ul> <li><strong>Interactive TUI</strong>: Navigate between workflows, select and run them with simple keyboard controls</li> <li><strong>Execution management</strong>: See real-time progress and results of your workflow runs</li> <li><strong>Detailed job/step view</strong>: Drill down into job and step details to see exactly what&#39;s happening</li> <li><strong>Emulation mode</strong>: Run workflows even without Docker by simulating the GitHub Actions environment</li> <li><strong>Validation mode</strong>: Just want to check if your workflows are valid? Toggle into validation mode</li> </ul> <h2>How to use it:</h2> <p>Simply run <code>wrkflw</code> in your repository to open the TUI interface, or use <code>wrkflw run .github/workflows/your-workflow.yml</code> to execute a specific workflow directly.</p> <p>Let me know what you think or if you have any feature requests!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/New-Blacksmith8524"> /u/New-Blacksmith8524 </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1juyo7t/wrkflw_a_cli_tool_to_validate_and_execute_github/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1juyo7t/wrkflw_a_cli_tool_to_validate_and_execute_github/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust/comments/1jtgjww/hey_rustaceans_got_a_question_ask_here_152025/" target="_blank">Hey Rustaceans! Got a question? Ask here (15/2025)!</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Mystified about strings? Borrow checker have you in a headlock? Seek help here! There are no stupid questions, only docs that haven&#39;t been written yet. Please note that if you include code examples to e.g. show a compiler error or surprising result, linking a <a href="https://play.rust-lang.org/">playground</a> with the code will improve your chances of getting help quickly.</p> <p>If you have a <a href="http://stackoverflow.com/">StackOverflow</a> account, consider asking it there instead! StackOverflow shows up much higher in search results, so having your question there also helps future Rust users (be sure to give it <a href="http://stackoverflow.com/questions/tagged/rust">the &quot;Rust&quot; tag</a> for maximum visibility). Note that this site is very interested in question quality. I&#39;ve been asked to read a RFC I authored once. If you want your code reviewed or review other&#39;s code, there&#39;s a <a href="https://codereview.stackexchange.com/questions/tagged/rust">codereview stackexchange</a>, too. If you need to test your code, maybe <a href="https://play.rust-lang.org">the Rust playground</a> is for you.</p> <p>Here are some other venues where help may be found:</p> <p><a href="https://www.reddit.com/r/learnrust">/r/learnrust</a> is a subreddit to share your questions and epiphanies learning Rust programming.</p> <p>The official Rust user forums: <a href="https://users.rust-lang.org/">https://users.rust-lang.org/</a>.</p> <p>The official Rust Programming Language Discord: <a href="https://discord.gg/rust-lang">https://discord.gg/rust-lang</a></p> <p>The unofficial Rust community Discord: <a href="https://bit.ly/rust-community">https://bit.ly/rust-community</a></p> <p>Also check out <a href="https://reddit.com/r/rust/comments//1jnyo93/hey_rustaceans_got_an_easy_question_ask_here/">last week&#39;s thread</a> with many good questions and answers. And if you believe your question to be either very complex or worthy of larger dissemination, feel free to create a text post.</p> <p>Also if you want to be mentored by experienced Rustaceans, tell us the area of expertise that you seek. Finally, if you are looking for Rust jobs, the most recent thread is <a href="https://www.reddit.com/r/rust/comments/1jttzz4/official_rrust_whos_hiring_thread_for_jobseekers/">here</a>.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/llogiq"> /u/llogiq </a> <br/> <span><a href="https://www.reddit.com/r/rust/comments/1jtgjww/hey_rustaceans_got_a_question_ask_here_152025/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust/comments/1jtgjww/hey_rustaceans_got_a_question_ask_here_152025/">[comments]</a></span></div>
          </li>
  
        </ul>
  
        <h3 class="subreddit">r/rust_gamedev</h3>
        <ul class="item-list">
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jvhzx3/what_should_my_roadmap_be/" target="_blank">What Should My Roadmap Be?</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hello everyone,</p> <p>I have no previous experience with computer graphics. Similarly, I have never developed a game using any game engine before. However, after doing some research, I realized that I have a strong interest in computer graphics, game development, and even building game engines.</p> <p>After realizing this interest, I started studying mathematics to support my learning. Right now, I want to pursue this field as a hobby, but I also want to learn it properly and from scratch.</p> <p>Starting with Rust and WGPU seems like a reasonable path to me. However, I am not sure if this is the right choice for my current skill level. I am curious about how difficult this path would be, what challenges I might face, and what kind of learning path I should follow.</p> <p>My first goal is to understand the concepts step by step and eventually create my own voxel-based game. I really want to achieve this.</p> <p>Some people suggested starting with C++ and OpenGL instead, saying that it is a good foundation for those who are new to graphics programming. Still, I wanted to get your opinions. Do you think it makes sense to start with Rust + WGPU, or would it be better to build a different foundation first?</p> <p>Finally, I have one more question: How much math do I really need to know for this? Should I learn all the basic math concepts from scratch, or is it enough to just learn what I need? Perhaps with the help of research and AI tools?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Even-Masterpiece1242"> /u/Even-Masterpiece1242 </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jvhzx3/what_should_my_roadmap_be/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jvhzx3/what_should_my_roadmap_be/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jv0fwl/i_got_some_basic_3d_terrain_generation_and/" target="_blank">I got some basic 3D terrain generation and display! (Loot & Roam - see my comment)</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jv0fwl/i_got_some_basic_3d_terrain_generation_and/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/wallabra"> /u/wallabra </a> <br/> <span><a href="https://i.redd.it/l0s3xhr6mrte1.png">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jv0fwl/i_got_some_basic_3d_terrain_generation_and/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jttjpf/prototype_for_a_game_im_working_on_where_an_army/" target="_blank">Prototype for a game I'm working on where an army of Raccoons fight Mutant Trash Monsters</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jttjpf/prototype_for_a_game_im_working_on_where_an_army/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>This game is written in Bevy and is currently using placeholder assets from Itch.io. The core game mechanic is the player controlling a Sanitation Worker to amasses an army of Raccoons to help fight mutant garbage monsters in their city. The player picks up raccoons and throws them at the trash monsters to attack.</p> <p>I&#39;m working on tuning the gameplay loop, timings, hit points, etc. but I just wanted to build something to demonstrate the concept. There is still a lot of work to be done.</p> <p>This is my first non-trivial project in Rust and my first attempt at using Bevy but I&#39;ve been programming since 2001. Forgive the animation glitches, I&#39;m still working those out. I&#39;m working with an artist as well and am shooting for an SNES-style pixel art aesthetic. This is a spare-time project and I doubt it&#39;ll be done anytime this year. Maybe 2026.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Stackitu"> /u/Stackitu </a> <br/> <span><a href="https://v.redd.it/n0wwcbgpngte1">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jttjpf/prototype_for_a_game_im_working_on_where_an_army/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jt9h7k/game_a_tui_game_called_thaumazein/" target="_blank">[Game] A TUI game called Thaumazein</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jt9h7k/game_a_tui_game_called_thaumazein/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/guiltyriddance"> /u/guiltyriddance </a> <br/> <span><a href="https://www.youtube.com/watch?v=Su3ErD3t3YY">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jt9h7k/game_a_tui_game_called_thaumazein/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jrpyat/rust_new_pc/" target="_blank">Rust new pc</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Hi everyone I just recently bought a new gaming pc it has the rtx 5070 gpu the amd ryzen 7 9800x3d 32gb of ram ddr5 and I am getting between 150-200fps on pretty high graphics setting which Is amazing but I keep getting these lag spikes where the game will stutter and jump and freeze for a slight second and they won‚Äôt stop and happen eveytime I jump or it try‚Äôs to render something and I can not fix it every other game I have played is perfectly fine just not rust!!! My favourite game‚Ä¶</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Lewisrb06"> /u/Lewisrb06 </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jrpyat/rust_new_pc/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jrpyat/rust_new_pc/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jrjbzk/my_first_game_written_in_rust_just_launched_on/" target="_blank">My first game (written in Rust) just launched on steam [AMA in comments]</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jrjbzk/my_first_game_written_in_rust_just_launched_on/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>The stack is Rust + OpenGL + FMOD. In development for about 9 months. Rust has been pretty good!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/kennoath69"> /u/kennoath69 </a> <br/> <span><a href="https://www.youtube.com/watch?v=6KF77mXlZGA">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jrjbzk/my_first_game_written_in_rust_just_launched_on/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jqj6ef/secs_shit_ecs_has_zero_unsafe/" target="_blank">Secs - Shit ECS has zero unsafe</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jqj6ef/secs_shit_ecs_has_zero_unsafe/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>Thanks to Rust 1.86 and trait upcasting, secs ECS now has no <code>unsafe</code> code. Beyond that, since last post, a lot has changed with secs and it has some seriously interesting features now. It can handle just about anything most ECS&#39; can, even events but that is not an abstraction of secs at this time. This ECS was designed for simplicity and the API is even more simple than hecs</p> <p>Systems signatures are literally <code>&amp;World</code>, where interior mutability is utilized to make things like handling resources and components, easily possible without any borrow conflicts. No passing around <code>View&lt;Component&gt;</code> for each component in systems, just simply <code>&amp;World</code> and things like <code>query()</code> (get components) are possible from within systems, making the API identical to outside of systems. It has an included scheduler (hence systems) capable of parallel execution via rayon. This is easily done due to the immutable reference to <code>World</code>. The scheduler and all are super lightweight and intended to stay that way. It&#39;s not a way to force you to use systems and architect your apps around that, it&#39;s there for convience and performance in the case that you do use parallel systems</p> <p>Secs isn&#39;t just simplicity, it&#39;s really flexible and you can even do crazy things such as</p> <p>```rust let mut world = World::default();</p> <pre><code>let id = world.spawn((1_u32,)); world.spawn((10_u32, &quot;foo&quot;)); world.add_query_system::&lt;(&amp;mut u32,)&gt;(|_world, _entity, (i,)| { *i *= 2; }); for _ in 0..3 { world.run_systems(); } let i = world.get::&lt;u32&gt;(id).unwrap(); assert_eq!(*i, 8); </code></pre> <p>```</p> <p><sup>^</sup> Courtesy of <a href="/u/oli-obk">u/oli-obk</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/wick3dr0se"> /u/wick3dr0se </a> <br/> <span><a href="https://github.com/wick3dr0se/secs">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jqj6ef/secs_shit_ecs_has_zero_unsafe/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jpt3e2/dangerous_dave_rust/" target="_blank">Dangerous Dave - Rust</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jpt3e2/dangerous_dave_rust/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>I have just completed writing Dangerous Dave with Rust, Macroquad, and Tiled.</p> <p><a href="https://github.com/oawad79/dave-rs.git">https://github.com/oawad79/dave-rs.git</a></p> <p><a href="https://reddit.com/link/1jpt3e2/video/m8xs0k6ezgse1/player">https://reddit.com/link/1jpt3e2/video/m8xs0k6ezgse1/player</a></p> <p>I am new to Rust and would like someone to provide me with a code review for the repo, any suggestions on how to improve the code ... what I could use or even suggest a different approach... would be very helpful to improve my Rust skills</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/osama_awad"> /u/osama_awad </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jpt3e2/dangerous_dave_rust/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jpt3e2/dangerous_dave_rust/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jplywp/graphite_progress_report_q4_2024_quality_of_life/" target="_blank">Graphite progress report (Q4 2024) - Quality of life improvements across drawing tools and procedural editing</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jplywp/graphite_progress_report_q4_2024_quality_of_life/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Keavon"> /u/Keavon </a> <br/> <span><a href="https://graphite.rs/blog/graphite-progress-report-q4-2024/?utm_source=reddit&amp;utm_campaign=rust_gamedev">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jplywp/graphite_progress_report_q4_2024_quality_of_life/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jplyfq/internships_for_a_rust_graphics_engine_gsoc_2025/" target="_blank">Internships for a Rust graphics engine: GSoC 2025</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jplyfq/internships_for_a_rust_graphics_engine_gsoc_2025/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Keavon"> /u/Keavon </a> <br/> <span><a href="https://graphite.rs/blog/internships-for-a-rust-graphics-engine-gsoc-2025/?utm_source=reddit&amp;utm_campaign=rust_gamedev">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jplyfq/internships_for_a_rust_graphics_engine_gsoc_2025/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jpjugt/valor_heroes_of_might_magic_iii_battle_mode_in/" target="_blank">Valor - Heroes of Might & Magic III battle mode in Rust [WIP]</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jpjugt/valor_heroes_of_might_magic_iii_battle_mode_in/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p><strong>Hey everyone!</strong></p> <p>I‚Äôve been working on <strong>Valor</strong> ‚Äì a <em>work-in-progress</em> implementation of the battle mode from Heroes of Might &amp; Magic III in Rust.</p> <p><strong>Tech stack</strong>:</p> <ul> <li><strong>Rust</strong> (obviously)</li> <li><strong>SDL2</strong> (windowing, input, graphics, text, sound)</li> <li><strong>egui</strong> for menus</li> </ul> <p>‚úÖ <strong>What&#39;s done</strong>:</p> <ul> <li>Rendering</li> <li>Animations (attack sequences, movement)</li> <li>Sound &amp; music</li> <li>Basic gameplay (pathfinding, attacks, simple creature abilities)</li> </ul> <p>‚ùå<strong>What&#39;s missing</strong>:</p> <ul> <li>Magic and spell-based abilities</li> <li>Siege mechanics</li> <li>Polish :)</li> </ul> <p>You can already play a complete match from start to finish, though it‚Äôs still barebones.</p> <p><strong>Project goals</strong>:</p> <ol> <li>Turn HOMM3‚Äôs battle mode into a standalone game focused on short play sessions.</li> <li>Add matchmaking and LAN multiplayer for quick skirmishes.</li> <li>Experiment with neural network AI for opponents, similar to <a href="https://openai.com/index/dota-2/">OpenAI‚Äôs Dota 2 bots</a> ‚Äì but that‚Äôs <em>way</em> down the road!</li> </ol> <p>üîó <strong>GitHub</strong>: <a href="https://github.com/vegris/valor">https://github.com/vegris/valor</a></p> <p>Let me know what you think!</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/_vegris_"> /u/_vegris_ </a> <br/> <span><a href="https://i.redd.it/27c7yh0tvdse1.jpeg">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jpjugt/valor_heroes_of_might_magic_iii_battle_mode_in/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jp5ttg/interactive_demo_of_spatial_audio_in_rust_using/" target="_blank">Interactive demo of spatial audio in Rust using AudioNimbus/Steam Audio</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/HumanPilot3263"> /u/HumanPilot3263 </a> <br/> <span><a href="/r/rust/comments/1jovo15/interactive_demo_of_spatial_audio_in_rust_using/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jp5ttg/interactive_demo_of_spatial_audio_in_rust_using/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1joo74r/loot_roam_physics_demo_3_water_physics_soft_body/" target="_blank">Loot & Roam physics demo 3 - water physics & soft body (see my comment)</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/wallabra"> /u/wallabra </a> <br/> <span><a href="https://v.redd.it/395q3eeer5se1">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1joo74r/loot_roam_physics_demo_3_water_physics_soft_body/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jo63uo/my_second_relative_working_game_in_macroquad/" target="_blank">My second relative working game in Macroquad!</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jo63uo/my_second_relative_working_game_in_macroquad/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>It is still in a prototype stage, but I am really happy with the gameplay :)</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Innocentuslime"> /u/Innocentuslime </a> <br/> <span><a href="https://v.redd.it/k8wugywjo1se1">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jo63uo/my_second_relative_working_game_in_macroquad/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jmuf7w/bevy_scripting_v0110_dynamic_components/" target="_blank">Bevy Scripting v0.11.0 - Dynamic Components, benchmarking and more</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><h1><a href="https://github.com/makspll/bevy_mod_scripting/"><code>bevy_mod_scripting</code></a> 0.11.0 is out!</h1> <h2>Summary</h2> <h3>Dynamic Components</h3> <p>To compliment dynamic systems introduced in the previous updates, scripts can now register their own, fully legit bevy components!</p> <p>```lua local NewComponent = world.register_new_component(&quot;ScriptComponentA&quot;)</p> <p>local new_entity = world.spawn() world.insert_component(new_entity, NewComponent, construct(types.DynamicComponent, { data = &quot;Hello World&quot; }))</p> <p>local component_instance = world.get_component(new_entity, NewComponent) assert(component_instance.data == &quot;Hello World&quot;, &quot;unexpected value: &quot; .. component_instance.data)</p> <p>component_instance.data = { foo = &quot;bar&quot; }</p> <p>assert(component_instance.data.foo == &quot;bar&quot;, &quot;unexpected value: &quot; .. component_instance.data.foo) ```</p> <p>These are backed by the <code>DynamicComponent</code> type which looks like this: <code>rust pub struct DynamicComponent { data: ScriptValue, } </code> scripts can freely set this data payload to anything that is supported by <code>ScriptValue</code>&#39;s !.</p> <p>These can also be queried as normal!</p> <h3>Mdbook Preprocessor Prettified</h3> <p>The documentation you can generate via exported <code>ladfile</code>s now looks much better, types have nested links to other types, and things generally look better!</p> <h3>Storing lua closures</h3> <p>The conversion from <code>mlua::Function</code> to <code>ScriptValue</code> is now supported, and as such you can store arbitrary lua callbacks through reflection in your <code>components/resources</code> (being careful not to unload scripts while these are being used, as it will likely cause panics in mlua)</p> <h3>Continous Benchmarking</h3> <p>BMS now runs and publishes the results of a variety of benchmarks over at <a href="https://bencher.dev/console/projects/bms/plots">bencher</a></p> <h3>Performance &amp; Profiling Improvements</h3> <p>You can now easilly profile BMS using the new <code>profile_with_tracy</code> feature which will also enable bevy&#39;s equivalent. Tracing spans have generally been improved, giving you lots of great detail into where most time is spent!</p> <p>The <code>get</code> and <code>set</code> indexer functions have been extracted into a <code>MagicFunctions</code> sub-registry to improve the performance of reflection.</p> <p>Various internal hashmaps have been tuned to get free performance wins.</p> <h3>Other</h3> <ul> <li>Various missing getters and setters have been added to the <code>Scripts</code> resource.</li> <li>ScriptValue printing has been improved when nested in reflected types</li> </ul> <h2>Changelog</h2> <p>See a detailed changelog <a href="https://github.com/makspll/bevy_mod_scripting/blob/main/CHANGELOG.md">here</a></p> <h2>Migration Guide</h2> <p>The migration guide for this release can be found <a href="https://github.com/makspll/bevy_mod_scripting/blob/main/release-notes/0.11.0-migration.md">here</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/makspll"> /u/makspll </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jmuf7w/bevy_scripting_v0110_dynamic_components/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jmuf7w/bevy_scripting_v0110_dynamic_components/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jgsodb/my_rainbow_puzzler_is_out_try_the_free_demo/" target="_blank">My Rainbow Puzzler Is Out | Try The Free Demo</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jgsodb/my_rainbow_puzzler_is_out_try_the_free_demo/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p><a href="https://preview.redd.it/47wu21uh54qe1.png?width=1280&amp;format=png&amp;auto=webp&amp;s=5a66d940a01e5a9f80b06903bd02fa6deb4d6952">https://preview.redd.it/47wu21uh54qe1.png?width=1280&amp;format=png&amp;auto=webp&amp;s=5a66d940a01e5a9f80b06903bd02fa6deb4d6952</a></p> <p>My Tetris like puzzle game <strong>Full Spectrum Gradient</strong> where you match falling blocks to make rainbow lines is finally out! Play through stages on a map, go for a highscore in endless mode, or beat your friend in local versus! </p> <p>There&#39;s a free demo where you can play the basic endless mode as much as you like. Or just check out the trailer! </p> <p>Steam Store Page:<br/> <a href="https://store.steampowered.com/app/3445300/Full_Spectrum_Gradient/">Save 33% on Full Spectrum Gradient on Steam</a></p> <p>1440p Trailer on YouTube:<br/> <a href="https://www.youtube.com/watch?v=3jjOpzqCvHk">Full Spectrum Gradient | Out Now | Try The Demo</a></p> <p>The game is made entirely in Raylib and Rust. </p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Volcanic-Penguin"> /u/Volcanic-Penguin </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jgsodb/my_rainbow_puzzler_is_out_try_the_free_demo/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jgsodb/my_rainbow_puzzler_is_out_try_the_free_demo/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jgs50u/current_v10_is_released/" target="_blank">Current v1.0 is released!</a>
            <div class="item-content">&#32; submitted by &#32; <a href="https://www.reddit.com/user/long_void"> /u/long_void </a> <br/> <span><a href="https://crates.io/crates/current/1.0.0">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jgs50u/current_v10_is_released/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jg3jhi/advantages_and_adoption_of_rust_in_the_videogame/" target="_blank">Advantages and Adoption of Rust in the Videogame Industry</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>Recently, I have been developing a game in Rust just for fun, and a few questions have come up:<br/> Is there any large or medium-sized company promoting the adoption of Rust in the videogame industry? Does Rust offer any advantages over C++ when developing AAA games?</p> <p>Rust&#39;s advantages are evident when it comes to &quot;traditional&quot; software development, but what specific benefits does it provide in the gaming industry? A bug in a game will only affect the player, so I don&#39;t see it as a security risk. Beyond the fact that a game with many bugs can harm its reputation and reception, or that some online game bugs could impact other players&#39; experiences, I am not sure if Rust has a clear advantage over C++ in this regard.</p> <p>The potential advantages I can see is that, being a modern language, it could facilitate the use of best practices and speed up development times. This, in turn, could improve game quality and reduce the necessary budgets.</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/ImperialKonata"> /u/ImperialKonata </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jg3jhi/advantages_and_adoption_of_rust_in_the_videogame/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jg3jhi/advantages_and_adoption_of_rust_in_the_videogame/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jeja08/fmod_rust_issue/" target="_blank">fmod - rust issue</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I am following the instructions on </p> <p><a href="https://github.com/lebedec/libfmod">https://github.com/lebedec/libfmod</a></p> <p>to test fmod, so, I have copied the app in the README file</p> <pre><code>use libfmod::{Error, System, Init, Mode}; fn main() -&gt; Result&lt;(), Error&gt; { let system = System::create()?; system.init(512, Init::NORMAL, None)?; let sound = system.create_sound(&quot;C:/Users/test/fmod-test/assets/1.ogg&quot;, Mode::DEFAULT, None)?; let channel = system.play_sound(sound, None, false)?; while channel.is_playing()? { // do something else } system.release()?; Ok(()) } </code></pre> <p>then copied over the </p> <p>fmodstudio_vc.lib</p> <p>fmodstudio.dll</p> <p>fmod.dll</p> <p>fmod_vc.lib</p> <p>but when I run the app I get this error</p> <p>Error: Fmod { function: &quot;FMOD_System_Create&quot;, code: 20, message: &quot;There is a version mismatch between the FMOD header and either the FMOD Studio library or the FMOD Low Level library.&quot; }</p> <p>what could be the issue?</p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/osama_awad"> /u/osama_awad </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jeja08/fmod_rust_issue/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jeja08/fmod_rust_issue/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jdgyvf/fishbots_a_rust_lua_wasm_experiment_coding_game/" target="_blank">FishBots - a Rust + Lua + Wasm experiment / coding game</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jdgyvf/fishbots_a_rust_lua_wasm_experiment_coding_game/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>Hi, I&#39;ve recently created a small PoC coding game to test a possible Lua integration incl. a WASM target (tl;dr mlua won&#39;t work, at least not together with Winit, use piccolo instead ;)</p> <p>Anyways, the goal is to program your bot-boat (or a few of them) to collect as many fish as possible in a given period. The control code is in Lua.</p> <p>You can give it a shot online here:</p> <p><a href="https://maciejglowka.com/extras/fish_bots/">https://maciejglowka.com/extras/fish_bots/</a></p> <p>And the implementation:</p> <p><a href="https://github.com/maciekglowka/fish_bots">https://github.com/maciekglowka/fish_bots</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/maciek_glowka"> /u/maciek_glowka </a> <br/> <span><a href="https://i.redd.it/3nj61l5c0ape1.png">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jdgyvf/fishbots_a_rust_lua_wasm_experiment_coding_game/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jcx59f/bevy_scripting_v0100_parallelisable/" target="_blank">Bevy Scripting v0.10.0 - Parallelisable & Parameterisable Script Systems</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><h1><a href="https://github.com/makspll/bevy_mod_scripting/"><code>bevy_mod_scripting</code></a> 0.10.0 is out!</h1> <h2>Summary</h2> <h3>Script Systems</h3> <p>Script Systems get an overhaul, now supporting: - Parallelisation &amp; Ordering against any other rust or script system - Previously you could only order script systems against rust systems - Parameterisation via <code>resource</code> and <code>query</code> builder functions - Exclusive and non-exclusive script systems are permissible, setting <code>exclusive</code> on the builder will allow the system to access anything like normal, but it will mean the system cannot be paralellised - Non-exclusive systems are only allowed to access the resources and queries they declared, this is why we can parallelise them like normal bevy systems - The pre-declared resource references and query results are passed in as arguments to the provided system handler e.g.:</p> <p>```lua function on_init() local post_update_schedule = world.get_schedule_by_name(&quot;PostUpdate&quot;)</p> <p>local my_system = world.add_system( post_update_schedule, system_builder(&quot;my_parameterised_system&quot;, script_id) :resource(ResourceTypeA) :query(world.query():component(ComponentA):component(ComponentB)) :resource(ResourceTypeB) ) end</p> <p>function my_parameterised_system(resourceA,query,resourceB) print(resourceA, query, resourceB) for i,result in pairs(query) do components = result:components() assert(#components == 2) end end ```</p> <h3>Type Cache</h3> <p>A <code>types</code> global is now exposed containing all of the types found in the type registry:</p> <p><code>lua -- instead of: world.get_type_by_name(&quot;MyType&quot;) -- you can use: types.MyType </code></p> <h3>LAD Global Improvements</h3> <p>The LAD format now supports arbitrary <code>TypedThrough</code> types as global instances.</p> <p>The the mdbook pre-processor globals page got some love and now inlines links to each type as well as splits up the section to be more readable.</p> <h3>Other</h3> <ul> <li>Fixed issue where unit enum variants would be converted to <code>nil</code></li> <li><code>ScriptComponent</code> now implements <code>Reflect</code> (Thanks @Peepo-Juice)</li> </ul> <h2>Changelog</h2> <p>See a detailed changelog <a href="https://github.com/makspll/bevy_mod_scripting/blob/main/CHANGELOG.md">here</a></p> <h2>Migration Guide</h2> <p>The migration guide for this release can be found <a href="https://github.com/makspll/bevy_mod_scripting/blob/main/release-notes/0.10.0-migration.md">here</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/makspll"> /u/makspll </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jcx59f/bevy_scripting_v0100_parallelisable/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jcx59f/bevy_scripting_v0100_parallelisable/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jcdoxu/need_uptodate_advice_on_graphics_choice/" target="_blank">Need up-to-date advice on graphics choice</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>I am building a voxel engine, it&#39;s something I&#39;ve been thinking about for years. It&#39;s basically a voxel engine that doesn&#39;t use cubes, the shape it uses has many more triangles. I got a prototype in C++. It works, there&#39;s just a lot of triangles, and I have spent countless hours designing optimizations for this engine to get it to work at real-time. In runs fine in c++, it just needs more optimizations to get everything I want in there, I know how to optimize it, its a lot of tricks with memory, which c++ will likely kick my a** for.</p> <p>Despite the high poly-count, my OpenGL c++ works. But I am now going to be writing a lot of code where passing data around happens, for optimization. I find that c++ is really hard to keep track of memory, and I feel like rust will solve this problem definitely. I just can&#39;t, <em>for the life of me,</em> decide where to start. I have looked at ash bindings, and holy s*** the sheer absurdity of using Vulkan compared to OpenGL is insane. It&#39;s like c++ compared to punch cards. I absolutely cannot do it, it freaks me out. </p> <p>Then there are a couple libraries that have nice OpenGL bindings, but I don&#39;t know which one?! I can&#39;t tell which ones are more/less stable, which are incomplete. You know the feeling, I don&#39;t want to start some big project and then find out next month that I made the wrong choice.</p> <p>So my question is:<br/> <strong>Which choice do you think is best?</strong></p> <ol> <li>Just copy-paste and skim over vulkan boilerplate and bang my head against a wall trying to figure out how to get lighting, camera, instancing, VBO, VAO, etc. in vulkan (like, refactor vulkan to be more like my OpenGL comprehension so I can just keep going about writing my engine, and down the road when I have time I actually learn it.)<br/></li> <li>Use an OpenGL binding library (if so, which do you recommend and briefly, why?)<br/></li> <li><em>Neither, turn around, rust gamedev is a sinking ship, and there are no good choices. Stay in c++ happy land (kindof /s)</em><br/></li> </ol> <p>The reason I would like to use vulkan, is the Ash bindings seem to be the most stable, which makes sense. They&#39;re so low-level they&#39;re basically a reflection of vulkan in c-like langs. So I am confident if i use them, then the pipeline I write will be long-term effective.<br/> This is a life-goal of mine, not just a side project. This is something I&#39;ve been working on/off for years on, I just recently started having more time and I&#39;m trying to get the right foundation while I have the time (over the next few years!) </p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/AdventurousResort370"> /u/AdventurousResort370 </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jcdoxu/need_uptodate_advice_on_graphics_choice/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jcdoxu/need_uptodate_advice_on_graphics_choice/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jbzzr6/how_i_can_make_a_grand_strategy_game_in_rust/" target="_blank">how i can make a grand strategy game in rust? [question and recommendations]</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>my goal is make something like victoria 2, a vic2 very simple version, what I should use? i have some experience with programming but I don&#39;t have much experience in rust, I&#39;m learning about wgpu(to make a voxel engine) but in this vic2 copy project I don&#39;t want to use wgpu, I want something more simple</p> <p><strong>does anyone have a lib recommendation and any resources that can help me?</strong></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/danitw16"> /u/danitw16 </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jbzzr6/how_i_can_make_a_grand_strategy_game_in_rust/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jbzzr6/how_i_can_make_a_grand_strategy_game_in_rust/">[comments]</a></span></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jb6l7d/demo_and_devlog_for_my_rainbow_puzzler_made_in/" target="_blank">Demo And Devlog For My Rainbow Puzzler Made In Raylib And Rust</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jb6l7d/demo_and_devlog_for_my_rainbow_puzzler_made_in/">  </a> </td><td> <!-- SC_OFF --><div class="md"><p>Hello, just uploaded my devlog for my rainbow Tetris like game <strong>Full Spectrum Gradient</strong> made in Raylib and Rust. The video starts off with showing the trailer for the game and then getting into technical details, and there&#39;s also a free demo on Steam if you want to try it out!</p> <p>Devlog:<br/> <a href="https://www.youtube.com/watch?v=PuinFHZopiM">Full Spectrum Gradient | Devlog | Raylib and Rust</a></p> <p>Steam Store Page With Demo:<br/> <a href="https://store.steampowered.com/app/3445300/Full_Spectrum_Gradient/">Full Spectrum Gradient on Steam</a></p> <p><a href="https://preview.redd.it/5mgdla3j9ooe1.png?width=1280&amp;format=png&amp;auto=webp&amp;s=a8acf912d60caa6cfef458e3e95f2a5d5fc9eac9">https://preview.redd.it/5mgdla3j9ooe1.png?width=1280&amp;format=png&amp;auto=webp&amp;s=a8acf912d60caa6cfef458e3e95f2a5d5fc9eac9</a></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Volcanic-Penguin"> /u/Volcanic-Penguin </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jb6l7d/demo_and_devlog_for_my_rainbow_puzzler_made_in/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jb6l7d/demo_and_devlog_for_my_rainbow_puzzler_made_in/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1jawzmu/graphite_image_editing_as_a_syntax_tree_with/" target="_blank">Graphite: Image Editing as a Syntax Tree (with Keavon Chambers & Dennis Kobert) [Developer Voices podcast]</a>
            <div class="item-content"><table> <tr><td> <a href="https://www.reddit.com/r/rust_gamedev/comments/1jawzmu/graphite_image_editing_as_a_syntax_tree_with/">  </a> </td><td> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Keavon"> /u/Keavon </a> <br/> <span><a href="https://www.youtube.com/watch?v=ZUbcwUC5lxA">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1jawzmu/graphite_image_editing_as_a_syntax_tree_with/">[comments]</a></span> </td></tr></table></div>
          </li>
  
          <li>
            <a href="https://www.reddit.com/r/rust_gamedev/comments/1ic8n61/are_we_game_yet_new_featurescall_for_contributions/" target="_blank">Are We Game Yet? - new features/call for contributions</a>
            <div class="item-content"><!-- SC_OFF --><div class="md"><p>For those who are unfamiliar: <a href="https://arewegameyet.rs">Are We Game Yet?</a> is a community-sourced database of Rust gamedev projects/resources, which has been running for over eight years now (?!).</p> <p>For the first time in a while, the site has had some quality-of-life upgrades over the past few weeks, so I thought I&#39;d do a quick announcement post:</p> <ul> <li><strong>You can now sort the crate lists by various categories, such as recent downloads or GitHub stars.</strong> This has been requested for a long time, and I think it makes the site much more useful as a comparison tool!</li> <li><strong>We now display the last activity date for Git repos, so you can see at a glance how active development is.</strong> Thank you to ZimboPro for their contributions towards this.</li> <li><strong>The site is now more accessible to screen readers.</strong> Previously, they were unable to read any of the badges on the crates, as they were displayed via embedded images.</li> <li><strong>Repos that get archived on GitHub will now be automatically moved to the archive section of the site.</strong> Thank you to AngelOnFira for building the automation for this!</li> </ul> <p>I&#39;d also like to give a reminder that Are We Game Yet? is <a href="https://github.com/rust-gamedev/arewegameyet">open source</a>, and we rely on the community&#39;s contributions to keep the site up to date with what&#39;s happening in the Rust gamedev ecosystem (I myself haven&#39;t had as much time as I&#39;d like for gamedev lately, so I&#39;ll admit to being a bit out of the loop)!</p> <p>Whether it&#39;s by helping us with the site&#39;s development, <a href="https://github.com/rust-gamedev/arewegameyet?tab=readme-ov-file#contribute">raising PRs to add new crates to the database</a>, or just by creating an issue to tell us about something we&#39;re missing, any contribution is very much appreciated üòä</p> <p>We&#39;d also welcome any feedback on the new features, or suggestions for changes that would make the site more useful to you.</p> <p><em>Crossposted to URLO</em> <a href="https://users.rust-lang.org/t/are-we-game-yet-new-features-call-for-contributions/124760"><em>here</em></a><em>.</em></p> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/seventeencups"> /u/seventeencups </a> <br/> <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1ic8n61/are_we_game_yet_new_featurescall_for_contributions/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/rust_gamedev/comments/1ic8n61/are_we_game_yet_new_featurescall_for_contributions/">[comments]</a></span></div>
          </li>
  
        </ul>
  
      </div>
  
      <div class="card">
        <h2>Movie Trailers</h2>
        <ul class="item-list">
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/a-working-man.html" target="_blank">A Working Man Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/on-swift-horses.html" target="_blank">On Swift Horses Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/final-destination-bloodlines.html" target="_blank">Final Destination: Bloodlines Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/f1.html" target="_blank">F1 Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/lilo-and-stitch-live-action.html" target="_blank">Lilo & Stitch Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/freakier-friday.html" target="_blank">Freakier Friday Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/the-life-of-chuck.html" target="_blank">The Life of Chuck Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/shadow-force.html" target="_blank">Shadow Force Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/elio.html" target="_blank">Elio Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/ballerina.html" target="_blank">Ballerina Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/together.html" target="_blank">Together Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/the-shrouds.html" target="_blank">The Shrouds Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/drop.html" target="_blank">Drop Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/one-battle-after-another.html" target="_blank">One Battle After Another Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/bring-her-back.html" target="_blank">Bring Her Back Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/hurry-up-tomorrow.html" target="_blank">Hurry Up Tomorrow Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/the-accountant-2.html" target="_blank">The Accountant 2 Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/tron-ares.html" target="_blank">Tron: Ares Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/naked-gun-2025.html" target="_blank">The Naked Gun Movie Trailer</a>
            
          </li>
  
          <li>
            <a href="http://www.filmjabber.com/movie-trailers/mission-impossible--the-final-reckoning.html" target="_blank">Mission: Impossible - The Final Reckoning Movie Trailer</a>
            
          </li>
  
        </ul>
      </div>
  
    </div>
  </body>
  </html>